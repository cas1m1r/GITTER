======================: FILES :======================
======================: BRANCHES :======================
======================: LOGINFO :======================
commit 9a5acf921943364e559328b5efb80aab71e79d80
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Thu Oct 13 19:16:54 2022 +0200

    Add extra check for cases where no MDL blockers are found
    
    For example in MDL-69655 there was a blocker, but it was
    a MDLSITE one, and, by default, that was leading to a
    lowered priority, when it shouldn't.
    
    Now we skip those issues, when blockers are not MDL.

commit 44af756fb4f82ff9add38514d778cd9109cca846
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Thu Oct 13 18:38:46 2022 +0200

    Don't move the priory of CLR issues back to 0 ever
    
    That way the job will be 100% balanced with the job
    setting the priority to 1 automatically for all them.

commit 17af5f0d4e3c4caf92f80604672cd4f4c4865aeb
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Thu Oct 6 09:25:44 2022 +0200

    Clean the "current in integration" field on reopen
    
    Note this is done automatically by mv_reopened_out_from_current,
    hourly, but if we can do it now for these automatic reopens, better.
    (that saves one notification in the Tracker)

commit 949e909c08af55f4d9d76c0863be5cb554cb966d
Merge: 6871038 f343c8c
Author: Eloy Lafuente <stronk7@moodle.org>
Date:   Sat Oct 1 10:41:40 2022 +0200

    Merge pull request #211 from stronk7/remove_old_npm_stuff_forever
    
    Remove old npm stuff forever

commit f343c8c00128fa66b99fec5f2df445c174c8c3db
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Thu Sep 29 18:45:07 2022 +0200

    Silly detail, just bump version and make 3.8.0 the minimum
    
    Note this has zero impact, this is not a real moodle plugin.

commit ab25f0a36ca4ba80e54d9eaddd481bf65ceec392
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Thu Sep 29 18:30:37 2022 +0200

    Change an assertion to get test passing both with MySQL 5 and 8
    
    MDL-75856 has been created about to normalize that bit, but
    I need to get local_ci passing in order to change other stuff,
    hence accepting both 18 and 19 as valid outcome.

commit c971466baa187ef93ecde342459366fe256c954a
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Thu Sep 29 12:24:01 2022 +0200

    Remove the jshint utility and associated tests
    
    With this we completely remove the special npm uses
    in the tests, yay! Everything should be handled by
    local_ci itself now, installing the nodejs when needed.
    
    Also, move a few more tests (old, mainly) to match the
    expectations now that jshint is out. Bumping them to
    39_STABLE when possible (if they aren't explicitly old).

commit 310aad1d8cc6ab30da494b3ef924edf40790611b
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Wed Sep 28 23:01:16 2022 +0200

    Remove the csslint utility and associated tests
    
    Also, bump practically all tests to work against 39_STABLE (from
    34_STABLE). That way we ensure all them have .nvmrc available
    and we don't need to install it manually anymore.

commit ea9cabacf245c46595c8b09d5541321709b0ed95
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Tue Sep 27 23:28:10 2022 +0200

    Disable error_log because it causes php lint results differences
    
    Crazy, isn't it? But if error_log is set (I've it here pointing to
    my web server error logs) then the output is different with some
    blank line before the real lint problems.

commit 4ccf986288a4ed05d169b84050c6e3b4a25863aa
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Tue Sep 27 13:32:08 2022 +0200

    Remove nvm uses from Travis. Just specify node version and use npm.
    
    Install own local_ci dependencies should work with just this and
    keep nvm apart so the tests run without it, so we ensure that
    they are properly proceeding to install everything themselves.
    
    Also, some small updates/tweaks/comments.
    
    focal

commit 51003cdf6bba1f31c89045537ed07d4116e0cb8e
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Tue Sep 27 13:29:01 2022 +0200

    Just "source" it properly (was hurting me all the time, lol)

commit 6871038091b7cfcfe855797602b5764e1c320ab6
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Wed Sep 28 16:28:18 2022 +0200

    Fix the reopen timing and notification
    
    Because the reminder, sent after 5 days (for example) makes
    a fake transition (from WfF to WfF) we need to account separately
    for issues without changes:
        - Since sent to WfT  (7 days, for example) for issues that weren't reminded (notification = 2)
        - Since remind happened (2 days, for example) for issues that were reminded (notification = 3)

commit 74f95b0f5c1cd57942ebcc3be9993ee3af814e39
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Fri Sep 23 09:16:57 2022 +0200

    More "cime" label case-sensitive problems @ MDL-64431
    
    Pity search is case-insensitive and CRUD are sensitive. Only
    possible solution is to create some job that fetches all issues
    having those labels (in a insensitive way), and then go iterating
    over all them, updating the wrongly cased ones.

commit 54d7edbb3cfdd05089023dab2670ac3b11494c56
Merge: 155fc6f 82ad6e8
Author: Jun Pataleta <jun@moodle.com>
Date:   Thu Sep 15 13:58:25 2022 +0800

    Merge pull request #256 from andrewnicols/renamesFrom75716
    
    Add renamed classes following MDL-75716

commit 82ad6e861b88b21dc85f2a6fe6b2483113d46c6d
Author: Andrew Nicols <andrew@nicols.co.uk>
Date:   Thu Sep 15 12:35:54 2022 +0800

    Add renamed classes following MDL-75716
    
    In MDL-75716, unit test class names were updated to match file names. As
    a result the parent class for a couple of tests was changed and must be
    added to the list of known parent classes.
    
    The old location is not removed as they may still be legitimately used
    in older versions of Moodle.

commit 155fc6f4fe423de5ec15f7f74518660c9249a48e
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Wed Sep 14 12:07:35 2022 +0200

    Calculate last test in a file differently
    
    Recent changes in bats-core, in order to implement setup and
    teardown facilities, have changed how internal test names work.
    
    https://github.com/bats-core/bats-core/issues/39 (and others)
    
    Because if this we cannot use those test names to detect
    the last test in a file anymore.
    
    So we need to rely exclusively on BATS_TEST_NUMBER, that
    continues working ok.
    
    That's all we do here and it should make the tests to be back to pass.

commit 1a0e4588c8b5d098bb156138994aca8ec0ca1d26
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Tue Sep 13 23:33:20 2022 +0200

    Move from days to hours for timing better resolution
    
    We need to use hours instead of days, because the "AFTER -5d" is not accurate enough. In
    practice it accounts for 4.5 days, or something like that, hence the actions are happening
    some hours before they should. So, using hours (days * 24) to get more accurate results.

commit 984f5fc8dca92eed1438dd9e2dc530cf1d56751c
Merge: f0652df 0d0aa67
Author: Jun Pataleta <jun@moodle.com>
Date:   Mon Sep 5 10:03:07 2022 +0800

    Merge pull request #254 from stronk7/manage_awaiting_for_feedback
    
    MDLSITE-6612 Manage the issues awaiting for feedback

commit 0d0aa6717952d3dee2df374d267b4e95f4f1fee4
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Sun Sep 4 12:02:56 2022 +0200

    MDLSITE-6612 Manage the issues awaiting for feedback
    
    This controls the flow of issues waiting for feedback (WfF), both
    Integration (IR) and Component Leads Review (CLR). Performing
    the following actions:
    
    A) Initial notification to all issues sent to WfF, explaining
       which the expectations are.
    B) After a (configurable) number of days under WfF, reopen the issue
       and notify it.
    C) Optional. After a (configurable) number of days under WfF,
       remind in the issue about the remaining days and expectations.
    
    Note the solution heavily rely on the "Waiting for Feedback Notifications"
    field specifically created for this job and also includes workflow
    modifications. For more details, visit the issue (MDLSITE-6612).

commit f0652dfcdbd0ada82a3808f91b921a9b1cf0def6
Author: Andrew Nicols <andrew@nicols.co.uk>
Date:   Wed Aug 3 16:30:45 2022 +0800

    MDLSITE-6745 mustachelint: Ensure that fatal errors include a source line

commit 2219565179e624389a30e516ef4f478f6fd6a4f6
Merge: d9b5860 02fc65f
Author: Eloy Lafuente <stronk7@moodle.org>
Date:   Wed Aug 10 11:17:53 2022 +0200

    Merge pull request #253 from stronk7/skip_backup_external_for_plugins
    
    MDLSITE-6709 Avoid running the backup & external check for plugin runs

commit 02fc65f2d011405ccaaec2857a0ee0421803b195
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Wed Aug 10 00:31:15 2022 +0200

    MDLSITE-6709 Avoid running the backup & external check for plugin runs
    
    As far as we don't check the plugins incrementally (commit by commit)
    like we do for normal MDL issues by CiBoT or PRs by moodle-plugin-ci,
    this check is not useful for checks coming from the plugins database
    (because they are just standard moodle branches + 1 unique commit
    with all the plugin source code).
    
    So we are disabling this check to be run when the source branches
    are PLUGIN-xxx ones (we do the same for the commit check already).
    
    Covered with tests.
    
    PS: Also, delete old TODO comment that should have been deleted
    few weeks ago, when another PR was merged.

commit d9b5860adea3805fb48b87d97c92aca6e683c0b5
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Sat Aug 6 18:15:30 2022 +0200

    MDLSITE-6685 Better detect main backup/moodle2 changes
    
    There are more changes coming soon, to better detect
    when plugins are involved, but this should be enough
    to detect / (root) backup/moodle2 changes because they
    weren't being detected.
    
    Covered with test.

commit c22e50103a0b076c8e9c997c8cb3d7351c231ae5
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Wed Jul 27 19:53:13 2022 +0200

    Fix some self-tests to work with 4.1dev (master)
    
    - Min PHP version is 7.4
    - 4.1 only can be upgraded from 3.9 and up
    - Modernise some compare_databases tests and jump to utf8mb4
    - Enable a historically skipped test (fixes MDLSITE-4769)

commit a8461d7d5ae587ca3c8d374c0af3d3b1f2851259
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Sun Jul 10 11:07:05 2022 +0200

    Fix for whenever the comment is open / without restrictions

commit 0339145f2a0d32484e2da58497c17c2138f4d969
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Fri Jul 1 14:17:12 2022 +0200

    Tidy output a little bit to make it consistent for all jobs

commit b7f931fc7d40f9695a9b51c9d2b1aa5375f0c3a1
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Fri Jul 1 14:05:13 2022 +0200

    Make goutte jobs to run all suites
    
    That way we don't increase the # of slots needed and, as far as
    the goutte jobs are relatively quick, we can run both suites
    without too much trouble.

commit 8f5f8acaa54355549d856a8c12ce5d9ed896dc1b
Merge: aacfde7 4111f7e
Author: Andrew Lyons <andrew@nicols.co.uk>
Date:   Tue Jun 28 21:28:07 2022 +0800

    Merge pull request #250 from stronk7/set_current_with_clr_no
    
    All jobs moving issues to current integration must set clr = no

commit 4111f7ec46ea3fdfa0402999211c1155c8abca3f
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Tue Jun 28 12:31:52 2022 +0200

    All jobs moving issues to current integration must set clr = no
    
    All the issues arriving to current integration must have
    the "Component Lead Review" field set to no, no matter if
    the move is done by any of the queue managers or the bulk-move
    that is executed on freeze day.
    
    If they are kept empty / not set, that affects pickers because
    one of the sorting criteria is that field.
    
    Technically, all the places that are setting:
    
    customfield_10211:Yes (Currently in integration = Yes)
    
    Must, unconditionally, set:
    
    customfield_15810:No (Component Lead Review = No)
    
    That's exactly what this change does.

commit aacfde709458aef164ac4fec800ca0cbab69d898
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Tue Jun 14 20:03:18 2022 +0200

    Set integration priority of CLR issues to 1
    
    That way they will show always on top of the pickers
    as soon as they come to "Waiting for push".
    
    This corresponds to point #8 of MDLSITE-6610

commit 166453d67e2a5ada637044dde9e4ede22e470cc4
Merge: 2a863f0 96c0984
Author: Eloy Lafuente <stronk7@moodle.org>
Date:   Tue Jun 7 19:23:41 2022 +0200

    Merge pull request #249 from stronk7/verify_phpunit_xml
    
    Verify phpunit xml

commit 96c0984694bd82ed7342582a4c8b89d1d7554276
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Tue Jun 7 16:04:22 2022 +0200

    Add the script that will detect all the problems
    
    Any error will lead to error exit code:
    - When some tests directory in not covered by any suite @ phpunit.xml
    - When some test file has multiple unit test classes.
    
    Covered with tests.

commit b82373d624868ea06299a06e27be1fde99b3dc0c
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Tue Jun 7 11:14:18 2022 +0200

    Create the phpunit.xml file not requiring database or real site
    
    In order to create the phpunit.xml file, PHPUnit requires a
    real database / site to be able to do its job. But here we are
    @ CIs and don't want to spend resources and time doing the
    whole phpunit boostrap (database connection, composer stuff...).
    
    So this CLI just workarounds all those requirements and straight
    calls to phpunit_util::build_config_file() that is able to
    do all the work with just a few includes.
    
    This uses the also, moodle-less load_core_component_from_moodle()
    in order to get all the components loaded.

commit 2a863f062b5484f4d31606295e1662ed2a3b9705
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Sat Jun 4 12:50:26 2022 +0200

    Quote restrictedto role, it can be multi-word

commit a0bb7f8f179ace4f58ca009205abf60e790cce12
Merge: 5fb8f26 9562ce0
Author: Andrew Lyons <andrew@nicols.co.uk>
Date:   Thu Jun 2 20:03:29 2022 +0800

    Merge pull request #248 from stronk7/move_to_moodle_cs
    
    Move to moodle cs

commit 9562ce0e1caee1d1e04bd0c86f9495182757f59e
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Wed Jun 1 23:52:16 2022 +0200

    Switch to composer-installed phpcs and moodle-cs
    
    Not much to say, just install moodle-cs with composer
    and ensure that CiBoT is using the phpcs that comes with it.

commit c1913ef4470b8cc5bc197f1a8a965efd0a195ad7
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Wed Jun 1 23:42:29 2022 +0200

    Remove any mention / use of local_moodlechecker
    
    This isn't going to be any more a dependency of local_ci
    because it's being replaced by upstream PHP_CodeSniffer
    using the moodle-cs standard installed.
    
    Everything installed via composer.

commit 5fb8f2622dbf5fe65a97986db04abde68a9c520a
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Wed May 25 23:18:00 2022 +0200

    utf8mb4_bin collation requires utf8mb4 charset

commit b162f174f70ca25e18d087a58e8d5c34e2c6d440
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Mon May 16 18:00:59 2022 +0200

    Change hardcoded tracker URL to parameter one

commit 90ba975f2e7142a1f80c49bc7c83cb84ae9c8d8b
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Wed May 11 10:50:33 2022 +0200

    Add clr picker for component leads review

commit fa36f83e61b6a877ba85ae2ad0d57f2a4da217d6
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Wed Apr 27 11:16:23 2022 +0200

    Bump nodejs to another arbitrary version
    
    Some of the master components require nodejs > 12, so we need
    to bump the test to use some other arbitrary version (v16.11.0)
    fulfilling that requirement.

commit 2e8e535928fe401c88fed6637dc34d4fe36d2c43
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Wed Apr 27 09:30:55 2022 +0200

    After release, first held issue, then keep the queue fed
    
    We have just swapped the steps, because, after release (while on-sync)
    we were first moving the issues to current and later looking for
    new improvements and features to be held (and none was being found,
    obviously because they had been moved).
    
    So this change ensures that, after release (it was correct before
    release). We first held improvements and new features (B1a) and
    only then consider the remaining issues to keep the current
    integration fed (B1b).

commit 799ae8c13c0ab5045211e42bc7728344e9551313
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Sun Jan 23 16:25:14 2022 +0100

    Change the query used to count reopened issues
    
    Previously it was looking for FROM...TO transitions but it's
    possible that the transition happens from other statuses.
    
    So, now, we count ANY issue that was under integration in process,
    waiting for feedback or testing failed statuses and has been reopened.
    
    Both conditions since the last time a roll happened, of course (when
    the gates were open to continue integrating).

commit 85fbd32645cf35f81f8bf40318848a6f11fe01ae
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Fri Jan 21 19:19:51 2022 +0100

    Add support for waiting for feedback status where needed
    
    Only a couple of scripts need to take the new "Waiting for feedback"
    status under consideration. Added support.
    
    Also, fixed a couple of comments not matching the job real
    functionality (copy/paste from other jobs, surely).

commit c06eb97e71ae55154432a1ea8d7622fe2cafdf48
Merge: bfc1dcb 6bb64ea
Author: Sara Arjona <sara@moodle.com>
Date:   Tue Jan 18 15:17:49 2022 +0100

    Merge pull request #247 from stronk7/cibot_bye_travis
    
    Remove the travis checker from CiBoT

commit 6bb64eaad0932e9adace35d1cd7243efb9d2e373
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Mon Jan 17 18:05:14 2022 +0100

    Remove the travis checker from CiBoT
    
    With everything and everybody already moved to GHA, it
    doesn't make much sense to keep the travis checker running
    on every CiBoT execution.
    
    Hence, removing it from CiBoT (remote_branch_checker) and
    associated tests. But keeping the shell script and its own
    tests, in case they are useful for anybody.
    
    Also, added TODO about the possibility of adding a GHA
    checker (a simple https request can tell us if actions are
    enabled for a repo), but not sure if it's worth it as far
    as 99% of people have them enabled.

commit bfc1dcb45c5f400e648baa9d1378add8bc3ebdf9
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Wed Dec 1 15:05:49 2021 +0100

    Avoid blocked issues to "consume" to be moved seats
    
    Before the patch, every blocked issue was being accounted
    as a move (because before we implemented the blocked detectors
    all issues were, unconditionally, moved).
    
    Now, we account to really moved issues in another ($moved)
    variable and allow the process to continue until we have
    really moved $movemax issues.
    
    This way, blocked issues (or any other condition/check) that
    we may want to introduce in the future won't affect the outcome
    of moving up to $movemax issues.

commit c49742331cff1c89ba0a45b540e93c33a4c55db0
Merge: 85eb76e 6292dc8
Author: Andrew Lyons <andrew@nicols.co.uk>
Date:   Tue Nov 30 08:31:32 2021 +0800

    Merge pull request #246 from stronk7/phpcs_use_full_components_list
    
    Pass the complete list of components to phpcs

commit 6292dc8d7f8ce31c3c143d95c5fb7cf51188dfb7
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Mon Nov 29 14:40:36 2021 +0100

    Pass the complete list of components to phpcs
    
    Normally, phpcs itself is able to get all the components
    installed in a given dir root (it just loads them using
    standard core_component class).
    
    But, for performance reasons, with CiBoT, we delete all
    files from dir root but those being part of the patchest
    being analysed (and a few exceptions like version.php, grunt...).
    
    That means that it's unable to load core_component or find all
    the components available in a site.
    
    But that's ok, because one of the first things that the remote
    branch checker already does (before deleting files), is to, always,
    calculate all the valid components and save them to the
    /work/valid_components.txt file.
    
    And then, codechecker can use the new config setting
    "moodleComponentsListPath" to load exactly that file. See
    https://github.com/moodlehq/moodle-local_codechecker/pull/160
    for more information about that feature.
    
    Covered with tests to verify that it's getting the components
    information properly.

commit 85eb76efed4c6572fdcd4d6022752a13cf058fe9
Merge: 896fd69 4aa969f
Author: Eloy Lafuente <stronk7@moodle.org>
Date:   Sat Nov 20 12:20:42 2021 +0100

    Merge pull request #245 from stronk7/upgrade_external_backup
    
    New upgrade_external_backup added to CiBoT

commit 4aa969f7ea1be53b61576005d9f988e4f31e5e7f
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Sun Nov 14 19:56:11 2021 +0100

    Update all remote_branch_checker tests to include new check

commit d1bca6d8ce0f3194713c9961890cd0b2e3e4d051
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Sun Nov 14 18:26:01 2021 +0100

    Cover the new upgrade_external_backup_check.sh with tests

commit c96b19cc3eaeb22173493d2235897fea7ff20aa1
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Sun Nov 14 10:38:26 2021 +0100

    New basic check to detect DB changes missing external/backup stuff

commit 896fd691cd5518c7711ede575f973c5cbb543487
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Fri Nov 12 23:05:04 2021 +0100

    Ensure updated openssl / ca certificates are in the environment
    
    Lalala, Travis. Amazing we have to do this by hand.

commit 787dba7afde5cfddf36fe46570caa95499daf735
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Thu Nov 11 00:06:53 2021 +0100

    Normal: Move issues to current if the are not blocked by unresolved
    
    In order to keep the current integration queue cleaner, issues
    only will be moved to it (from candidates) if they are free from
    any unresolved blocker. Till then, they will be kept as candidates.
    
    Also, amend an incorrect comment in the continuous queues manager
    that was left there from previous iteration.

commit f0d35d9e0dbdb5955df9cef9532972bca445ec22
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Wed Nov 10 23:42:17 2021 +0100

    Continuous: Move issues to current if the are not blocked by unresolved
    
    In order to keep the current integration queue cleaner, issues
    only will be moved to it (from candidates) if they are free from
    any unresolved blocker. Till then, they will be kept as candidates.

commit ad40526157ed80a952b0ea479039be12776e3827
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Wed Nov 10 19:02:50 2021 +0100

    Keep main version.php and config-dist.php for later detections
    
    Some utilities do use those 2 files to find a proper dirroot
    and branch, in order to perform some decisions. So explicitly
    keeping them always. Any problem with them will be filtered-out
    because they are not part of the patches normally, so it doesn't
    hurt to have them there.

commit 6b7a9b27f4374632c833365b4f88e15da7bc4984
Merge: 8bafac0 fbad0b2
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Tue Nov 2 09:46:30 2021 +0100

    Merge branch 'andrewnicols-unauthgithub'

commit fbad0b20ce01fe53101a6b6e944cdf3c01c2db5d
Author: Andrew Nicols <andrew@nicols.co.uk>
Date:   Tue Nov 2 09:54:53 2021 +0800

    Rewrite unauthenticated github URLs to use https
    
    See https://github.blog/2021-09-01-improving-git-protocol-security-github/#no-more-unauthenticated-git
    for more information on this change

commit c51887a573d532d2f493bc1e092f839e313087da
Author: Andrew Nicols <andrew@nicols.co.uk>
Date:   Tue Nov 2 10:00:23 2021 +0800

    Rewrite git:// URLs at https:// for github
    
    See https://github.blog/2021-09-01-improving-git-protocol-security-github/#no-more-unauthenticated-git
    for more information on this change

commit 8bafac05702ea52a1c53ed7843b27946f4bc9fb0
Merge: 5e6958e 405df88
Author: Andrew Lyons <andrew@nicols.co.uk>
Date:   Thu Oct 14 10:27:30 2021 +0800

    Merge pull request #242 from stronk7/add_classic_runs
    
    Add classic runs to ToBiC jobs

commit 405df8845f2515d5d1983128375de64da45ba5e0
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Wed Oct 13 11:51:33 2021 +0200

    Add classic runs to ToBiC jobs
    
    With 4.0, boost is getting a lot of changes and we need to ensure
    that classic continues ok. This adds a classic run to all ToBiC
    runs (automated or manually invoked by integrators).

commit 5e6958e2ed5cd14dd142c8d04a2c308f3880b301
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Wed Oct 13 23:33:35 2021 +0200

    Forgot to remove transition code in previous commit, my fault
    
    Now issues are only transitioned when they haven't unresolved blockers.

commit 830613ab89b65329b03143d8711ea559572b4dc4
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Wed Oct 13 23:15:31 2021 +0200

    Always verify if the candidate issues are blocked by others
    
    Previously it only was checked for "blocker" issues (one of
    the conditions to consider the issue important). Now it's checked
    as for all the conditions:
    - mldqa
    - must-fix
    - security
    - blocker
    
    Old behaviour was causing some ping-pong with issues being raised
    and immediately after that, being lowered. Now, they won't be
    raised ever if it's blocked by any unresolved.

commit 0917a1c264f4a0077980f6cc8a1ecfeca992cbdc
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Wed Oct 13 12:19:00 2021 +0200

    Avoid some bash array operations problem
    
    When there aren't commits returned from git history, avoid
    the loop iteration to happen, because some associative array
    operations may fail with error:
    
    bad array subscript
    
    when the keys are empty.

commit 87e8a567e5faebc04fcb00c8533660cfab57cf50
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Sat Oct 2 23:20:05 2021 +0200

    Don't look for active branches when there aren't issues

commit 4d1290d51c81a5f4e8e839082611eb0ab888275c
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Sat Oct 2 16:37:34 2021 +0200

    Verify that applied branches and fix-versions in the tracker match
    
    Till now just searched by unowned commits, without ever matching
    if the fix-versions effectively match the branches that have received
    the fix.
    
    Now, given the list of fix-versions for an issue, we calculate
    the expected branches where it should be and verify if any of
    the expectations is missing. Because, here and there, we forgot
    to add some stable (normally) fix version and the job continued
    passing. Now it will ask to fill the fix-versions properly

commit ad78f226e932d17e7e3e1ff8d9b811fb603a8c52
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Sat Sep 25 19:36:34 2021 +0200

    Slightly improve some comments
    
    To make clearer that the continuous queues manager gets the baton
    immediately after freeze (but not the week of continuous before it)

commit a1377f0355cb7acc7e13f9b55e0cecb58047ed8e
Merge: 5b280f5 7dd10c1
Author: Andrew Lyons <andrew@nicols.co.uk>
Date:   Fri Sep 24 15:06:49 2021 +0800

    Merge pull request #241 from stronk7/lower_priority_blocked
    
    Lower priority blocked

commit 7dd10c1ff36dc4fb5fe2538ddde1e930a32c2adc
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Fri Sep 24 00:09:49 2021 +0200

    Avoid the normal queues manager to play with blocks/is blocked by issues
    
    The set_integration_priority_to_[zero|one] scripts are in charge of
    controlling the integration priority of both blockers and blocked issues
    (see the scripts for more details), so we don't want the normal queues
    manager to perform any change of priority on them.
    
    Note that this is the only other actually active script playing with
    integration priority (there is also the old delay_awaiting_issues one
    but we don't use it anymore because was replaced by the queue managers).

commit dc590f5bc3b918d503d2d3aabfb850d55da4bad6
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Thu Sep 23 23:44:41 2021 +0200

    Lower the priority of blocked issues
    
    This changes are very similar to the ones used to
    raise priority of blocker issues but, instead, lowers
    the priority of any issue that has unresolved blockers.
    
    Why? Because the blockers always need to be processed earlier
    (and will get the priority raised), hence the "blocked" ones
    better get the priority lowered.
    
    I've run the 2 scripts a number of times (raise & lower) and
    no ping-pong effect is possible within them, those raised remain
    raised and those lowered remain lowered.
    
    (unless something changes in the issues, of course, say because
    some of the blockers are resolved or whatever)
    
    After this, there will be another commit to make to the queues
    managers also aware of the blocking status, so they won't be
    undoing (raising) the priority of issues lowered by this job.
    
    Also note that a few small changes have been applied to the
    sister set_integration_priority_to_one.sh script to better
    inform in console about the decisions taken. Maybe we'll end
    also adding a restricted comment in the issue to know which
    script was in charge of deciding the change of priority (but
    it's not strictly needed now).

commit 5b280f5619526e1094d5db1b7f423aef817608a1
Merge: 8bf2eb4 b748134
Author: Andrew Lyons <andrew@nicols.co.uk>
Date:   Thu Sep 23 08:20:57 2021 +0800

    Merge pull request #240 from stronk7/raise_priority_blockers
    
    Raise priority of non-blocked blocker issues

commit b748134f9491e91540c6b5c6518b9a6bccb6fc85
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Thu Sep 23 00:34:30 2021 +0200

    Raise priority of non-blocked blocker issues
    
    Now, all the issues that are blockers (blocks link type) to others and don't have
    any unresolved blocking (is blocked by) issue, will get its integration
    priority also raised to 1.
    
    Done with pure JiraCLI, to allow it to work against any Jira server (we
    won't be able to use some plugin that provides the same in an easier
    way).
    
    This has been already executed a number of times and seems to be working
    correctly. Like 10-12 issues have got their priority raised. All them
    non-blocked blockers.
    
    Note that another follow-up will follow soon, about to lower the
    priority of any issue that is blocked.

commit 8bf2eb4b50f3db3c837f3e2c3a34c0945638fab4
Merge: f0bc138 a5a8fc0
Author: Eloy Lafuente <stronk7@moodle.org>
Date:   Mon Sep 13 11:08:33 2021 +0200

    Merge pull request #239 from stronk7/add_runner_to_list_of_mdl_jobs
    
    Add support to specify the runner to use

commit a5a8fc081798690680cefe679e8fe9eb6fc56711
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Mon Sep 13 10:30:17 2021 +0200

    Add support to specify the runner to use
    
    Defaulting to STABLE, also TESTING can be used.
    
    Only to the manual "list_of_mdls" jobs (normal and security).
    
    Also, detected some stuff pending in the security one, about
    the ability to pick the jobs to execute, so reconciling it
    to be feature-paired with the normal one.

commit f0bc13833182f40fd01727be37ac13031bf66162
Merge: 2bb9daf 2e12084
Author: Eloy Lafuente <stronk7@moodle.org>
Date:   Mon Sep 6 16:46:25 2021 +0200

    Merge pull request #238 from stronk7/buggy_en_au_prevention
    
    Prevent scripts against some buggy JAVA en_AU locales

commit 2e12084000f695f30f8adbd1dbb8b5c540a856c9
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Mon Sep 6 09:48:31 2021 +0200

    Prevent scripts against some buggy JAVA en_AU locales
    
    From CLDR29 to CLDR33, the month and day names for en_AU were broken, incorrectly
    adding a dot (.) after the day and month names. And it was fixed in CLDR34 . So I imagine
    that java versions >=9 (when they changed from own locales to CLDR) that are using those CLDR
    versionsâ€¦ are doomed (that for sure includes Java10).
    
    Alternatively, there is the following switch:
    
    -Djava.locale.providers=COMPAT, CLDR
    
    to make Java own locales to be used instead of CLDR ones.
    
    But as far as en_AU is already fixed in actual versions, we are simply
    removing those incorrect dots fom the date fetched with Jira CLI and
    done.
    
    Some links:
    
    - https://bugs.openjdk.java.net/browse/JDK-8208487

commit 2bb9dafaacb26056d4919eb0d6220114b74fde90
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Thu Aug 26 20:56:32 2021 +0200

    Always change to job installed branch
    
    That way the temporal installbranch upgradebranch branches
    can always be removed without problem

commit d1257f741236d077c06b6a23269751b1d3b4852d
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Thu Aug 26 20:20:28 2021 +0200

    Ensure completely clean worktree
    
    sometimes, after a failure, it may happen that some
    files/dirs from another branch are kept and never
    removed, causing problems on install.
    
    Both reset --hard or clean -fd ensure worktree is clean.
    
    Using the later.

commit c52a573e519a1a90fc9fb1ef265ffb7cf8889886
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Thu Aug 26 13:45:21 2021 +0200

    Always discard local changes

commit 5baab7a55bf05cee37f6a27652d3f3b2aa410633
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Thu Jul 8 10:15:43 2021 +0200

    Also exclude the componentlibrary/docs directory
    
    Because it's generated and we shouldn't consider it
    ever. No matter if grunt has been executed or no.

commit 7a6b3b430eb718f4845609df38f40aa744d85974
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Thu Jul 8 09:27:12 2021 +0200

    Let's exclude some autogenerated componentlibrary stuff
    
    Since MDL-61460, we bundle the componentlibrary in core
    and this file is autogenerated so whitespace is allowed on it.

commit e1daa98c9cac87673a06d2c5ca0756eb142bfca7
Merge: 8e7ad2f 8a3a469
Author: Eloy Lafuente <stronk7@moodle.org>
Date:   Mon May 24 14:21:14 2021 +0200

    Merge pull request #237 from sarjona/send_rebase_candidate_and_current
    
    Send rebase message to all issues waiting or in progress

commit 8a3a46939eaecd5daf37d2f53036a06a7166f26d
Author: Sara Arjona <sara@moodle.com>
Date:   Fri May 21 17:34:26 2021 +0200

    Send rebase message to all issues waiting or in progress
    
    This script will send now 2 different messages:
    
    - Issues under candidate queue, the standard message. It's the one
    that existed before under the altcomment, that has been renamed to
    altcommentcandidate.
    - Issues under current queue, the new standard message, to explain
    it will be kept under integration one more week. The standard
    message can be overridden by altcommentcurrent.

commit 8e7ad2f08469792903b0fbd312e6ad895b49d6cf
Merge: 77aee2c 1209d13
Author: Sara Arjona <sara@moodle.com>
Date:   Fri May 21 20:44:17 2021 +0200

    Merge pull request #236 from stronk7/normal_manage_queues
    
    First cut of the normal queues manager

commit 1209d13548a186a2f3a7d564f7037e8cfd362db9
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Wed May 19 23:46:53 2021 +0200

    First cut of the normal queues manager
    
    Way simpler than the continuous one, only has to:
    
    - Move "important" issues to current.
    - Keep current fed with issues when under a threshold.
    - Raise integration priority of issues awaiting too long.
    
    Also, unrelated, amend a comment in the continuous queues manager.

commit 77aee2c7b9c2f1b87b5967e77bfb9b1d470875ab
Merge: 2a4248d 79adaab
Author: Eloy Lafuente <stronk7@moodle.org>
Date:   Sun May 16 16:00:26 2021 +0200

    Merge pull request #235 from stronk7/remove_old_bits
    
    Remove very old less checker and shifter walk

commit 79adaabef607a7b2379783bd3466a1cf5a9fa1b7
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Sun May 16 11:56:54 2021 +0200

    Remove very old less checker and shifter walk
    
    They aren't used since years ago and some of the npm
    dependencies aren't available anymore.
    
    Also, amend a setup test, so we don't have to update it
    on every codechecker update.

commit 2a4248dcb7775f05bc82e087afbb29792f8a8822
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Wed May 5 18:41:52 2021 +0200

    Revert "Add some exceptions within tool/brickfield"
    
    This reverts commit 523788411e13702617e6e83528a6e33622f06ad0.
    
    With https://tracker.moodle.org/browse/MDL-71532 fixed
    we can now safely revert the exceptions that we made for
    admin/tool/brickfield stuff. Counters should be back to
    acceptable levels.

commit 523788411e13702617e6e83528a6e33622f06ad0
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Tue May 4 23:13:18 2021 +0200

    Add some exceptions within tool/brickfield
    
    All the cases are sort of test/fixture files and license. So maybe
    it's not crazy to review them and, if some can be cleaned, proceed.
    
    So https://tracker.moodle.org/browse/MDL-71532 has been created
    about that. Once fixed, surely we'll be able to remove some
    of the exceptions being added here.

commit 7a3cef3ce127ef8037765e79518661f03ae1396f
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Mon Mar 29 12:32:37 2021 +0200

    Skip one more remaining case of travis-missing warning
    
    This complements #233, where this, 3rd check escaped to our eyes.

commit 5647bb594e1e227f628ee721d5d8983e7630ef08
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Fri Mar 26 13:04:55 2021 +0100

    Allow to decide the target for the ToBiC comments (take #2)
    
    As expected, I never apply for the quotes in those shell
    scripts calling other scripts... tested in place... should work now.

commit fb769da611bd8cb7334179be95cfc234275ab12d
Merge: 24768c9 fc5ea54
Author: Jun Pataleta <jun@moodle.com>
Date:   Fri Mar 26 19:00:18 2021 +0800

    Merge pull request #234 from stronk7/select_comment_restriction
    
    Allow to decide the target for the ToBiC comments

commit fc5ea5472ee164fb1b28c96f345aba741005b0fe
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Thu Mar 25 18:30:13 2021 +0100

    Allow to decide the target for the ToBiC comments
    
    Right now, all the comments in the criteria are
    harcoded to Integrators.
    
    This change allow you to pick any other role in the project
    with blank meaning visible to all.
    
    The jobs @ ci.moodle.org has been already modified to support
    this new parameter that will be configurable when any of the
    jobs there are executed manually. By default, they continue
    restricting to Integrators, until we decide to open them.

commit 24768c9a2b41c1ae144fc94b091ebf04dd506119
Merge: 7a36c61 001e89e
Author: Eloy Lafuente <stronk7@moodle.org>
Date:   Wed Mar 24 13:32:29 2021 +0100

    Merge pull request #233 from andrewnicols/stopTravisFailingSmurf
    
    Stop requiring Travis

commit 001e89e38bd84ad99983f703643f41d988b8653f
Author: Travis CI <travis@localhost>
Date:   Tue Mar 23 11:36:53 2021 +0800

    Stop requiring Travis
    
    Most people have moved away from Travis so we should stop warning if
    it is not used.
    
    THis change modifies the Travis integration tests to mark the test as
    SKIPped if the integration is not setup. A warning is still used if
    travis-ci.org is configured but not travis-ci.com.

commit 7a36c61d2038763233d3815f124a69f420bf316c
Merge: 9a2c21e 4fb9c1c
Author: Eloy Lafuente <stronk7@moodle.org>
Date:   Mon Mar 15 18:30:51 2021 +0100

    Merge pull request #232 from stronk7/ismasteronly
    
    Reset the ismasteronly flag for every issue being checked

commit 4fb9c1cd3df59daba070f5154872a58690ee8906
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Mon Mar 15 16:47:24 2021 +0100

    Reset the ismasteronly flag for every issue being checked
    
    Today the first Moodle 4.0 only issue has landed, hence it
    has got the first master-only label.
    
    Problem is that such label was not being reset properly in the
    loop and once set... it was applied to all subsequent issues.
    
    By moving it to within the loop, we ensure it has the
    correct default (empty/false) for every issue (unless
    it's detected to be present).

commit 9a2c21eafaa9eafe77ffac0cc1de6f606a021dd8
Merge: 97c1e94 f3a9908
Author: Eloy Lafuente <stronk7@moodle.org>
Date:   Mon Mar 15 16:26:07 2021 +0100

    Merge pull request #231 from stronk7/tobic_meets_firefox
    
    Switch all ToBiC jobs to firefox (failing less right now than Chrome)

commit f3a990871824d57ccaa1af5882981ac92432a628
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Fri Mar 12 20:01:25 2021 +0100

    Switch all ToBiC jobs to firefox (failing less right now than Chrome)
    
    Mainly because of the new Chrome 89 has come with some surprises, see:
    
    https://tracker.moodle.org/browse/MDL-71108
    
    But also because lately we were getting way less failures with Firefox
    than with Chrome, we are switching all ToBiC jobs criteria to run
    with Firefox.

commit 97c1e94996ac4c40208b723b7a111128a7445d17
Merge: 9743416 36ce816
Author: Sara Arjona <sara@moodle.com>
Date:   Mon Mar 8 11:47:39 2021 +0100

    Merge pull request #230 from stronk7/verify_commits_split_lines_ok
    
    Ensure that the commits verifier split message lines properly

commit 36ce816eb29d2f4c9c407daef035c45853a25b34
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Mon Mar 8 00:52:32 2021 +0100

    Ensure that the commits verifier split message lines properly
    
    Before the patch, lines ended with backslash (\) were being
    interpreted by bash and returned like one unique line,
    
    Now, lines are returned 1 by 1 (ended with backslash) and
    verified individually (so their lengths aren't aggregated).
    
    Backed with test, to verify that the lines are handled individually.

commit 97434160fa7c9f0d80cf5f145b1c7281391e2804
Merge: d479a5c fc1341c
Author: Eloy Lafuente <stronk7@moodle.org>
Date:   Sat Feb 27 08:45:47 2021 +0100

    Merge pull request #229 from stronk7/behat-all
    
    Add a new jobtype to launch all behat tests (goutte and chrome) together

commit fc1341ce018b1169d370367be5c5e1ce2ce1974d
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Fri Feb 26 16:43:06 2021 +0100

    Bump travis and related tests to work with php73
    
    Various tests do need php73 that is the minimum requirement
    to 311_STABLE and master (4.0). So we bump travis to use it
    and also related tests, removing old branches not suporting
    that php version.
    
    Note this also includes the change from original bats to
    new bats-core fork (old was abandoned).
    
    Finally, set innodb_flush_log_at_trx_commit=0 and, also,
    move MySQL to tmpfs to get some speed gains allowing
    us to workaround random travis timeout problems (in the
    compare_databases tests mainly). We already do this in core.

commit 9f9090662683e49e4cfa5f489b49f4126b4ccbd3
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Fri Feb 26 12:46:24 2021 +0100

    Add a new jobtype to launch all behat tests (goutte and chrome) together
    
    In many situations we want to run all behat tests, keeping phpunit apart
    (specially because we run sqlsrv by default for better checking
    cross-db).
    
    This issue introduces a new behat-all job type that will behave exactly
    that way. Trivial patch.

commit d479a5c9147f58802776ce99b2cbd6bc2bb79bf1
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Fri Jan 15 00:02:16 2021 +0100

    Specify the PHP version to use via job configuration
    
    cf_branches: comma separated trios of moodle branch, id for "Pull XXXX Branch" custom field and php version.
                 Trios are colon separated, example: master:customfield_10111:7.3,....). All them required.

commit 112a965bdb0cc3111d728bf301387c0ea72c2ac2
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Wed Jan 13 21:54:00 2021 +0100

    All ToBiC jobs will now use the LOWEST PHP version for a branch

commit bfd120ead7b25ccaceff06e75958545962aa340e
Merge: 35b0b2a cf9d793
Author: Sara Arjona <sara@moodle.com>
Date:   Wed Jan 13 20:29:58 2021 +0100

    Merge pull request #228 from stronk7/accept_return_bool_hinting_xmldb_upgrade
    
    Accept return bool type hinting on upgrade functions

commit cf9d7936a17169f7f439d0871e6afb74b9cb09ef
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Wed Jan 13 17:33:33 2021 +0100

    Accept return bool type hinting on upgrade functions
    
    New xmldb_upgrade_xxxx() functions should start to come
    with return (: bool) type hinting. We need to support that.
    
    So I've added a non-capturing and optional group to the regexp matching the
    function line and then everything continues working ok. Backed with test.

commit 35b0b2a3b5f3aedff89c07107087995c49f62b4d
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Fri Nov 27 22:50:45 2020 +0100

    No critical, but better we are back to master (phpcs3 already merged)

commit a03a22fd767f3803d9d4321e8a3a8a47d8a80a09
Merge: 44c50d6 e1739be
Author: Eloy Lafuente <stronk7@moodle.org>
Date:   Tue Nov 17 23:46:19 2020 +0100

    Merge pull request #227 from stronk7/codechecker_phpcs_3_beta
    
    Bump CiBoT to local_codechecker 3.0.0beta (phpcs3)

commit e1739be362db69c5392ab51a8de0bd3c17ffcb38
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Tue Nov 17 21:48:10 2020 +0100

    Bump CiBoT to local_codechecker 3.0.0beta (phpcs3)
    
    Still not in master, we are moving to phpcs3 to get
    some good real runs so people can report problems.
    
    Once the final version is released we'll move back to master.

commit 44c50d6f86f19b480967cbbf5d7e951b4f48c67b
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Tue Nov 10 23:17:40 2020 +0100

    Now the manager also handles issues after release (on-sync)
    
    a) keeping the current queue fed (like before release).
    b) holding new features and improvements (with special on-syn message)
    
    I've ended refactoring / reorganizing everything, splitting into
    bash functions for easier reuse and future expansion.
    
    Also, add support for $dryrun env variable to allow the script to be
    executed without performing any change in the tracker.

commit a0993ac0d4e9c28a234480f9ed503609e0bac0a8
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Thu Oct 15 00:05:20 2020 +0200

    When moving issues to current, always clean integrator and tester
    
    Exactly the same than we do in normal periods with the
    move_to_current_integration job.

commit a4911752a71b80a7827a86745cf3a3cbfed1b071
Merge: 54536c4 de3541d
Author: Eloy Lafuente <stronk7@moodle.org>
Date:   Tue Oct 13 23:50:19 2020 +0200

    Merge pull request #226 from andrewnicols/eslint-relative
    
    Ensure that eslint is called relative to the moodleroot

commit de3541d361a50fc4b22e2ddab262c3a97c17f594
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Tue Oct 13 00:26:17 2020 +0200

    Add a new test to verify that eslint is always run ok
    
    No matter the CWD from where the check is invoked

commit f9799d3cd48a033ee3cbb4a8cbf560bb2f887686
Author: Andrew Nicols <andrew@nicols.co.uk>
Date:   Fri Oct 9 14:24:03 2020 +0800

    Ensure that eslint is called relative to the moodleroot
    
    ESLint searches for plugins relative to the CWD, and is unable to find
    plugins when called from outside of the moodleroot, which the plugin
    supports.

commit 54536c43b58bd9d204ae9cba664c8c1b34d8da66
Merge: 62f9b8b e21890c
Author: Andrew Nicols <andrew@nicols.co.uk>
Date:   Wed Oct 7 21:16:46 2020 +0800

    Merge pull request #225 from stronk7/add_jobtype_to_tobic
    
    New optional param (jobtype) added. Defaults to all.

commit e21890ce9a78cb6c6772e9dd4d672e1bd83209d1
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Wed Oct 7 14:39:17 2020 +0200

    New optional param (jobtype) added. Defaults to all.
    
    Can be used to select which type of job we want to run
    (different from all). Useful to sabe some worker slots
    when only some job type is failing.
    
    Current aceepted values, apart from "all" are:
    - phpunit
    - behat-app (it's commented out right now).
    - behat-chrome
    - behat-goutte

commit 62f9b8bce94b99bd21e7e33fb4c51d62f056fd15
Merge: 268d4a8 3474b17
Author: Eloy Lafuente <stronk7@moodle.org>
Date:   Thu Sep 24 17:55:37 2020 +0200

    Merge pull request #222 from stronk7/travis_com
    
    Move badges to travis-ci.com

commit 268d4a82a1c41ec68ffec1a0cb425f0f691cba06
Merge: 6353c86 61d36b2
Author: Eloy Lafuente <stronk7@moodle.org>
Date:   Thu Sep 24 17:50:37 2020 +0200

    Merge pull request #224 from stronk7/php_lint_no_vendor_please
    
    Ensure that no vendor dir is ever linted

commit 61d36b23d53b1014abea8fd2dc6925f1307b3a1e
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Thu Sep 24 14:04:02 2020 +0200

    Ensure that no vendor dir is ever lint
    
    Previously we were excluding vendor directories
    but only when "fullmode" (all files) were inspected.
    
    Now this rule also applies to "intercommit" mode (only
    files modified between 2 commits).
    
    Covered with tests, checking both 1st level and inner
    level vendor directories.

commit 6353c8671a076bcf816a290c248df2f7bd8a53e5
Merge: 07ac697 ea8b517
Author: Andrew Nicols <andrew@nicols.co.uk>
Date:   Thu Sep 24 08:02:11 2020 +0800

    Merge pull request #223 from stronk7/travis_com_check
    
    Warn about the migration to travis-ci.com when needed

commit ea8b5173c6f6e9d85669fce98ea024f36aad6cdd
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Wed Sep 23 23:50:42 2020 +0200

    Warn about the migration to travis-ci.com when needed
    
    Part of MDLSITE-6246, this adds support to travis-ci.com
    and warns when the "old" (to be stopped Dec 2020) travis-ci.org
    is detected for a repo.
    
    Covered with tests.

commit 3474b1725657f428bddb64e770d30f343605200c
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Tue Sep 22 19:01:35 2020 +0200

    Move badges to travis-ci.com

commit 07ac69779414a3838ee9e95aebbd5068938e16f8
Merge: 995fb9c 5fe19ab
Author: Eloy Lafuente <stronk7@moodle.org>
Date:   Fri Sep 11 12:55:21 2020 +0200

    Merge pull request #221 from mudrd8mz/mustachelintignore
    
    Add possibility to exclude selected Mustache files from HTML validation

commit 5fe19ab0ebf4312bbdd65ad581ba84f48d0b61e3
Author: David MudrÃ¡k <david@moodle.com>
Date:   Mon Sep 7 16:15:11 2020 +0200

    Add possibility to exclude selected Mustache files from HTML validation
    
    When developing for the Moodle Mobile App, the Mustache templates may
    contain Ionic3 / Angular specific syntax that itself is not valid HTML.
    The patch adds an option to skip the HTML validation part of the
    Mustache linting.
    
    To ignore HTML validation errors, create a file .mustachelintignore in
    the directory with Mustache templates and define the file name patterns
    for the files to be excluded from HTML validation. PHP function
    fnmatch() is used to search for matches. Lines starting with the hash
    sign are considered as comments.

commit 995fb9cc0da298d965225baf0ccf12980ab01ce2
Merge: 17b84ab cedcc3c
Author: Eloy Lafuente <stronk7@moodle.org>
Date:   Sun Aug 23 02:54:48 2020 +0200

    Merge pull request #220 from stronk7/support_multiple_dev_branches_take2
    
    Always check for all dev branches if they haven't been verified

commit cedcc3ca88354f31048b8700841af9be9ec4f12f
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Sat Aug 22 19:47:32 2020 +0200

    Always check for all dev branches if they haven't been verified
    
    If not all the dev branches have been verified while testing
    fix-versions (that's usual when there are stable fix-version
    or multiple dev branches) then we must ensure that:
    
    1) All dev branches have commits belonging to the issue.
    2) If the issue has the "master-only" label other dev branches
       different from master are exempt from the check.
    3) If the issue has the "master-only" label and other dev branches
       different from master have commits, report too.
    4) If the issue has master as fix-version then it must have the
       "master-only" label. This, indirectly, implies that the correct
       fix versions will be always the first one, in case the isse has
       been integrated to multiple dev branches.

commit 17b84abfd9839590ba20d51edf737b165bbbf700
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Wed Aug 19 23:54:08 2020 +0200

    Missing quotes and only if devbranches is not set

commit 90f5299a6bd847c2d6dc72ebab9724fcb75f253a
Merge: e106f6d ba3610e
Author: Eloy Lafuente <stronk7@moodle.org>
Date:   Wed Aug 19 19:53:03 2020 +0200

    Merge pull request #219 from stronk7/support_multiple_dev_branches_take1
    
    Support multiple dev branches and 3-digit branches

commit ba3610ea3a4b938a3a530c4686e82be29f421f8f
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Wed Aug 19 19:16:02 2020 +0200

    Support multiple dev branches and 3-digit branches
    
    This is the 1st set of changes providing:
    
    - Support for multiple dev branches (passed as param).
    - Support for 3-digit branch names (310, 400...)
    - Enforce the fix-for versions rule: "Or stable versions or one dev
    version" (2 checks).
    
    TODO:
    - Ensure that there aren't missing commits in dev branches, unless the
      "yes-only-master" label is present.
    - Ensure that the most-immediate version is used when an issue goes
      to dev branches.

commit e106f6d3ed0dc63fc157fdf123f942ae7f1180bc
Merge: ec682be 041c8f4
Author: Eloy Lafuente <stronk7@moodle.org>
Date:   Mon Aug 17 23:35:52 2020 +0200

    Merge pull request #218 from stronk7/implement_interval_check
    
    Implement the interval checker to ensure all versions are within limits

commit 041c8f458673abad35462c48b89de9e0ac75c822
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Mon Aug 17 21:54:21 2020 +0200

    Implement the interval checker to ensure all versions are within limits
    
    Tested against all branches, it seems that we have a couple of
    violations in 35_STABLE and 38_STABLE. Unlikely to cause problems
    but glad the tests detected them.
    
    We are going to enable these checks for 39_STABLE and up, using
    the following allowed version intervals:
    
    3.5: 20180514-20180517 (grrr there is a 2018061801 version!)
    3.7: 20190520
    3.8: 20191118 (grrr there is a 2020031700 version!)
    3.9: 20200615
    3.10: 20200615-20201109
    master: 20210525
    
    Will be also modifying the release process to add a point about
    keeping the intervals updated when releases happen.

commit ec682be8c3796e767ea089c14fd087d081d1dcea
Merge: 4121032 947e7a7
Author: Eloy Lafuente <stronk7@moodle.org>
Date:   Sun Aug 16 22:58:52 2020 +0200

    Merge pull request #217 from stronk7/versions_checker_parallel_dev
    
    Add support for multiple development branches.

commit 947e7a721d3ff2dd0477ad46761ea6727fc1e9cd
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Sun Aug 16 17:32:51 2020 +0200

    Add support for multiple development branches.
    
    This implements:
    - Allow 3-digit branches where needed.
    - Change some STABLE/master checks to be based on maturity.
    - Initial implementation of the "betweenversions" check (to be
      able to specify an interval of versions allowed in every branch).
    
    TODO: Complete the "betweenversions" implementation and seek and destroy
          all the related TODOs.

commit 41210320afabcf8bae5079dd5239b7ccd45cb225
Merge: 08e180d 113e837
Author: Jun Pataleta <jun@moodle.com>
Date:   Wed Jul 22 18:22:07 2020 +0800

    Merge pull request #216 from stronk7/list_of_mdls_sdev
    
    New criteria able to launch SDEV jobs for requested MDL issues

commit 113e837360dc15ee5c8988b57c8999577df76fef
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Tue Jul 21 11:03:54 2020 +0200

    New criteria able to launch SDEV jobs for requested MDL issues.
    
    The issues MUST have the code sitting into security-testing prevate
    repo.

commit 08e180d90a63f73af75de2b1684d1fd168c6d9a0
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Mon Jun 8 11:59:15 2020 +0200

    Normally, only hold new features and improvements
    
    Specifically we are leaving tasks and sub-tasks out
    from from the holding mechanishm.

commit ad4947e8cc9c2414dc0ff1fed88e8a9f7a6b2392
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Sun Jun 7 00:37:14 2020 +0200

    Implement auto-holding of bugs based on date
    
    Now, based on a new datetoholdbugs parameter the script
    will change its behavior automatically between:
    
    2a) Move issues from candidates to current (before a date).
    2b) Auto-hold issues (starting a date - usually last week)

commit a9238a254270142379405cb87b5cfa7b77791096
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Mon Jun 1 00:28:03 2020 +0200

    Disable the @app job for now, it's failing a lot, also @ CI

commit ffbd4702b2dde3c051354931e0727b7e0d62d8f4
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Sun May 31 19:11:25 2020 +0200

    Checkbox params pass "true" or "false"

commit f7dd558c47aea0dfb478dbbf7f3ceebec0fb8090
Merge: 536f980 e23b3da
Author: Eloy Lafuente <stronk7@moodle.org>
Date:   Sun May 31 18:29:55 2020 +0200

    Merge pull request #215 from stronk7/add_sqlsrv_app_tobic
    
    Add both sqlsrv phpunit and @app (experimental) jobs to ToBiC

commit e23b3dadf3bfe6f65ce3adc38c0d1394622d7986
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Sun May 31 18:01:45 2020 +0200

    Add both sqlsrv phpunit and @app (experimental) jobs to ToBiC

commit 536f98008aa8a0ce03ec29357cc39daad8f80209
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Tue May 26 19:51:38 2020 +0200

    Now cibot is able to hold non-bug issues on continuous
    
    This also prevents issues to be moved to current integration
    before they get the integration_held label.

commit 462fa83bba13a368393eaad4694c3a012337fae8
Merge: a0b105d 3252387
Author: Sara Arjona <sara@moodle.com>
Date:   Tue May 26 11:44:27 2020 +0200

    Merge pull request #214 from stronk7/continuous_manage_queues
    
    Continuous manage queues (1 of 2)

commit 325238793af9b9c4955e74a2fc7601e729865e0b
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Tue May 26 02:33:54 2020 +0200

    Continuous manage queues (2 of 2)
    
    This implements the 2nd automatism, keeping the current queue
    feed with issues from the candidates queue where there are few
    issues in the former.
    
    Both the current threshold (6) and the issues to move (3) are
    configurable. Issues are moved ordered by the usual priotities.

commit df274963f6778e9ded93434ede67829dc3c8fe79
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Tue May 26 00:51:03 2020 +0200

    Continuous manage queues (1 of 2)
    
    This script adds some automatisms helping to manage the integration queues:
     - candidates queue: issues awaiting from integration not yet in current.
     - current queue: issues under current integration.
    
    The automatisms are as follow:
     1) Move "important" issues from candidates to current.
     2) Keep the current queue fed with issues when it's under a threshold.
    
    The criteria to consider an issue "important" are:
     1) It must be in the candidates queue, awating for integration.        |
     2) It must not have the integration_held or security_held labels.      | => filter=14000
     3) It must not have the "agreed_to_be_after_release" text in a comment.| => NOT filter = 21366
     4) At least one of this is true:
       a) The issue has a must-fix version.                                 | => filter = 21363
       b) The issue has the mdlqa label.                                    | => labels IN (mdlqa)
       c) The issue priority is critical or higher.                         | => priority IN (Critical, Blocker)
       d) The issue is flagged as security issue.                           | => level IS NOT EMPTY
       e) The issue belongs to some of these components:                    | => component IN (...)
         - Privacy
         - Automated functional tests (behat)
         - Unit tests
    
    This job must be enable only since freeze until release day.
    
    Note this implements only the 1st automatism, another commit will add
    the 2nd one.

commit a0b105d2d5077ed190b952f506d03119cf874b76
Merge: bea8938 55440e3
Author: Sara Arjona <sara@moodle.com>
Date:   Tue May 12 20:10:07 2020 +0200

    Merge pull request #213 from stronk7/avoid_error_exit_js_less_patches
    
    Fix change of behavior in eslint/stylelint (exit when no files)

commit 55440e3a998cddb0cadde9e8929900de8f4b02c2
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Tue May 12 19:08:12 2020 +0200

    Fix change of behavior in eslint v6.8 and up
    
    Old eslint versions, when there weren't any JS file to inspect
    just exited silently and without error (exit status = 0).
    
    But since eslint v6.8.0, if there aren't JS files, it exits
    with error (exit status = 1). A new option,
    --no-error-on-unmatched-pattern, has been created to provide
    the BC bahavior.
    
    So we need to discern which eslint is being used. Initally I
    did it looking for --version... but it's inexact.
    
    So, surely, the safest way is to verify if the new option exists
    or no (using --help). And decide based on that.
    
    That's exactly what this patch does. I've also added a TODO
    because one everybody is already using nodejs 14 we won't need
    this hack anymore.
    
    Also, added pretty much the same for stylelint, but using the
    --allow-empty-input option.
    
    Finally note that there is another eslint use (within the mustache
    linter) that is not fixed here. It will come in a new PR because
    the fix is different (eslint is executed from within PHP).

commit bea89380c370294319a4df066501ab46c38e70f1
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Mon May 4 16:41:40 2020 +0200

    Avoid sourced script to overwite caller $mydir variable
    
    Important, this script is always run sourced from others, so it shouldn't define
    any shell variable also set/used by caller scripts. A clear example is the $mydir
    variable below, that was being set for caller script, leading to strange failures.
    
    In this case it was easy to fix, because this script doesn't use it, so getting rid
    of it was enough. But in general, avoid setting any widely used variable here.

commit 9b8341999956813cf87b1929f69136658f415c28
Merge: 5b83688 900d1e7
Author: Eloy Lafuente <stronk7@moodle.org>
Date:   Mon May 4 13:53:36 2020 +0200

    Merge pull request #212 from stronk7/always_source_nvm
    
    Always source the execution of prepare_npm_stuff

commit 900d1e775d79922800e69797f73114ac73362eef
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Mon May 4 13:31:54 2020 +0200

    Always source the execution of prepare_npm_stuff
    
    We need the selected npm and node binaries
    and paths available to caller.

commit 5b83688287d098ebdb50eb077acc662a13270aa3
Merge: 7b6c19e 34500de
Author: Eloy Lafuente <stronk7@moodle.org>
Date:   Mon May 4 12:18:11 2020 +0200

    Merge pull request #210 from stronk7/use_nvm
    
    Automatically follow .nvmrc when available

commit 34500de08cda36d1e2a357c6ee6241d7bd94c626
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Wed Apr 29 03:11:24 2020 +0200

    Add some prepare_npm_stuff.sh tests to fix the behavior

commit 7b3bee37d4f152626325f827523b8c41b41594ab
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Sun Apr 26 02:57:38 2020 +0200

    Automatically follow .nvmrc when available
    
    This enables all jobs using the script (security rebase, prechecker,
    grunt, ... to, automatically use the current node version speficied
    in the .nvmrc file.
    
    This includes:
    - installing nvm if not available ($HOME/.nvm)
    - update nvm to the latest release
    - source nvm
    - install and use the .nvmrc version
    
    Note that, once working, this renders the use of the nvm-wrapper
    jenkins extension futile, as far as it does everything the extension
    was doing previously. But better, because now we can control when
    our moodle directoy is ready and with the correct .nvmrc file.
    
    This will help to issues like MDL-66109, so whenever a node bump
    happens, it's automatically detected and handled by our scripts
    that will bump and use the new node version transparently.
    
    If there is no .nvmrc file, nvm is not sourced, installed or used.
    Assumed that somebody else has already prepared all the stuff.

commit 7b6c19e8c656394712b63b6ec4b20b165d38cee3
Merge: 85ae9a4 0253981
Author: Andrew Nicols <andrew@nicols.co.uk>
Date:   Fri Apr 24 22:23:32 2020 +0800

    Merge pull request #209 from stronk7/cibot_gherkinlink
    
    Cibot gherkinlink

commit 0253981450e77c33c81a1fece9947be4ae3c6ee0
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Mon Apr 13 13:19:03 2020 +0200

    MDLSITE-6103 local_ci: Add own gherkin-lint tests

commit e2f485cc03317f97e374d3e8d07f5eef9946a735
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Mon Apr 13 01:30:58 2020 +0200

    MDLSITE-6103 local_ci: Make CiBoT gherkin-lint aware
    
    - Add the new gherkin-lint job.
    - Fix existing tests to work with gherkin-lint added.

commit 347d9225c33dd33b3bdcdc78326fc356391037bd
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Mon Apr 13 01:08:56 2020 +0200

    Fix excluded tests that were broken recently by #206

commit 11086d6092806236e8bb8105b6a4c4c84e052e2e
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Sun Apr 12 23:54:27 2020 +0200

    MDLSITE-6103 local_ci: gherkinlint json to checkstyle
    
    Ensure that checkstyle_converter.php is able to
    properly convert from gherkinlint JSON output format
    to checkstyle.

commit 85ae9a42918d6ca17265e63e93599d717a82a129
Merge: 1558e46 396c81c
Author: Sara Arjona <sara@moodle.com>
Date:   Mon Jan 20 07:56:33 2020 +0100

    Merge pull request #206 from andrewnicols/ws_ics
    
    Ignore ics files in illegal whitespace checks

commit 396c81cd5882a6a8ab5709eab57e9f0f2fb51549
Author: Andrew Nicols <andrew@nicols.co.uk>
Date:   Tue Jan 7 09:35:10 2020 +0800

    Ignore ics files in illegal whitespace checks

commit 1558e463dfa7547e6df0303827a5d273a82d8ce2
Merge: efb3219 f002e28
Author: VÃ­ctor DÃ©niz <38071202+vmdef@users.noreply.github.com>
Date:   Fri Jan 10 20:39:54 2020 +0000

    Merge pull request #207 from stronk7/laptop
    
    Bump to php72 (new 3.9 requirement) and move dependent tests

commit f002e2872572ab223f64cc18c4ba780a71dd0769
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Wed Jan 8 20:11:42 2020 +0100

    Bump to php72 (new 3.9 requirement) and move dependent tests

commit efb32192c3b257f427ddda2746c3460dd073fc39
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Sun Dec 29 19:40:28 2019 +0100

    Add support to mariadb database to phpunit runner
    
    Also enforce utf8mb4_bin

commit 91e3c156fa1101f3f13592234515e664a5f0d2f6
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Sun Nov 24 23:18:34 2019 +0100

    Fix problems with comments having multiple quotes together
    
    They were breaking formating of file to read (split by line
    on quotes, normally)

commit b34977a98b89da0621733c7258acf0d0c166f1f6
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Mon Oct 28 12:06:16 2019 +0100

    NOBUG: Don't change priority to 1 if the issue is reopened.
    
    This makes priority to be flip-flopping all the time, causing
    updates to the issues. And, ultimately, preventing the job in
    charge of move issues out from current integration:
    
    mv_reopened_out_from_current
    
    to do its work ever.

commit 5b7917debeb31eab9b88daaf4bdb73c44ebeda34
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Wed Oct 16 11:01:22 2019 +0200

    New simple criteria, list_of_mdls
    
    enables to run DEV jobs against any arbitrary list of issue

commit 5196732ab73fdd93a2ee1a37d12f63c68f85c723
Merge: 84a8e4f 2b784de
Author: Sara Arjona <sara@moodle.com>
Date:   Mon Oct 7 08:21:03 2019 +0200

    Merge pull request #205 from stronk7/might
    
    delayed issues automated message. s/will/might :-)

commit 84a8e4fe2a7bd6ede640ca6d7a8e29cc63f450e6
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Fri Oct 4 17:03:43 2019 +0200

    Set integration priority to 0 to reopened issues
    
    This is the last point of MDLSITE-2892. With that
    the automated managing the delayed issues and
    integration priorities is done.
    
    Only manual action is, whenever a integrator decides to
    delay an issue, that they also decide about the priority.
    
    All the other uses are automated (cutoff, reopen...)

commit 2b784de5ee8955ade9710b89a7afa5849fac548f
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Thu Oct 3 22:39:14 2019 +0200

    delayed issues automated message. s/will/might :-)
    
    source: https://tracker.moodle.org/browse/MDL-61804

commit b42c2bc0ddc3bf4b38d0feb577d4fdc247314e2e
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Tue Oct 1 12:11:35 2019 +0200

    Only look for commits sice last roll
    
    Previously we were looking for matching commits at any point in the
    branch. Now we only look for commits since last roll (moodle.git)
    happened.
    
    That will help detecting issues left under current integration that
    have been already rolled, like happened with MDL-66075 for example.
    
    Also, in the case that rolling has just happened, the integrator has
    a grade period of 60 minutes to close the issues. After that time..
    any issue under current integration missing commits will, normally,
    lead to error.

commit 4afe8dd44093beaf29ecac884c74b81538980b44
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Mon Sep 30 22:24:31 2019 +0200

    Tidy the search to verify the status ON old date, not BEFORE
    
    Previously it was only returning issues that never had been
    in 'Waiting for integration review' status, keeping out
    issues thay may have been already under integration.
    
    Now we just look for issues that changed from anything in
    the past date to 'Waiting for integration review'.
    
    Note we cannot use the ideal CHANGED TO ... because there
    are a bunch of transitions that change from waiting to waiting
    and they are returned. We don't want them.
    
    For normal executions at fixed intervals (2h right now) it won't
    make much difference in practice, so all right

commit 85684e1509769f744ebf72b1ee95b7f3c22ea8b5
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Mon Sep 30 11:26:33 2019 +0200

    Add < /dev/null to prevent Jira CLI to consume all STDIN
    
    This has the undesired effect of killing any loop in caller
    code that is reading from file (while read...) and friends.
    
    Was discovered @ MDLSITE-5313. We need to keep it until
    we move from CLI to REST.

commit 870d06bf4e9bf38e7f3a5356aa53624e3eb84906
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Mon Sep 30 10:28:51 2019 +0200

    Update Jenkinc CLI (2.190.1) and minor tweaks

commit 515ffb4ba95b5182d81ed3fbb328f06f4b1aee7e
Merge: 3c8a4e7 bd6b335
Author: Eloy Lafuente <stronk7@moodle.org>
Date:   Mon Sep 30 09:19:56 2019 +0200

    Merge pull request #204 from stronk7/bulk_prelaunch_jobs
    
    Launch predefined jobs against issues returned by a query

commit bd6b335bb6ae43403231908e1b0a0593010e2bca
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Mon Sep 30 00:11:12 2019 +0200

    Launch predefined jobs against issues returned by a query
    
    This job just allows you to perform JQL queries against
    a Jira server, launching a number of defined jobs for each
    issue found and performins some post-actions for each issue.
    
    We are going to use it with a criteria named "awaiting_integration"
    so, every user that lands to integration gets some CI jobs executed
    for every branch in the issue.
    
    At Jenkins level we'll be throttling those (DEV) jobs to prevent
    this script to end using all the available workers.
    
    It's important to make the schedulemins parameter to match the
    intervals (in minutes) in the job schedule plan (cron) or some
    issues could be processed twice or skipped.
    
    Finally note that the current criteria includes a extra condition:
    
    AND participants not in (tobic)
    
    So we'll be processing an issue only once. This can be tidied/chaged
    later, but for now it's a basic protection trying to avoid an issue
    going back and forth to consume too much infrastructure resources.
    
    Also note that, for now, we have disabled the Oracle PHPUnit job, just
    to sabe some workers until we have the job controlled and decide that
    we can add more jobs to it.
    
    This job will be launched by the "TR - Bulk pre-launch DEV jobs
    (awaiting_integration)" job that has been already created and is
    waiting for this to land to perform the final configuration and
    schedule it.

commit 3c8a4e7ed8dd14732ff21070dd8baab48c87fb0b
Merge: 01678e5 0a1b47f
Author: Sara Arjona <sara@moodle.com>
Date:   Fri Sep 20 17:58:43 2019 +0200

    Merge pull request #203 from stronk7/MDLSITE-2892
    
    MDLSITE-2892 Now the delayed counter looks for comments by date

commit 0a1b47f64dac237c27ec73831581b15676f4e290
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Fri Sep 20 10:49:32 2019 +0200

    MDLSITE-2892 Now the delayed counter looks for comments by date
    
    The counter until now was not really accurate because Jira does
    not provide a way to search for comments by date.
    
    That was leading to the delayed counter, sometimes, showing some
    issues as currently delayed when the messages were old.
    
    With this change, we fetch all the comments from candidate issues
    and verify their date corresponds to the last integration cycle.
    
    Only if the delayed messages are current, they are considered.
    
    Also, the final report is improved, showing who, when and how
    many times an issue has been delayed:
    
    ````
    Cycle 13/Sep/19 closed on 2019/09/13 06:35
    
    Started new cycle on 2019/09/13 06:35
        MDL-66090, delayed on 2019-09-19 11:39 by sarjona (1 times delayed)
        MDL-65668, delayed on 2019-09-19 17:58 by stronk7 (1 times delayed)
        MDL-61804, delayed on 2019-09-19 21:09 by sarjona (1 times delayed)
        MDL-46978, delayed on 2019-09-19 12:48 by sarjona (1 times delayed)
        MDL-66645, delayed on 2019-09-19 06:00 by cibot (1 times delayed)
        MDL-66173, delayed on 2019-09-19 06:00 by cibot (5 times delayed)
        MDL-66354, delayed on 2019-09-19 06:00 by cibot (1 times delayed)
        MDL-65406, delayed on 2019-09-19 06:00 by cibot (1 times delayed)
        MDL-65017, delayed on 2019-09-19 06:00 by cibot (1 times delayed)
        MDL-63127, delayed on 2019-09-19 17:54 by stronk7 (1 times delayed)
        MDL-66075, delayed on 2019-09-19 09:54 by jaked (2 times delayed)
        MDL-66388, delayed on 2019-09-19 06:00 by cibot (1 times delayed)
        MDL-66428, delayed on 2019-09-19 17:56 by stronk7 (1 times delayed)
    Found 13 delayed issues since 2019/09/13 06:35
    ````

commit 01678e505687aca8a08a6d30b42bd9a3b1177bd0
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Fri Aug 23 17:19:47 2019 +0200

    Provide a dummy moodle_exception to fulfill needed stuff
    
    With MDL-66110 we are loading all the ddl/xmldb machinery
    to calculate quoted table names. That causes xmlize loading
    to fail because moodle_exception is not available.
    
    So this fix just provides a dummy moodle_exception in the
    job mini-bootloader avoiding to load the whole moodle boot code.

commit 99fec69d6f22cc35c557f6d1d3459bde29f68cf6
Merge: 058fd2e 28b43e8
Author: Eloy Lafuente <stronk7@moodle.org>
Date:   Sat Jul 27 10:26:45 2019 +0200

    Merge pull request #198 from kabalin/MDLSITE-5739-master
    
     MDLSITE-5739 mustache_lint: error when running on openjdk11

commit 058fd2e03bd56d000208097d3b4c0662b540b184
Merge: 763464d 4f55071
Author: Eloy Lafuente <stronk7@moodle.org>
Date:   Sat Jul 27 10:22:48 2019 +0200

    Merge pull request #200 from stronk7/update_readme
    
    Remove bogus/outdated link to tracker issue

commit 28b43e896ec3f1fca621c29ac2f41bd32f8189fa
Author: Ruslan Kabalin <ruslan.kabalin@gmail.com>
Date:   Thu Jul 25 23:36:51 2019 +0100

    travis: Run against xenial (openjdk11)

commit 4f55071eb5585541301ed9040dd6c5529043c723
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Mon Jul 22 12:39:10 2019 +0200

    Remove bogus/outdated link to tracker issue
    
    And add some basic general links about running php jobs with
    different CI/containerised alternatives.

commit 763464d0598fa2123a3629847729e88e617e17fe
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Fri Jun 14 01:53:38 2019 +0200

    Small adjustments to the new message

commit edca2a86603c8ccc25764f2dad04c08b588c15a5
Merge: 1d890c1 9acfd7d
Author: Eloy Lafuente <stronk7@moodle.org>
Date:   Thu Jun 13 22:23:27 2019 +0200

    Merge pull request #199 from ragusa87/fix-composer-name
    
    Fix deprecation: Composer don't allow uppercase in packages names

commit 9acfd7d4835991d3cb40ca8df3b583e6e521ffb3
Author: Laurent Constantin <laurent.constantin@liip.ch>
Date:   Tue Jun 11 11:10:58 2019 +0200

    Fix deprecation: Composer don't allow uppercase in packages names

commit 1d890c1389c8c68b971196947ec5dfa98ebe01f3
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Thu Jun 6 17:17:44 2019 +0200

    MDLSITE-5699 tracker: delay issues which integration has not started
    
    This will happen, automaticaly, via scheduled jobs whenever the
    weekly integration cutoff is agreed to happen.

commit 9f57bc6b873e3bec25f4c1c32bb9b8e4de428c11
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Fri May 24 17:37:51 2019 +0200

    MDLSITE-5313 make jenkins-cli stop consuming stdin
    
    In the context of a "while read..." loop, it was consuming
    all the lines silently, causing the loop to aparent that
    only the fist line was processed.
    
    Note that, for regular ssh, there is a (-n) switch that produces
    exactly the same effect. But here, it's used internally by jenkins-cli
    and there isn't any way to passthrough those switches. Or tomorrow we
    could be changing to any other connection protocol offered by Jenkins.
    
    So < /dev/null seems safe (there isn't anything more to read from stdin)
    and will continue working for any underlying stuff used within
    jenkins-cli.

commit dfefd3cfa0be6b98bcec7051094f23ba4c25c455
Author: Ruslan Kabalin <ruslan.kabalin@gmail.com>
Date:   Wed May 15 13:37:31 2019 +0100

    Add package-lock.json
    
    How to upgrade vnu-jar:
    1. Identify latest stable release at https://www.npmjs.com/package/vnu-jar
    2. Amend version at package.json
    3. Run npm upgrade
    4. Commit changes.

commit 7bc60a651c198980485e3945b095804588041340
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Thu May 9 18:11:27 2019 +0200

    Warn if stable and master fix versions are mixed in the same issue.
    
    Current policy is to only set it to stable versions unless the
    issue is master only (aka, OR stables OR master).

commit 2ae4e56d65b95fb0434daf99d69e30e7463dc49d
Author: Ruslan Kabalin <ruslan.kabalin@gmail.com>
Date:   Thu May 2 13:16:31 2019 +0100

    mustache_lint: Improve version comparison in shell script.

commit 1e7dfcd8d209d600878ab77e67aa42db37ac5862
Author: Ruslan Kabalin <ruslan.kabalin@gmail.com>
Date:   Wed May 1 21:57:05 2019 +0100

    travis: Add dummy var to destinguish distro on build status page.
    
    Also enables mysql (for Xenial needs to be explicitly specified)

commit fff179e90d99833e6f5b395f19aed9cc6d50a560
Author: Ruslan Kabalin <ruslan.kabalin@gmail.com>
Date:   Wed May 1 15:21:19 2019 +0100

    travis: Run tests on trusty and xenial

commit 847197d1b192232eedc73d80414a5a40380053be
Author: Ruslan Kabalin <ruslan.kabalin@gmail.com>
Date:   Wed May 1 15:25:56 2019 +0100

    MDLSITE-5739 mustache_lint: Fix full html page test.

commit 1f3f3e8fec82e7c4656d9d945211f5461212d3f9
Author: Ruslan Kabalin <ruslan.kabalin@gmail.com>
Date:   Wed May 1 14:45:59 2019 +0100

    MDLSITE-5739 mustache_lint: Add lang attribute to wrapper.
    
    Validator v18.11.5 complains about it (info notice), and in fact,
    having lang attribute seems a good practice these days:
    https://www.w3.org/International/questions/qa-html-language-declarations#quickanswer

commit 5ae7ee8dd87139e270f3876e67be189465244c59
Author: Ruslan Kabalin <ruslan.kabalin@gmail.com>
Date:   Wed May 1 14:39:52 2019 +0100

    MDLSITE-5739 mustache_lint: Use v.Nu validator v18.11.5

commit 9f8dc72085c5ae167bcc7f5c52cad03574f818a6
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Tue Apr 23 16:24:43 2019 +0200

    MDLSITE-5722 swap comments

commit f4507ae7d015ce11e396794ad6ef63f7d5d5610a
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Tue Apr 23 16:19:12 2019 +0200

    MDLSITE-5722 support security issues automatic testing progress

commit a46146e52c0f535d1b6d8207847b0dffee60192c
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Mon Apr 22 13:28:27 2019 +0200

    MDLSITE-5721 Prevent compare_databases log to grow and grow

commit 8409ab26d88d71c5d2acb2a31bc2390c2945297c
Merge: 80074fd b7eae99
Author: Eloy Lafuente <stronk7@stronk7.com>
Date:   Thu Apr 11 00:28:08 2019 +0200

    Merge pull request #197 from moodlehq/MDLSITE-5716-amoscript-componentname
    
    MDLSITE-5716 Fix parsing component names in the commit AMOScript

commit b7eae99d34ad3a62c6e8a4a57039a9968b9abcdb
Author: David MudrÃ¡k <david@moodle.com>
Date:   Tue Apr 9 09:43:08 2019 +0200

    MDLSITE-5716 Fix parsing component names in the commit AMOScript
    
    Components with a digit in the name (such as auth_oauth2) were not
    correctly recognised before. This has been fixed upstream in AMOS and
    the same fix is being copied over here.
    
    Extending the tests to cover both newly covered cases - valid component
    names with a digit, and invalid component name with double underscore.

commit 80074fd452a6053293f33b42402472cafa12556f
Merge: ab7c138 3d1f307
Author: Jun Pataleta <jun@moodle.com>
Date:   Thu Mar 28 09:23:02 2019 +0800

    Merge pull request #196 from stronk7/short_array_syntax
    
    MDLSITE-5697 local_ci: accept the short array syntax in dependencies

commit 3d1f307dbfef17064412fe93f9a1591b0df094ec
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Fri Mar 22 20:03:48 2019 +0100

    MDLSITE-5697 local_ci: accept the short array syntax in dependencies
    
    Backed with unit test covering 1 and multiline cases

commit ab7c138a5de703aff0c458a59ab47295a494df54
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Fri Mar 22 10:54:12 2019 +0100

    Amend fixtures for new exclusions added (take #2)
    
    Forgot to push 1 file, plus I've sorted the excluded better

commit 9c19c065cf41f2d6ed3c2a20e1b185b3c8f23ff8
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Fri Mar 22 00:50:59 2019 +0100

    Amend fixtures for new exclusions added

commit 28b54c4e0e84d1ec8dbdc1b4fbacdf31574cd1af
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Fri Mar 22 00:07:54 2019 +0100

    Exclude moodle.css generated fallbacks

commit 723dab5c408688b99f647621de5457e9241527a9
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Tue Feb 19 16:28:29 2019 +0100

    Update transtion to its recently changed name in the MDL workflow

commit 98fa7dbd03d6af497292834544fd3218fe323a2b
Merge: 6a38493 c22305b
Author: Eloy Lafuente <stronk7@stronk7.com>
Date:   Wed Jan 16 23:05:16 2019 +0100

    Merge pull request #194 from stronk7/conditional_sorting
    
    Conditional sorting

commit c22305b6d8395fa67b8b34129336322ab4055ec1
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Wed Jan 16 18:06:52 2019 +0100

    Apply for sorting in non-consistent tests.
    
    And fix fixtures to the new, consistent, sorting.

commit 887fe51be70f71f56861f27bdc60cc15e14483a6
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Wed Jan 16 16:08:30 2019 +0100

    Switch to OpenJDK JRE, more stable packages

commit 64a127d3e6b4fbce7dead4b156db4ce7aa532e24
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Wed Jan 16 12:26:34 2019 +0100

    Make sorting configurable, so we can decide which runs require them

commit 6a384934eddccd3325e703a66383f160e63fcaf1
Merge: 2e62ba3 de3bbd5
Author: Andrew Nicols <andrew@nicols.co.uk>
Date:   Wed Jan 16 13:37:37 2019 +0800

    Merge pull request #193 from stronk7/phpcs_292
    
    Bump to PHPCS 2.9.2

commit de3bbd5c52598712986db773b72592a95379fb8e
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Tue Jan 15 16:44:11 2019 +0100

    Try to enforce a consistent ordering of the results
    
    So we get predictable results, well suited to be
    compared agaisnt static (fixtures) expectations.

commit 0fe53cb955519f408b5fbd7e17789b6c571a5ddd
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Tue Jan 15 11:39:41 2019 +0100

    Bump to PHPCS 2.9.2
    
    To use https://github.com/moodlehq/moodle-local_codechecker/pull/51

commit 2e62ba31c42b8a4b23bef3cf3a39c4c835aa840a
Merge: a88ce1e 0c781b2
Author: Eloy Lafuente <stronk7@stronk7.com>
Date:   Mon Jan 14 10:07:41 2019 +0100

    Merge pull request #192 from moodlehq/laptop
    
    MDLSITE-5660 local_ci: Bumpo CiBoT phpcs to 2.7.0

commit 0c781b269eea310aca35eef420f7491d10045b70
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Sun Jan 13 23:27:03 2019 +0100

    MDLSITE-5660 local_ci: Bump CiBoT phpcs to 2.7.0
    
    Adapting tests to new requirements.

commit a88ce1ead0d369a0b8419b52e316526e0698c945
Merge: bbb06b5 420b39c
Author: Andrew Nicols <andrew@nicols.co.uk>
Date:   Thu Nov 1 09:30:06 2018 +0800

    Merge pull request #191 from stronk7/progress_automated_tested
    
    MDLSITE-5541 cibot waiting2testing and testing2passed transitions

commit 420b39c65347410abbf4d885d67ea0e7dce9474f
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Mon Oct 29 16:54:30 2018 +0100

    MDLSITE-5541 cibot waiting2testing and testing2passed transitions

commit bbb06b5c7e239cd6d99ee84ce0264095905e5a62
Merge: 8791e45 fe6cedd
Author: Eloy Lafuente <stronk7@stronk7.com>
Date:   Mon Oct 15 10:22:39 2018 +0200

    Merge pull request #190 from andrewnicols/parent_commit
    
    Improve detection of merge commits

commit fe6cedd0fa46068044091dfccac424d403aeb73d
Author: Andrew Nicols <andrew@nicols.co.uk>
Date:   Mon Oct 15 11:19:47 2018 +0800

    Improve detection of merge commits

commit 8791e459958fd3eddab0b8cf3fb9adb380bb2f18
Merge: e2f1264 3f2ffc3
Author: David MonllaÃ³ <david.monllao@gmail.com>
Date:   Thu Oct 4 10:27:25 2018 +0200

    Merge pull request #189 from stronk7/relax_elsewhere_searches_of_issue_number
    
    Relax searches of issue code elsewhere in the message

commit 3f2ffc3de97f7edb57020f76ddc6d73aed13184d
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Wed Oct 3 18:24:49 2018 +0200

    Relax searches of issue code elsewhere in the message
    
    We don't need the issue code to be followed by space
    when searching for it in the message. Only when searching
    in the 1st line.

commit e2f126400ec0845d351eba4e4759bb761f1add4e
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Fri Sep 28 01:15:16 2018 +0200

    MDLSITE-3702 tracker: use the filter because it contains all the conds

commit d9fe3c26f5fd6f8787599ca396ec036cc9de8c47
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Fri Sep 28 00:29:36 2018 +0200

    MDLSITE-3702 tracker: sending the rebase message programatically

commit a0a62a8b981e27f003e89a5bdb5a13e9a743fea3
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Thu Sep 13 16:20:45 2018 +0200

    NOBUG: Better handling of gitdir with spaces + tmpdir test fix

commit 4a399b821e4876a42e65d5e251df7854ec09f69e
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Thu Sep 13 00:11:49 2018 +0200

    MDL-63346 npm: Moving away from git pathspecs to simpler grep excludes
    
    For some reason the git pathspec excludes aren't working as expected
    when run in subshell (maybe it's some weird escaping, expansion...) and
    haven't been able to keep it working for multiple.
    
    So, switching to old known filter out of results using grep -v
    and done. It supports multiples without problm and just works.

commit e7d23687373b86f32bb18bb1eaacc5202da87e4b
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Wed Sep 12 11:21:07 2018 +0200

    MDL-63346 npm: Fix local_ci tests

commit 4acbcd92e8a2884f6ad498c7638e22ee96d940da
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Wed Sep 12 10:39:58 2018 +0200

    MDL-63346 npm: Exclude npm-shrinkwrap.json when looking for changes

commit 48eba90f51a76a8a592ed2d35d16b4754f40163e
Merge: 484d440 4f6c398
Author: Eloy Lafuente <stronk7@stronk7.com>
Date:   Mon Jun 18 22:34:40 2018 +0200

    Merge pull request #188 from timhunt/grammar-fix
    
    Fix grammar in check_upgrade_savepoints.php

commit 4f6c3987230e801c549330dbd5409da6eb82691a
Author: Tim Hunt <T.J.Hunt@open.ac.uk>
Date:   Mon Jun 18 15:19:42 2018 +0100

    And fix the related test

commit 8e9500879557877c57ff29e120ccd3738391dd85
Author: Tim Hunt <T.J.Hunt@open.ac.uk>
Date:   Mon Jun 18 14:58:38 2018 +0100

    Fix grammar in check_upgrade_savepoints.php

commit 484d44024e59737ba1de49dbd2ce5503f1bd6da6
Merge: e03db8f 9acff30
Author: Eloy Lafuente <stronk7@stronk7.com>
Date:   Mon Mar 19 12:58:20 2018 +0100

    Merge pull request #187 from andrewnicols/quote_vars
    
    NOBUG: illegal_whitespace: Quote bash vars

commit 9acff30209939879f197c4dae2de354cec49cb13
Author: Andrew Nicols <andrew@nicols.co.uk>
Date:   Fri Mar 16 12:31:23 2018 +0800

    NOBUG: illegal_whitespace: Quote bash vars
    
    This also moves the git reset onto it's own line because of issues with
    the script not exiting.

commit e03db8f7d70af611260c8a7b6aa59ab58ff7f8cf
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Fri Mar 16 19:50:05 2018 +0100

    NOBUG: Detect "Strict Standards" notices in output

commit 60f419b3c74512845f49a3a97e5c38a004468d79
Merge: 4216a00 c30ee85
Author: David MonllaÃ³ <david.monllao@gmail.com>
Date:   Wed Feb 7 13:54:16 2018 +0100

    Merge pull request #186 from stronk7/laptop
    
    NOBUG: Grunt to ignore changes caused by 3rd part libs

commit c30ee85a829ba50fd0f496ddfa9e703caa54a373
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Tue Feb 6 03:24:45 2018 +0100

    NOBUG: Grunt to ignore changes caused by 3rd part libs
    
    Some plugins can come with their own 3rd part libs (thirdpartylibs.xml).
    That leads to grunt feeding .eslintignore and .stylelintignore to
    make js & css linters to ignore those 3rd part libe.
    
    But those changes, make the grunt check to fail as far as they lead
    to change in core detected when the check is being performed for a
    non-core plugin. So we just proceed to ignore changes in those files
    when it's the case.

commit 4216a004ea3d4021e62a38dd10132963ef167564
Merge: 14a1279 080896b
Author: David MonllaÃ³ <david.monllao@gmail.com>
Date:   Wed Jan 10 03:10:41 2018 +0100

    Merge pull request #185 from stronk7/master
    
    Make local_ci self tests to pass

commit 080896b94c731309364e2196965c91234f16953a
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Tue Jan 9 19:51:38 2018 +0100

    NOBUG: unset _JAVA_OPTIONS . It breaks our stderr expectations.
    
    See travis-ci/travis-ci#8408

commit cf976102faf151416f498138d7bac37bbb6310f6
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Mon Jan 8 02:21:16 2018 +0100

    NOBUG: Tidy travis a bit, bump nodejs and configure git abbrev

commit d0051286a60994148c08ec65ae0cf7590c517b5e
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Tue Jan 9 12:33:20 2018 +0100

    NOBUG: Fix database upgrade tests. 3.5 requires 3.1

commit 5b06242b20a6a0f2e3432328f8f62c94dbcac276
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Wed Dec 20 03:04:04 2017 +0100

    NOBUG: Fix prechecker tests moving up to 34_STABLE

commit 823d250b5a064f4c6d0fb5c78e2e170612421106
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Tue Dec 19 17:25:57 2017 +0100

    NOBUG: Force all commands to provide texts in English

commit e4f2eaee205502bdd19a63adc0fb974efa2dc19a
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Tue Dec 19 17:14:49 2017 +0100

    NOBUG: Fix grunt_process tests moving up to 32_STABLE

commit 14a127966a8f5b7e5d83fe36ca2e1c8db592e4bf
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Mon Nov 20 16:21:47 2017 +0100

    NOBUG: Parametrise jenkins cli connectiviy string vs prev. harcoded one.
    
    New versions of Jenkins CLI ask you to disable old, insecure CLI
    protocols in the Jenkins server. Because of that some "magic"
    authentication that was happening (jenkins user) does not work
    anymore. So we need to be able to pass the required connectivity
    setting to newer jennkins cli, more exactly:
    
    -s http://jenkis_public_url:8080 -ssh -user clibot
    
    to specify that we want to use localhost, via jenkins-own-ssh
    and with the keys of the jenkins user "clibot" that are the keys of
    os user "jenkins" running the jira client in shell. So they work.
    
    Note that the Jenkins own ssh port must be accessible by the caller
    so using -Dorg.jenkinsci.main.modules.sshd.SSHD.hostName can be handy
    if the public Jenkins URL is behind proxy or whatever. In general all
    the local_ci uses are local, so it's ok to have:
    
    -Dorg.jenkinsci.main.modules.sshd.SSHD.hostName=localhost
    
    and ignore any other complication or need to make jenkis_public_url
    available for ssh purposes.

commit 08b604dda74ceb5e8d561804c0a040431e0c8830
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Sat Nov 18 09:47:19 2017 +0100

    NOBUG: Upgrade jira-cli to 2.90

commit 31b8c31ff0a6deb7d76fa30c6dd4195c4bd777be
Merge: 82dbb62 1b7f3a4
Author: Andrew Nicols <andrew@nicols.co.uk>
Date:   Wed Nov 1 13:37:00 2017 +0800

    Merge pull request #184 from stronk7/MDLSITE-5184
    
    Thanks Eloy. Since this has been running successfully for the past week on laptop, I'm going to merge it now.

commit 1b7f3a44d4e8c3c402b11d87775a0e1089856e24
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Sun Oct 22 23:07:34 2017 +0200

    MDLSITE-5184 tests: get rid of npm|shifter|recess bases and extrapath
    
    Also fix other problems like:
    - changes in moodle.git short sha length (from 7 to 10).

commit e2334fd651be03c3c016cc8ca451f55046459bf2
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Sun Oct 22 23:06:47 2017 +0200

    MDLSITE-5184 prechecker: get rid of npmbase and extrapath

commit 7af11ffdcb93c1d53d60cf92813256833a3a41aa
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Sun Oct 22 23:04:46 2017 +0200

    MDLSITE-5184 security autorebaser: get rid of npmbase and extrapath

commit 009d9c1f5ee84c18d01d1452f684833f19965567
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Wed Sep 6 00:13:54 2017 +0200

    MDLSITE-5184 mustache_lint: Ensure eslint uses correct .eslintrc
    
    I was getting a consistent (testing) failure with error:
    
    Failed to load plugin promise: Cannot find module 'eslint-plugin-promise'
    
    And it was incredible because the test is using MOODLE_31_STABLE branch
    and the promise plugin was not used by that branch. At the end, it seems
    that eslint somehow merges the configs passed in the call and the
    configs present in the path (down-top). As far as I was running local_ci
    within a master moodle site, the eslint "promise" plugin was added to
    the execution and failed because the 31_STABLE node_modules does not
    have it.
    
    By adding --no-eslintrc we prevent eslint to search in own path, so only
    the --config alternative is considered. That's what we want. Exactly.

commit 11483cd48bad8e6b5cf090e15bf1e2fab163bc82
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Mon Sep 4 00:37:57 2017 +0200

    MDLSITE-5184 recess & shifter: get rid of npmbase and extrapath
    
    So recessbase and shifterbase are 100% out. Now stuff is installed
    without aliasing and on each execution.

commit 148a76984eeb66bd5a11debcbf5325dc64b4a1da
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Mon Sep 4 00:21:54 2017 +0200

    MDLSITE-5184 grunt: cleanup to get rid of npmbase and extrapath
    
    Also, in order to be able to decide about the invokation of
    prepare_npm_stuff.sh, we add a new optional param, npminstall,

commit 7d8ef6cfcc87310604cc50e8c2d09219f11a9470
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Mon Sep 4 00:18:35 2017 +0200

    MDLSITE-5184 npm: don't use npmbase & aliasing anymore
    
    Now every time the script is executed, npm install from
    scratch will happen. So we get rid of npmbase and aliases
    completely.

commit 82dbb62ed5c8e67f6d29fa28dd7fb7986a7a3699
Merge: fdd1451 d1b2e2b
Author: Eloy Lafuente <stronk7@stronk7.com>
Date:   Fri Oct 20 09:30:07 2017 +0200

    Merge pull request #183 from andrewnicols/MDLSITE-5244
    
    MDLSITE-5244 rebase_security: Move prepare_npm_stuff to conflict resolution time

commit d1b2e2bd14aeb740540881b4cfe1912f38d42624
Author: Andrew Nicols <andrew@nicols.co.uk>
Date:   Fri Oct 20 12:35:34 2017 +0800

    MDLSITE-5244 rebase_security: Move prepare_npm_stuff later
    
    This needs to happen during conflict resolution, not before.
    
    Different dependency versions can exist at different commits.

commit fdd14516374e3a6e4df118df9b776cc943f77f9d
Merge: 70be60f 4d04705
Author: Eloy Lafuente <stronk7@stronk7.com>
Date:   Fri Sep 29 19:44:19 2017 +0200

    Merge pull request #181 from mrmark/dupeSavepoint
    
    Detect multiple calls to save point with same version

commit 70be60f6409136e366b826e4b807cff09151ee39
Merge: 519d403 8066b86
Author: Eloy Lafuente <stronk7@stronk7.com>
Date:   Fri Sep 29 19:37:57 2017 +0200

    Merge pull request #182 from mrmark/upgradePast
    
    Ensure a plugin does not upgrade past its defined version

commit 4d04705fcd6345fec7e71e676e918031b15fc238
Author: Mark Nielsen <mark@moodlerooms.com>
Date:   Tue Sep 26 14:00:26 2017 -0700

    Detect multiple calls to save point with same version
    
    If a save point is called with the same version, it causes
    a downgrade error.  This new check looks for duplicate
    version save point calls throughout the whole upgrade script.

commit 8066b86ef2e3d038b9aebf6eaf6e96c873c0a18a
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Fri Sep 29 01:14:48 2017 +0200

    Add tests to verify components do not upgrade past version

commit 3a55126c2bb92a30250b70f739b138acfd7cb39c
Author: Mark Nielsen <mark@moodlerooms.com>
Date:   Tue Sep 26 14:54:11 2017 -0700

    Ensure a plugin does not upgrade past its defined version

commit 519d40356373bb9d9348b5bedbfbbc424a990ac2
Author: David Monllao <david.monllao@gmail.com>
Date:   Thu Jul 20 13:07:28 2017 +0200

    MDLSITE-4710 thirdparty_check: Strict filepath match

commit edddbb45666b87be9e37723ebc877f5f44e8d45c
Author: Dan Poltawski <dan@moodle.com>
Date:   Thu Jul 20 13:05:06 2017 +0100

    MDLSITE-4710 tests: add test for requirejs.php edgecase

commit 70590f6003da0079722aee019c79b7889ea6181a
Merge: ea72c5f edf7501
Author: Dan Poltawski <talktodan@gmail.com>
Date:   Thu Jun 8 17:28:39 2017 +0100

    Merge pull request #179 from stronk7/MDLSITE-5134
    
    MDLSITE-5134 ci: moving to nvm nodejs manager

commit edf7501329d4ee6fdd56ffb6101d82725326f4bb
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Sun Jun 4 19:06:10 2017 +0200

    MDLSITE-5134 ci: npmcmd is now optional so can go out from tests

commit f9e7193f6ecd2b3b456a4101e0f5f8e501ef939c
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Sun Jun 4 12:53:14 2017 +0200

    MDLSITE-5134 ci: moving to nvm nodejs manager
    
    This does:
    - make both npmcmd and nodecmd globals optional,
      defaulting to "npm" and "node" respectively.
      (note there is MDLSITE-4728 about the final
      removal but surely we'll need to branch before
      that happens and delete other old bits like
      shifter/recess)
    - better printing the currently used npm/node versions.
    - in case grunt-cli needs to be installed explicitly (I've
      tried here with node 4, 6, 7 - npm 2, 3, 5 - and it was
      installed always), it's done with --no-save, so package
      and shrinkwrap files are not modified.
    - in prechecker, just moved the mandatory checks before
      applying defaults, to be the same than all other scripts.

commit ea72c5f7c937014c1401a833e697afb3d95af7be
Merge: 3aae9fa eb0e750
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Wed May 24 22:25:56 2017 +0200

    Merge branch 'danpoltawski-MDLSITE-5003'

commit eb0e7508a0404eac58cd20bf43f27d114366a37c
Author: Dan Poltawski <dan@moodle.com>
Date:   Mon Apr 17 16:40:10 2017 +0100

    MDLSITE-5003 Make travis use the new local java version

commit 1b22c3ce3f72ce20d63de35b798bf5e2f5827d9b
Author: Dan Poltawski <dan@moodle.com>
Date:   Tue May 16 13:01:28 2017 +0100

    MDLSITE-5003 mustache_lint: detect if java installed

commit df73e43161e6af4d7697c8ef368e56c20f89d778
Author: Dan Poltawski <dan@moodle.com>
Date:   Mon Apr 17 17:38:17 2017 +0100

    MDLSITE-5003 file verifications: add node_modules exclusion

commit 62dbc365c4a99a7c932a270e78ae6392f83b0648
Author: Dan Poltawski <dan@moodle.com>
Date:   Mon Apr 17 16:32:16 2017 +0100

    MDLSITE-5003 mustache_lint: Switch to using NPM installed validator
    
    We do a few things here:
    
    1) Add a global npm depdency for the validator. This is actually a java
    bundle, but seems like a sensible way of managing the installation..
    
    2) In mustache_lint.sh, try and use the npm-installed validator if found
    
    3) Verify we are using the local installed versions in the tests.
    
    This *should* break the travis build now, because i've not got travis to
    npm install or use java.

commit faf865d7771c18113478cb75d429da4a156cbb60
Author: Mark Nielsen <mark@moodlerooms.com>
Date:   Mon Apr 3 08:46:00 2017 -0700

    Add ability to use the VNU jar file
    
    Instead of calling the HTML validator
    for Mustache lint as a service, call
    it as a JAR file.

commit 3aae9fa76a85257a75d4c20681e9871c6b222bfb
Merge: 955dbfb 57736d7
Author: Dan Poltawski <talktodan@gmail.com>
Date:   Tue Apr 25 09:16:35 2017 +0100

    Merge pull request #177 from mrmark/patch-1
    
    Add ANY_VERSION to fix PHP Notice

commit 57736d70258e135945e9a9367d5a039a0d4d4dbe
Author: Mark Nielsen <mark@moodlerooms.com>
Date:   Mon Apr 24 11:07:03 2017 -0700

    Add ANY_VERSION to fix PHP Notice

commit 955dbfb2de1ba0f1eaec2085c4aca693c6b43141
Merge: 70b763f cd15681
Author: Eloy Lafuente (stronk7) <stronk7@stronk7.com>
Date:   Mon Apr 10 19:06:28 2017 +0200

    Merge pull request #173 from moodlehq/MDLSITE-3758
    
    MDLSITE-3758 sort out bad response to incorrect branch name

commit 70b763fd0ee66da3c058cd88efd44b28673541ce
Merge: 5914c7a e5fd0dc
Author: Dan Poltawski <talktodan@gmail.com>
Date:   Thu Apr 6 17:28:10 2017 +0100

    Merge pull request #175 from sam-moodle/checkupgradesavepoints-warning
    
    MDLSITE-5007 Fix warnings in check_upgrade_savepoints

commit e5fd0dc677cffae496cf2e29f433c84a103a7b14
Author: Sam Chaffee <sam@moodlerooms.com>
Date:   Thu Apr 6 09:49:13 2017 -0600

    MDLSITE-5007 Fix warnings in check_upgrade_savepoints

commit cd156818e8413af93c52ff755935913f82970114
Author: Dan Poltawski <dan@moodle.com>
Date:   Mon Feb 20 13:23:07 2017 -0300

    MDLSITE-3758 prechecker handle github urls

commit e2b9150363bf300479d6d720fae385248e2014e0
Author: Dan Poltawski <dan@moodle.com>
Date:   Mon Feb 20 12:51:54 2017 -0300

    MDLSITE-3758 prechecker: fail properly when fetch fails
    
    The old detection of precheck failure wasn't robust

commit 5914c7a7ff8fb201a3f15e2743ce74aaf2061ff3
Merge: 75c3635 11aed42
Author: Eloy Lafuente (stronk7) <stronk7@stronk7.com>
Date:   Wed Apr 5 22:27:38 2017 +0200

    Merge pull request #172 from moodlehq/MDLSITE-4892
    
    MDLSITE-4892 deal with spaces in passed varibles

commit 75c36359863899de3ec7bdca345129d831efe593
Author: Dan Poltawski <dan@moodle.com>
Date:   Mon Apr 3 13:34:41 2017 +0100

    NOBUG: nasty fix to deal with MDL with incorrect case

commit 11aed421a360686be799f89701a97bafcebd5c60
Author: Dan Poltawski <dan@moodle.com>
Date:   Mon Feb 20 12:41:14 2017 -0300

    MDLSITE-4892 remote_branch_checker: deal with spaces

commit d2c148cc28a5dfcf7d289e0338ac60a7a4760e90
Author: Dan Poltawski <dan@moodle.com>
Date:   Mon Feb 20 12:33:03 2017 -0300

    MDLSITE-4892 deal with spaces in passed varibles
    
    Because this comes from tracker fields, we can trim the spaces. Probably
    would be more appropiate in the remote branch checker, but its better
    covered with tests here and doesn't do any harm.
    
    I decided not to add a testcase for the 'ok with space' case to avoid
    wasting the time of a full precheck run.

commit e812f2492d7fc9276de9e2e22ffd22d4c8dd9c83
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Fri Feb 17 22:27:37 2017 +0100

    NOBUG: Ensure the local branch exists ad points to origin remote
    
    That way we can always checkout it in order to delete the
    _precheck one.

commit 3f4d4d04b540b3a164f803645606e6b1fa4eb993
Merge: 10e2269 05df6cb
Author: Eloy Lafuente (stronk7) <stronk7@stronk7.com>
Date:   Fri Feb 17 19:31:37 2017 +0100

    Merge pull request #171 from stronk7/delete_precheck_before_every_execution
    
    NOBUG: Always delete any _precheck branch from previous executions

commit 05df6cbede8bd58456749b46352dfe4c36482c10
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Fri Feb 17 18:56:12 2017 +0100

    NOBUG: Always delete any _precheck branch from previous executions
    
    We cannot delete the _precheck branches while they run because that
    will cause all the /work to be lost before being saved as artifacts.
    
    So, on every run, before performing any other git operation, we check
    if we are in a _precheck branch and, if so, proceed to checkout its
    base counterpart, checkout it and delete the _precheck branch and
    any old stuff it may have.
    
    Note this was introduced because we found some plugins having own
    .gitattributes files, playing with auto-crlf settings and causing
    next executions of the checker to fail forever. Now, we ensure
    nothing is left in the prechecker repo from previous executions.

commit 10e2269aed2dec6136de85ad3f8d01cc393db028
Merge: 0a3c50f 71a0dc5
Author: Eloy Lafuente (stronk7) <stronk7@stronk7.com>
Date:   Thu Feb 9 18:18:14 2017 +0100

    Merge pull request #170 from moodlehq/version_check_set_output
    
    NOBUG: version_check_set produce obvious output in console

commit 71a0dc59773b03c24fe99588adf9fd04ac5ac81d
Merge: f1b9bce 0a3c50f
Author: Eloy Lafuente (stronk7) <stronk7@stronk7.com>
Date:   Thu Feb 9 16:06:40 2017 +0100

    Merge branch 'master' into version_check_set_output

commit f1b9bce90e1247e8e38ff51791a9ab0783375ef6
Author: Dan Poltawski <dan@moodle.com>
Date:   Tue Feb 7 12:42:05 2017 +0000

    NOBUG: version_check_set produce obvious output in console

commit 0a3c50f8c2fde9255a72927f81d011c142c69b4d
Merge: 495392f d0f8164
Author: Dan Poltawski <talktodan@gmail.com>
Date:   Thu Feb 2 15:43:49 2017 +0000

    Merge pull request #169 from stronk7/remove_post_action
    
    NOBUG: Delete all the specified post-build tasks in a Jenkins server

commit d0f816465390287b12304f037eb5dd145fc38501
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Thu Feb 2 16:01:53 2017 +0100

    NOBUG: Delete all the specified post-build tasks in a Jenkins server
    
    We have used it to automatically delete all the jabber notification
    post-build (publishers) in our CI servers. Pretty simple.

commit 495392fb9d12e8aa4d9154fe50367fe29c1a248d
Merge: caf66d7 313d4ef
Author: Eloy Lafuente (stronk7) <stronk7@stronk7.com>
Date:   Wed Feb 1 12:19:16 2017 +0100

    Merge pull request #168 from danpoltawski/notification-adjustments
    
    Notification adjustments

commit 313d4ef37d1642657f5ae512f952e00092088310
Author: Dan Poltawski <dan@moodle.com>
Date:   Wed Feb 1 09:46:09 2017 +0000

    Notification adjustments
    
    * Don't notify on the prechecker job (this is expected to fail
      and reports to the tracker)
    * Always inform about failures on the security rebase and check
      mark as integrated jobs

commit caf66d7e22131eefcdc7e42ffe25fa703d4f3716
Merge: 772b343 8a22f3e
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Tue Jan 31 17:05:12 2017 +0100

    Merge branch 'danpoltawski-notification-plugin-groovyscript'

commit 8a22f3e6b4b17b6f8a6e01bb684ecf87badde0c6
Author: Dan Poltawski <dan@moodle.com>
Date:   Tue Jan 31 10:51:25 2017 +0000

    HQ-1428 groovy script for adding notifications to all jobs
    
    intended to be run in the script console, with some rules about how many
    log lines to send for each job which we can tweak as things evolve.
    
    (Note that I hope we won't need to use this often because we'll convert
    to use pipelines which makes things like this way better :))
    
    (Eloy: fixed tests to know about .groovy files)

commit 772b343a30f0d509abab40bf474a39b5a488650a
Merge: 620e808 aa6a8e0
Author: Dan Poltawski <talktodan@gmail.com>
Date:   Mon Jan 30 08:26:46 2017 +0000

    Merge pull request #166 from dmonllao/HQ-1460
    
    HQ-1460 Security repo branches names aligned with other repos

commit aa6a8e0e8c3fcedfd58c346a3c5d1f7ad28daf51
Author: David Monllao <david.monllao@gmail.com>
Date:   Fri Jan 27 11:42:03 2017 +0100

    HQ-1460 Security repo branches names aligned with other repos

commit 620e808bc775495c8e15266e536313b028a1f1d0
Merge: 75b3c4f bd78fbc
Author: Dan Poltawski <talktodan@gmail.com>
Date:   Thu Jan 19 21:18:46 2017 +0000

    Merge pull request #165 from stronk7/MDLSITE-4933
    
    MDLSITE-4933 ci: job for closing tested issues

commit bd78fbc5b9acaf7a672503880029f9ba1b79ff39
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Thu Jan 19 13:14:29 2017 +0100

    MDLSITE-4933 ci: job for closing tested issues
    
    Look all issues tested and transition them to closed:
      - status: closed
      - resolution: fixed
      - current in integration: empty (no)
      - integration date: YYYY-MM-DD (accepting optional date, defaults to today)
      - comment: fixed text (acepting optional alternative content)

commit 75b3c4f9d7b98770e6ee606fd362d143c8fbaf92
Merge: eb07d25 9578671
Author: Dan Poltawski <talktodan@gmail.com>
Date:   Wed Nov 30 09:18:34 2016 +0000

    Merge pull request #164 from stronk7/MDLSITE-4808
    
    MDLSITE-4808 prechecker: Inform to other jobs about checked issues

commit 9578671fbcc465a1437b1cc7978b42979c880e7b
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Fri Nov 25 17:36:36 2016 +0100

    MDLSITE-4808 prechecker: Inform to other jobs about checked issues
    
    With a new optional parameter, informtofiles, where a list of
    files can be specified. The job will write one line to each of those
    files with format:
    
    MDL-xxxxxxx  unixtime bulk_precheck_issues
    
    Just that, it's the responsibility of other jobs to read and
    process that information properly.

commit eb07d2513f273b6a179ef2b06c6565e69e4b64d0
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Thu Nov 24 19:14:36 2016 +0100

    MDLSITE-4819 tests: Better define_excluded tests
    
    Now it's easier to handle the fixtures as far as,
    instead of comparing the whole fixture, each line is
    checked to exist in results independently.
    
    I've left the default format (format-excluded-expected.txt)
    unmodified so, at least, that one contains all current results
    but checked line by line. Other formats now just have a smaller
    set being checked.

commit 93ae4ead234753b27cbe51e3a17f5c50afbaee7c
Merge: 47299ae 42410bf
Author: Eloy Lafuente (stronk7) <stronk7@stronk7.com>
Date:   Thu Nov 24 19:21:35 2016 +0100

    Merge pull request #162 from danpoltawski/bye-bye-pappa-smurf
    
    NOBUG: remove the SMURFRESULT assertion from prechecker tests

commit 42410bfb29222d3bb33d69a52a091d49ea11b6f7
Author: Dan Poltawski <dan@moodle.com>
Date:   Thu Nov 24 16:23:23 2016 +0000

    NOBUG: remove the SMURFRESULT assertion from prechecker tests
    
    The problem is that when we assert the smurf result in the console
    output we are just duplicating the assertion which is already happening
    by comparing the .xml file. But because we fail before looking at the xml
    file we don't get to see how the output differs.. which means in the
    case of random travis errors it makes it hard for us to diagnose what
    the problem is.
    
    Probably best just to remove that duplciated assertion and hopefully
    we'll be able to more easily work out whats going on in case of
    failures.

commit 47299ae875e4423587dab0c71c57e14b977825a4
Merge: 831b7a5 b88761b
Author: Dan Poltawski <dan@moodle.com>
Date:   Thu Nov 24 09:51:53 2016 +0000

    Merge branch 'avoid_slashed_gitdir' of https://github.com/stronk7/moodle-local_ci

commit 831b7a52aae958b367b2c231ab7f7e87f10c8f9b
Merge: 9351651 278d4f0
Author: Dan Poltawski <talktodan@gmail.com>
Date:   Thu Nov 24 09:49:39 2016 +0000

    Merge pull request #160 from stronk7/laptop
    
    MDLSITE-4625 take #2 : Don't show the "heading error", detailed changes are better

commit b88761b239a327958be7fd565fa89580150eafa9
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Thu Nov 24 02:37:28 2016 +0100

    NOBUG: Avoid slashed LOCAL_CI_TESTS_GITDIR, breaks various tests
    
    It already has happened twice (see #111) and it's a pain to
    realize / detect. Initially I was to going to incorporate this
    as a test to setup.bats, but now that the numbering is gone
    that test is not executed the first anymore.
    
    So instead, I just clean any trailing slash and forget.

commit 278d4f0537b252434074961eb2561aff8966c5ff
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Thu Nov 24 01:17:38 2016 +0100

    MDLSITE-4625 tests: Amend tests to stop verifying the heading message

commit 0ec96f5ac54bfc40d1e8b531455f34b3f2019bb3
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Thu Nov 24 01:16:10 2016 +0100

    MDLSITE-4625 prechecker: Avoid the heading message to be shown as error
    
    (GRUNT-CHANGES are reported with details)

commit 144c554a2771548711ad45006b6ec901aceb6204
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Thu Nov 24 01:15:03 2016 +0100

    NOBUG: Change options order so gnu find does not cry anymore

commit 9351651b584646d7dc6d2f88e758f1ff8c3a2563
Merge: 6d9edec 159466d
Author: Eloy Lafuente (stronk7) <stronk7@stronk7.com>
Date:   Wed Nov 23 19:34:10 2016 +0100

    Merge pull request #157 from moodlehq/parallel-build
    
    Attempt to parallelise the travis build

commit 159466d7fe90ef38728277948b9a99b5556aa718
Author: Dan Poltawski <dan@moodle.com>
Date:   Fri Nov 18 17:41:57 2016 +0000

    Parallelise the travis build

commit 6d9edec941893f8be2e015d57b93aae7e7eef189
Merge: f57c226 89bb980
Author: Dan Poltawski <talktodan@gmail.com>
Date:   Wed Nov 23 10:59:45 2016 +0000

    Merge pull request #159 from stronk7/laptop
    
    NOBUG: Add 2 DOS-EOL fixtures to get the test back passing

commit 89bb98052bf468a9a5b5f33039e86da9e4b32c5d
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Wed Nov 23 10:14:20 2016 +0100

    NOBUG: Add 2 DOS-EOL fixtures to get the test back passing
    
    (and amended the tests, irrespectively of MDLSITE-4819,
    locally passing now)

commit f57c22693ce5a6c5ce4d43758959516cfb4df375
Merge: f08c435 ce39db7
Author: Eloy Lafuente (stronk7) <stronk7@stronk7.com>
Date:   Tue Nov 22 19:13:21 2016 +0100

    Merge pull request #158 from danpoltawski/MDLSITE-4625
    
    MDLSITE-4625 Report grunt errors in the prechecker

commit ce39db75b39f813703fd52952e53b8edddcb40fc
Author: Dan Poltawski <dan@moodle.com>
Date:   Tue Nov 22 11:39:36 2016 +0000

    MDLSITE-4625 tests: update existing tests

commit 59c098a30c00d99cca469a4266377ac7f80ad33e
Author: Dan Poltawski <dan@moodle.com>
Date:   Mon Nov 21 11:55:41 2016 +0000

    MDLSITE-4625 tests: add test for grunt failure

commit ce7da6fc9f54a2b7140644df7875801cdb8a663a
Author: Dan Poltawski <dan@moodle.com>
Date:   Mon Nov 21 11:12:38 2016 +0000

    MDLSITE-4625 prechecker: report warnings coming from grunt output
    
    e.g. 'task failed'

commit 05f438bf2489f7e0a0484a6289643619c0aab150
Author: Dan Poltawski <dan@moodle.com>
Date:   Mon Nov 21 11:01:27 2016 +0000

    MDLSITE-4625 prechecker: report 'controlled' grunt errors
    
    Previously we were only reporting on grunt files changed in the
    prechecker.

commit f08c43571502bdcc2cbb79bde5d3fe4c74de1d57
Merge: 96dda37 065a003
Author: Eloy Lafuente (stronk7) <stronk7@stronk7.com>
Date:   Fri Nov 18 17:00:30 2016 +0100

    Merge pull request #156 from danpoltawski/travis-timeout
    
    NOBUG: set timeouts for curl request

commit 065a003f8fe2749f64885921c27435c253ed820d
Author: Dan Poltawski <dan@moodle.com>
Date:   Fri Nov 18 15:02:07 2016 +0000

    NOBUG: set timeouts for curl request
    
    Just in case it was the cause of
    https://integration.moodle.org/job/Precheck%20remote%20branch/29665/
    being stuck for 9 hours

commit 96dda37283fb99b197689703ae4e8d72d01defd2
Merge: c732641 521e6b8
Author: Dan Poltawski <talktodan@gmail.com>
Date:   Thu Nov 17 09:44:04 2016 +0000

    Merge pull request #155 from stronk7/laptop
    
    MDLSITE-4806 remove the "ci" label when issues arrive to integration

commit 521e6b86e4e43be346c2ef8122e5269be04d7059
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Wed Nov 16 19:51:04 2016 +0100

    MDLSITE-4806 remove the "ci" label when issues arrive to integration
    
    When an issue, having the ci label arrives to "waiting for integration"
    it's interesting to get the label cleaned, so the prechecker can verify
    that everything is correct against current upstream.
    
    This is specially noticeable in continuous-integration periods where
    the issues are never moved to "current integration" (monday automated
    job) so last prechecker results are really old (happened normally before
    peer-review).
    
    This job picks those issues and cleans the label, forcing an extra
    prechecker to happen. Has built in machinery to prevent the same issue
    to be cleaned too many times (in 1 hour) and other details. Should be
    safe to be executed at any time interval.

commit c732641a9ef1d74a3ef2c7583337f296e274c48e
Merge: 1fec070 c5979a2
Author: Eloy Lafuente (stronk7) <stronk7@stronk7.com>
Date:   Tue Nov 15 15:51:24 2016 +0100

    Merge pull request #149 from danpoltawski/mustache-lint-js
    
    MDLSITE-4790 mustache_lint: Lint JS in templates with eslint

commit c5979a2ce9ef40f509676d7f017fee2bd44df40d
Author: Dan Poltawski <dan@moodle.com>
Date:   Thu Nov 10 12:30:17 2016 +0000

    MDLSITE-4790 mustache_lint: make eslint less noisy
    
    Based on some internal discussions I convinced myself:
    
    1) Not to output parse errors when there is missing example context,
    because this is often caused by the missing example context, its just
    adding noise which is covered by the previous warning.
    
    2) We should make all problems warnings because again they might be
    caused by missing example context. This is the same way we treat html
    validation
    
    If we had a codebase without these missing example context problems this
    wouldn't be an issue.

commit f863874d8c66be1d06fc39af9bed83203e7c280f
Author: Dan Poltawski <dan@moodle.com>
Date:   Fri Nov 4 12:28:21 2016 +0000

    MDLSITE-4790 tests: add for eslint in mustache for prechecker

commit 5450686289129636e6790b9b3bca146e77306376
Author: Dan Poltawski <dan@moodle.com>
Date:   Fri Nov 4 12:23:31 2016 +0000

    MDLSITE-4790 tests: add tests for eslint in mustache_lint

commit 4e4e2d7f1eb82859b2da3ad5a7c14b07b024ae71
Author: Dan Poltawski <dan@moodle.com>
Date:   Thu Nov 3 16:49:26 2016 +0000

    MDLSITE-4790 mustache_lint: Report eslint parse errors specially
    
    They probably indiciate missing example context and don't deserve an
    ERROR.

commit 6c09bab839a7985fdf66b0c5a14997816ac19c9c
Author: Dan Poltawski <dan@moodle.com>
Date:   Thu Nov 3 15:50:09 2016 +0000

    MDLSITE-4790 mustache_lint: add JS linting

commit 1fec07018b17786ff2e960cc14418abf44c250f4
Merge: 84f8dbe 5e1796e
Author: Dan Poltawski <talktodan@gmail.com>
Date:   Tue Nov 15 08:12:12 2016 +0000

    Merge pull request #154 from stronk7/laptop
    
    NOBUG: Always use composer install, so .lock versions are observed

commit 5e1796ee3d1f94ea316a09603c6930735b84eaff
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Tue Nov 15 01:52:35 2016 +0100

    NOBUG: Always use composer install, so .lock versions are observed
    
    It seems that, when we added .lock files to branches (29_STABLE and
    up), we forgot about this script performing incorrect updates
    instead of install to be sticky to those .lock versions.

commit 84f8dbe97ec3c5db3ca75d2d8c365f2bbfd84de7
Merge: 2b836cd 02d46a3
Author: Eloy Lafuente (stronk7) <stronk7@stronk7.com>
Date:   Fri Nov 11 20:25:25 2016 +0100

    Merge pull request #153 from moodlehq/laptop
    
    MDLSITE-4798 misreporting about exit status when checks fail

commit 02d46a3cbc2d57f26f851647e01e2e1c115790bd
Author: Dan Poltawski <dan@moodle.com>
Date:   Fri Nov 11 15:03:56 2016 +0000

    Export LC_ALL properly to fix tests ordering.

commit a0d5a5da2367bbf0d4d4303a784b0a8d3f65a465
Author: Dan Poltawski <dan@moodle.com>
Date:   Fri Nov 11 13:31:50 2016 +0000

    MDLSITE-4798 misreporting about exit status when checks fail
    
    Regression from  b304bc063d3, I used the wrong status.

commit 2b836cdd138dde30e2c60efcf05ab529368758d4
Merge: 6036a04 5dc7b0a
Author: Eloy Lafuente (stronk7) <stronk7@stronk7.com>
Date:   Thu Nov 10 22:02:07 2016 +0100

    Merge pull request #152 from moodlehq/laptop
    
    NOBUG: filter skip-ci-version-check a better way

commit 5dc7b0a2d9f0fb83169bb5b79bcd1fc5a72bd039
Author: Dan Poltawski <dan@moodle.com>
Date:   Thu Nov 10 16:39:20 2016 +0000

    NOBUG: filter skip-ci-version-check a better way
    
    The previous method of limiting the results returned from the tracker
    meant that we would then falsely report about these commits when looking
    for unknowned commits.

commit 6036a04d343111187ff2c7450cd062889739e6f5
Merge: f74dc05 2b78020
Author: Eloy Lafuente (stronk7) <stronk7@stronk7.com>
Date:   Thu Nov 10 17:06:52 2016 +0100

    Merge pull request #151 from moodlehq/laptop
    
    NOBUG: fix orphan commits grep

commit 2b7802048bf31ac724858f510b72110c3cfcaa7d
Author: Dan Poltawski <dan@moodle.com>
Date:   Thu Nov 10 10:03:23 2016 +0000

    NOBUG: fix orphan commits grep

commit f74dc05d90d4c16917580c30a3f6d3c1a0c33fa3
Merge: 4b145ee b304bc0
Author: Eloy Lafuente (stronk7) <stronk7@stronk7.com>
Date:   Wed Nov 9 15:44:00 2016 +0100

    Merge pull request #150 from moodlehq/laptop
    
    MDLSITE-4798 bulk_prechecker: Reinstate reporting rebase warnings to tracker

commit b304bc063d3c8bb93c2957327fbc50f476db7210
Author: Dan Poltawski <dan@moodle.com>
Date:   Wed Nov 9 13:05:15 2016 +0000

    MDLSITE-4798 remote_branch_checker: report problems unconditionally
    
    Don't only report them in case of the branch failing.

commit 928b814ea8b8099f5dd6ef03d358dcb2da421fb3
Author: Dan Poltawski <dan@moodle.com>
Date:   Mon Nov 7 10:11:17 2016 +0000

    MDLSITE-4798 remote_branch_checker: Tidy up console output

commit 2f3b64ee7799a579d542d6aaa98eee053bfe343e
Author: Dan Poltawski <dan@moodle.com>
Date:   Mon Nov 7 10:00:31 2016 +0000

    MDLSITE-4798 bulk_prechecker: Reinstate reporting warnings to tracker

commit 4b145eeed91e0ed149e79fd107b002d0a84387e6
Merge: 7773e54 90bb644
Author: Eloy Lafuente (stronk7) <stronk7@stronk7.com>
Date:   Thu Nov 3 12:36:43 2016 +0100

    Merge pull request #148 from danpoltawski/MDLSITE-4788
    
    MDLSITE-4788 mustache_lint: add missing helpers

commit 90bb644e5b7a9def6bc5e775dded299398b42f5d
Author: Dan Poltawski <dan@moodle.com>
Date:   Wed Nov 2 19:12:50 2016 +0000

    MDLSITE-4788 mustache_lint: tests for quote/uniqid helpers
    
    Verifies the helpers return content and the uniqid helper returns
    the same id.

commit 3765837d927326064d4b264985490e02db157f8b
Author: Dan Poltawski <dan@moodle.com>
Date:   Wed Nov 2 16:05:44 2016 +0000

    MDLSITE-4788 mustache_lint: add missing helpers
    
    quote and uniqid - pretty much same as core implementation

commit 7773e54604529296944101c7686ea3f9870afe88
Merge: c22f058 11f20d4
Author: Eloy Lafuente (stronk7) <stronk7@stronk7.com>
Date:   Wed Nov 2 17:20:32 2016 +0100

    Merge pull request #147 from danpoltawski/MDLSITE-4787
    
    MDLSITE-4787 mustache_lint: Handle theme templates better

commit 11f20d4e1e364a88879154fb1f5badd0ba317da9
Author: Dan Poltawski <dan@moodle.com>
Date:   Wed Nov 2 12:27:36 2016 +0000

    MDLSITE-4787 mustache_lint: test for theme loading
    
    This is a bit of a weird test because we don't get the generated output, so are
    testing that the validation of the file is correct (demonstrates that
    the partial has been loaded)

commit af9d92af2fdc2872851bb815c6e9444ea418aca0
Author: Dan Poltawski <dan@moodle.com>
Date:   Wed Nov 2 11:54:07 2016 +0000

    MDLSITE-4787 mustache_lint: Handle theme templates better

commit c22f058ec9b981c7d9257f3b745d124ace6e0b29
Merge: 13e923c 89a5504
Author: Eloy Lafuente (stronk7) <stronk7@stronk7.com>
Date:   Wed Nov 2 12:41:05 2016 +0100

    Merge pull request #146 from danpoltawski/mustache-full-html-body
    
    Properly detect 'full html body' templates

commit 89a5504d4f3feacf0473bad73102c9e4b4cf73f4
Author: Dan Poltawski <dan@moodle.com>
Date:   Wed Nov 2 10:45:58 2016 +0000

    NOBUG: Add test for 'full html body' page

commit a963543a31cf909c2a266153f25e4ea3a1413997
Author: Dan Poltawski <dan@moodle.com>
Date:   Wed Nov 2 10:45:38 2016 +0000

    NOBUG: Properly detect 'full html body' templates
    
    * There was a logic bug (the arguments to strpos the wrong way round!)
    * We didn't se tthe content when full body pages were found oops!

commit 13e923c1a399148cdd0287e7d5ccea85aba9c448
Merge: 0786e8b c010d78
Author: Eloy Lafuente (stronk7) <stronk7@stronk7.com>
Date:   Mon Oct 24 11:50:32 2016 +0200

    Merge pull request #145 from danpoltawski/mustache-validator-louder
    
    MDLSITE-4770 - Make html validator errors be reported to prechecker

commit c010d780c03a24b0f243c5abcd84db9b072b193f
Author: Dan Poltawski <dan@moodle.com>
Date:   Wed Oct 19 22:04:00 2016 +0100

    MDLSITE-4770 - Make html validator errors be reported to prechecker

commit 0786e8b5c1d53a8c6b59cbd81393db1407da1327
Merge: 70fdd2b ae3c285
Author: Eloy Lafuente (stronk7) <stronk7@stronk7.com>
Date:   Wed Oct 19 13:09:21 2016 +0200

    Merge pull request #144 from danpoltawski/partials-loader
    
    MDLSITE-4770 mustache_lint: load partials

commit ae3c2851ab0a61013103648e52fa7e1c9ed331a5
Author: Dan Poltawski <dan@moodle.com>
Date:   Fri Oct 14 12:08:10 2016 +0100

    MDLSITE-4770 mustache_lint: Load paritials
    
    Do a simple core_component based loader

commit 134898e3d9422c5730f46a86e3760e3631c8fdab
Author: Dan Poltawski <dan@moodle.com>
Date:   Fri Oct 14 10:51:55 2016 +0100

    MDLSITE-4770 Move core_component loading to shared lib
    
    To allow the mustache helper to use the same logic.

commit 583926034e4d02e19a5e08bd4873fe5532fb6baa
Author: Dan Poltawski <dan@moodle.com>
Date:   Fri Oct 14 12:30:06 2016 +0100

    MDLSITE-4770 mustache_lint: add test for partial loading

commit 70fdd2b70866652045d482a359515d2e0e44ad0b
Merge: ddc31f5 998d152
Author: Eloy Lafuente (stronk7) <stronk7@stronk7.com>
Date:   Fri Oct 14 11:11:12 2016 +0200

    Merge pull request #141 from danpoltawski/mustache-lint
    
    MDLSITE-4770 - add mustache linter

commit 998d15288343632ba617f1a51580304ccea08cb3
Author: Dan Poltawski <dan@moodle.com>
Date:   Thu Oct 13 14:58:08 2016 +0100

    MDLSITE-4770 tests: add remote_branch_checker fixture for mustache_lint

commit 3ec40afce303c9a728cd2ba8db22e19455dc4ee1
Author: Dan Poltawski <dan@moodle.com>
Date:   Thu Oct 13 10:15:21 2016 +0100

    MDLSITE-4770 change prechecker shortname from mustachelint to mustache
    
    Shorter and nicer.

commit c7a53a2cbf5d129e1c9b31f22ded15688445f72b
Author: Dan Poltawski <dan@moodle.com>
Date:   Wed Oct 12 23:11:16 2016 +0100

    MDLSITE-4770 - improve missing template info

commit 841bd5fcb1849b14781e096eee6dc8e0a6685755
Author: Dan Poltawski <dan@moodle.com>
Date:   Wed Oct 12 22:04:53 2016 +0100

    MDLSITE-4770 add mustache checker to prechecker
    
    (And update tests)

commit b4de3c2acbe69dd6e565db126ef56c081323de31
Author: Dan Poltawski <dan@moodle.com>
Date:   Wed Oct 12 16:54:15 2016 +0100

    MDLSITE-4770 mustache_lint: added
    
    Parse the mustache files, check for missing example content, validate
    the generated html.
    
    This is not bulletproof, but it can find some interesting issues in our
    templates.

commit 26c4df649c368a32f2c5705cdfdb23fe00431224
Author: Dan Poltawski <dan@moodle.com>
Date:   Wed Oct 12 15:40:21 2016 +0100

    MDLSITE-4770 tests: fix false positives for composer
    
    Sure would be better if could use a variable to do this, but I give up
    working out how to make the shell/bats do it..

commit ddc31f52f04c9a9553f55e22a708f675b6f05e6f
Merge: d28daad c844b09
Author: Dan Poltawski <talktodan@gmail.com>
Date:   Mon Oct 10 14:50:29 2016 +0100

    Merge pull request #143 from moodlehq/laptop
    
    NOBUG: Avoid the job to modify/fetch new stuff

commit c844b093501b5b3d0708163c21641accb6a4682d
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Mon Oct 10 12:38:11 2016 +0200

    NOBUG: Avoid the job to modify/fetch new stuff
    
    Basically current git status roots the execution.
    
    Looking to those fetches added (recently!) to the database compare
    job... i think maybe I added them because of ci tests not ensuring
    everything is available in the moodle.git clone (LOCAL_CI_TESTS_GITDIR).
    I think I needed it because I was pointing to ongoing integration.git
    clone (some tests were dependent of stuff being integrated that week).
    
    I thinkI'm going to, simply, kill the fetches because it's not the job
    responsibility to ensure that. travis already does full clone and the
    git jobs in jenkins do fetch everything (or can be configured for that f
    missing).

commit d28daad0df9a489c4acc3f84d02dd4537c53442a
Merge: df35834 fddef29
Author: Andrew Nicols <andrew@nicols.co.uk>
Date:   Tue Oct 4 09:42:18 2016 +0800

    Merge pull request #140 from moodlehq/laptop
    
    MDLSITE-4767 regression: avoid prechecker deleting node_modules

commit fddef292683dc6535aac6a801fbdd388320b630a
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Tue Oct 4 02:52:12 2016 +0200

    MDLSITE-4767 regression: avoid prechecker deleting node_modules
    
    Prechecker, once has finished the tests requiring complete
    codebase, proceeds to delete all the non-patch files. That
    includes deleting ignored/excluded files.
    
    Since some hours ago we added node_modules to the list of excluded
    and that's leading to its deletion, so obviously nothing from
    node_modules is available anymore.
    
    So I just have added an exception to guarantee node_modules persists.

commit df35834ed03c3037603f00a9a0d49d48e3fe82d6
Merge: 0eea97f 843fd6e
Author: Eloy Lafuente (stronk7) <stronk7@stronk7.com>
Date:   Mon Oct 3 23:14:22 2016 +0200

    Merge pull request #139 from moodlehq/laptop
    
    NOBUG: Fix regexp variant of excluded to use proper regexp

commit 843fd6ea0d73bbc6f638a2f8452914f999c1a2fb
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Mon Oct 3 22:23:53 2016 +0200

    MDLSITE-4767: Avoid shell expansion on loop
    
    Note it was only happenning when there were matching files
    in PWD. That's the reason it was not reproducible in local envs
    but in CIs, where PWD is set to WORSPACE, a couple of .csv
    files were found (belonging to various tests).

commit a8259cb53e942efff5def53eabfa3029fdafb4fd
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Mon Oct 3 19:33:20 2016 +0200

    MDLSITE-4767: Fix associated fixtures

commit 25db61a20a5d23b7becbc8367828b7dcc73f0e7f
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Mon Oct 3 18:44:14 2016 +0200

    MDLSITE-4767: Fix regexp variant of excluded to use proper regexp
    
    Apparently it was using some sort of * shell expansion, hence not
    working always. Now * is translated to proper .* regexp.
    
    As far as now *.csv are being excluded, we don't need individual
    lib/tests/fixtures/tabfile.csv anymore.
    
    Also get rid of mega-old "search" exclude that was causing lots of
    new search stuff not to be checked.
    
    And, finally, also "node_modules" that normally CIs don't face, but
    can be a source of problems/confusion when working locally.

commit 0eea97fb03b16c979ee594e65512af7123e9c819
Merge: cc83c9d a0782c7
Author: Eloy Lafuente (stronk7) <stronk7@stronk7.com>
Date:   Mon Oct 3 16:55:10 2016 +0200

    Merge pull request #137 from danpoltawski/MDL-55421
    
    MDL-55421 switch from .eslintrc to .stylelintrc for detected whether to run grunt ignorefiles

commit a0782c7ab5c857a8227ef5b5e4d4977bfab590f1
Author: Dan Poltawski <dan@moodle.com>
Date:   Mon Oct 3 13:36:03 2016 +0100

    MDL-55421 grunt_process: detect grunt ignorefiles better
    
    Now we have an .eslintrc and .eslintignore backported, this way is not
    robust.

commit cc83c9da41e24feba1094a6d89cadddf56a16615
Merge: 88f9f81 52c2cbf
Author: Dan Poltawski <talktodan@gmail.com>
Date:   Mon Oct 3 14:57:38 2016 +0100

    Merge pull request #138 from danpoltawski/excludecsv
    
    MDLSITE-4767 Ignore CSV files in tests

commit 52c2cbfb3688d49f4626500efadd5ed1c93b1f0e
Author: Dan Poltawski <dan@moodle.com>
Date:   Mon Oct 3 13:47:51 2016 +0100

    MDLSITE-4767 update fixtures

commit 13dd476ca99946e2f6aad41bb6606412bc15882b
Author: Andrew Nicols <andrew@nicols.co.uk>
Date:   Mon Oct 3 13:12:09 2016 +0800

    MDLSITE-4767 Ignore CSV files in tests
    
    CSV files should not be tested for things like illegal whitespace.

commit 88f9f818e0287b9dfb3d08541f3036de9677e7c9
Author: Dan Poltawski <dan@moodle.com>
Date:   Mon Oct 3 14:06:12 2016 +0100

    MDLSITE-4769 temporarily skip problem test

commit e8c7f8a87e4dcec451252529d787e2278c591eb1
Merge: 069e7e8 7d3175a
Author: Dan Poltawski <talktodan@gmail.com>
Date:   Wed Aug 31 10:04:23 2016 +0100

    Merge pull request #134 from stronk7/MDLSITE-4722
    
    MDLSITE-4722 take2 - Make old branches to work

commit 7d3175acb4494633544cec7396e9412476f4f59a
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Wed Aug 31 02:20:02 2016 +0200

    MDLSITE-4722 For robutness, look always for the hash of the object
    
    That way we can create the branch and point to the object, no matter
    it's a remote branch a local branch a commit hash or a tag.
    
    Previously, depending of the repostory where operations were happening
    we may be missing some objects locally.

commit c35ac32ded9356dcb69dc556cf9a2c13c3bc9520
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Tue Aug 30 22:42:49 2016 +0200

    MDLSITE-4722 Test for verifying old branches are now working
    
    Note we only can use 30_STABLE as target because it's the only
    old branch supporting PHP 7 (and travis for local_ci does use PHP 7).

commit 1cc66863b495b1e39aff94ef8982cd0b2dd3351d
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Tue Aug 30 21:05:09 2016 +0200

    MDLSITE-4722 Old branches have different database_column_info internals
    
    Since 31_STABLE we use $data property to store all the column specs.
    Previously that was done in individual properties. This commit,
    conditionally uses the correct method to detect the properties
    to be checked.

commit 069e7e85c4cee761315e1f4a026b2500591a6826
Merge: d42a4ae 8a5f68a
Author: Dan Poltawski <talktodan@gmail.com>
Date:   Tue Aug 30 15:29:01 2016 +0100

    Merge pull request #132 from stronk7/MDLSITE-4722
    
    MDLSITE-4722 Improvements to the database compare shell script

commit 8a5f68a7a9370d186d0e4fe5c3edbfc57f5f8672
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Fri Aug 26 20:06:48 2016 +0200

    MDLSITE-4722 Diff not set and empty passwords (to allow the later)
    
    Also, Moodle does not like empty admin passwords so let's ensure
    it always get one (the installed branch abbrev hash).

commit 1c1e3ad889120f6c4f21a054fa25cfa25d0598e9
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Fri Aug 26 19:24:07 2016 +0200

    MDLSITE-4722 Enable travis to run the compare databases tests

commit faf75021d6762c14adcf51e99defa32a8e0254af
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Fri Aug 26 19:20:27 2016 +0200

    MDLSITE-4722 add compare_databases unit tests

commit d899f096cdc75ab390f6c17ed9635fc002d01eea
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Fri Aug 26 03:04:55 2016 +0200

    MDLSITE-4722 Prevent site caches to fake columns specs
    
    This is a really "race/coincidence" situation I faced while
    perfoming all the changes. For some reason the Moodle site cache
    had cached the database metadata exactly on ccee2dc (a commit that
    did introduce differences between install and commit).
    
    Later the php script, that runs using the Moodle site,  was using
    that cached information irrespectively of the real schema in the
    database.
    
    It drove me really mad till I realized the cause. Now all
    metadata operations are performed with $usecache = false
    so this won't happen again. Grrr.

commit 192b956c1f6bca2e127542ffb2f29a605520eff0
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Fri Aug 26 02:59:48 2016 +0200

    MDLSITE-4722 various improvs to the compare db shell script
    
    List of changes:
    
    - Improved handling of arguments.
    - Separate 100% from moodle_ci_site (uses gitdir instead).
    - Better git operations preventing dettached heads.
    - Added support to check upgrade from multiple origins, keeping BC.
    - Support executions without Jenkins.
    - Complete output sent to logfile.
    - Reduced output includes results.

commit d42a4aede951cb1aabf42978c00248dc84bebf82
Merge: 46c4184 27c27c1
Author: Eloy Lafuente (stronk7) <stronk7@stronk7.com>
Date:   Fri Aug 26 19:27:36 2016 +0200

    Merge pull request #129 from danpoltawski/MDLSITE-4440
    
    MDLSITE-4440 verify_commits: check amos commands

commit 46c41841318a2f87c3f21d9195942d6defb36fbe
Merge: 5c92c2c ae6bfd1
Author: Eloy Lafuente (stronk7) <stronk7@stronk7.com>
Date:   Fri Aug 26 19:25:17 2016 +0200

    Merge pull request #133 from danpoltawski/rev-parse-no-longer
    
    MDLSITE-4704 commit tests: switch to git rev-list

commit 27c27c1baf4d75b02cf1fc1ec307d66bd0d28bf7
Author: Dan Poltawski <dan@moodle.com>
Date:   Fri Aug 26 13:57:17 2016 +0100

    MDLSITE-4440 tests: test for amos commit without langfile modification

commit 222dd1b0c9864e26cd7ddf93c19847c4eb8e2ab9
Author: Dan Poltawski <dan@moodle.com>
Date:   Fri Aug 26 13:57:29 2016 +0100

    MDLSITE-4440 tests: update fixtures to change real lang files
    
    Now that we look for actual changes in lang files, the fixtures needed
    updating (and also a tiny language change)

commit 70bbc6475dd9fc0029e1877201e9988fa3b4af9b
Author: Dan Poltawski <dan@moodle.com>
Date:   Fri Aug 26 12:55:42 2016 +0100

    MDLSITE-4440 commits: error for AMOS commands without lang files modification

commit 37b59e9642692084614f7256313ea1a1312f5305
Author: Dan Poltawski <dan@moodle.com>
Date:   Fri Aug 19 14:27:14 2016 +0100

    MDLSITE-4440 tests for amos checks in remote_branch_checker

commit e745ea0211e83037d0a07a8aa598a83a00a81b71
Author: Dan Poltawski <dan@moodle.com>
Date:   Fri Aug 19 15:02:12 2016 +0100

    MDLSITE-4440 commits2checkstyle.php support info messages

commit 8225550591cbdc8c0093a752b11859c6b32fa999
Author: Dan Poltawski <dan@moodle.com>
Date:   Fri Aug 19 15:20:26 2016 +0100

    MDLSITE-4440 tests for AMOS in verify_commit_messages

commit fbda5640723d5bb7f9fa00cb238d777184bcf220
Author: Dan Poltawski <dan@moodle.com>
Date:   Fri Aug 19 10:39:26 2016 +0100

    MDLSITE-4440 verify_commits: check amos commands

commit ae6bfd19d178095c7010530bdc95b9903acda5fd
Author: Dan Poltawski <dan@moodle.com>
Date:   Fri Aug 26 12:01:37 2016 +0100

    MDLSITE-4704 prechecker: remove rev-parse --short
    
    Use the more robust --abbrev-commit

commit be1a8d012e728c5501ad957cf6355862f759bfbb
Author: Dan Poltawski <dan@moodle.com>
Date:   Fri Aug 26 11:29:18 2016 +0100

    MDLSITE-4704 commit tests: switch to git rev-list
    
    It's what we are using in the actual code.

commit 5c92c2ceb29f59fd20749c2d419f43a62e025c38
Merge: 68f87d3 86bcc57
Author: Eloy Lafuente (stronk7) <stronk7@stronk7.com>
Date:   Wed Aug 24 16:55:40 2016 +0200

    Merge pull request #130 from danpoltawski/MDLSITE-4425
    
    MDLSITE-4425 bulk_precheck: Make 'more info' link more obvious

commit 68f87d3f7030fcb82ec7add29d60854fdd1f1096
Merge: 5036f9e 41caa87
Author: Dan Poltawski <talktodan@gmail.com>
Date:   Wed Aug 24 15:47:35 2016 +0100

    Merge pull request #131 from stronk7/MDLSITE-4722
    
    MDLSITE-4722 ci: compare_databases php improvements

commit 41caa87512812be617292688bfb3469b13d45a0e
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Wed Aug 24 14:42:48 2016 +0200

    MDLSITE-4722 ci: compare_databases php improvements
    
    The PHP job was really outdated and it was not following the
    database_column_info specs properly, leading to both PHP Notices
    and innacurate differences output.
    
    This PR just introspects database_column_info via reflection to
    get the correct list of properties to compare, moving from old
    array/stdclass approach.

commit 86bcc572be7826b4626f3c59c59446927deaba1e
Author: Dan Poltawski <dan@moodle.com>
Date:   Fri Aug 19 15:53:35 2016 +0100

    MDLSITE-4425 bulk_precheck: Make 'more info' link more obvious

commit 5036f9e0b8ef1d6f0307df343645e70c266583f5
Merge: a381e4a 02439f3
Author: Dan Poltawski <talktodan@gmail.com>
Date:   Thu Aug 18 09:00:49 2016 +0100

    Merge pull request #125 from danpoltawski/stylelintignore
    
    MDL-55465 Respect .stylelintignore

commit 02439f3e58d2ea476b953e589a66ea845a5aeca4
Author: Dan Poltawski <dan@moodle.com>
Date:   Wed Aug 17 17:39:22 2016 +0100

    MDL-55465  add test for stylelint ignore

commit 189c47682a1577fa8e8f65d07df624b3aebd61f0
Author: Dan Poltawski <dan@moodle.com>
Date:   Tue Aug 9 14:36:45 2016 +0100

    MDL-55465 Respect .stylelintignore

commit a381e4af460bf3e7ea4bb245b6e6d351346b8277
Merge: 640081d 2f7f6a0
Author: Dan Poltawski <talktodan@gmail.com>
Date:   Wed Aug 17 14:31:30 2016 +0100

    Merge pull request #128 from danpoltawski/enrol-lit
    
    Define enrol_lti dir as excluded

commit 2f7f6a0102b130df27d1d558ef5e78b7bd072c69
Author: Dan Poltawski <dan@moodle.com>
Date:   Wed Aug 17 13:53:47 2016 +0100

    Add enrol_lti fixture corrections.
    
    This is not ideal..

commit a13e30c99af61fca58b97af32da0b5e9ca6530eb
Author: Dan Poltawski <dan@moodle.com>
Date:   Wed Aug 17 13:18:36 2016 +0100

    Define enrol_lti dir as excluded

commit 640081de64ac31dc6ebae0e1e22ce3b1a1b345ab
Merge: 3135a2a 803ee5d
Author: Dan Poltawski <talktodan@gmail.com>
Date:   Tue Aug 16 15:42:31 2016 +0100

    Merge pull request #127 from danpoltawski/non-code-fixture
    
    Replace unreliable fixture

commit 803ee5d6ae0dc8310187f8b8a1fe15cf74f97d6e
Author: Dan Poltawski <dan@moodle.com>
Date:   Tue Aug 16 15:07:04 2016 +0100

    Replace unreliable fixture
    
    The fixture introduced in #126 seems to have unreliable results.. which
    caused variable phpcs failures in #125 - the failures seemed unrelated
    and not part of what was being tested, so simplify that fixture to stop
    me going crazy..

commit 3135a2aab06a98d407a23ccd56805120bc15bba7
Author: Dan Poltawski <dan@moodle.com>
Date:   Fri Aug 12 15:08:16 2016 +0100

    MDLSITE-4716 Stop cibot going crazy with CIME in uppercase

commit 83eec5de833ec7a43dbcbbccabd1b6b2967030d3
Merge: 31fd665 c1b0096
Author: Dan Poltawski <talktodan@gmail.com>
Date:   Thu Aug 11 16:22:44 2016 +0100

    Merge pull request #126 from danpoltawski/stylelint-empty
    
    Ensure stylelint returns a prechecker result, even if not files to check

commit c1b00969229a91c5ee3384317b2007da452a0c62
Author: Dan Poltawski <dan@moodle.com>
Date:   Thu Aug 11 10:00:59 2016 +0100

    Properly handle stylelint exit codes
    
    This prepares us for set -e everywhere, but also means we detect when
    stylelint complains about the glob pattern not matching (when there are
    not css files to lint).
    
    We use that exit code to make an empty stylelint.xml checkstyle file - to
    be consistent with other checks.

commit 05969168ef32727244e81459374f922b62753440
Author: Dan Poltawski <dan@moodle.com>
Date:   Thu Aug 11 09:59:42 2016 +0100

    Add fixture which runs prechecker on a branch with no css changes
    
    Identifies a bug which Fred reported - where the css part of report
    isn't returned when stylelint runs.

commit 31fd665d72060096192c9c8272d941b807888768
Author: Dan Poltawski <dan@moodle.com>
Date:   Sat Aug 6 12:32:22 2016 +0100

    Fix the stderr

commit cc893ac84843eff72fb3ba3370ce9cd4607adf4f
Author: Dan Poltawski <dan@moodle.com>
Date:   Sat Aug 6 08:42:24 2016 +0100

    NOBUG: Add a few more info messages for things going on

commit 8a254f68a5f3f37ab10a20feb951f14dc97f03ca
Author: Dan Poltawski <dan@moodle.com>
Date:   Fri Aug 5 15:39:37 2016 +0100

    NOBUG: Simplify/control prechecker output
    
    Make it quieter so we can see problems occuring in the output more
    easily (and test the output)

commit fe93b8489c2cc64f50bde28fb5e4c1fafb85e4e9
Merge: 093f6a0 73c3042
Author: Eloy Lafuente (stronk7) <stronk7@stronk7.com>
Date:   Fri Aug 5 19:30:05 2016 +0200

    Merge pull request #123 from danpoltawski/stylelint
    
    Utilise stylelint in the prechecker (with tests)

commit 73c30420c26cfb45018d454d6c8b8bf89c5aef3a
Author: Dan Poltawski <dan@moodle.com>
Date:   Thu Aug 4 17:52:16 2016 +0100

    MDL-55058 tests: for stylelint in the prechecker

commit dfb65de6305d32745df74358ce6dba6087d08d38
Author: Dan Poltawski <dan@moodle.com>
Date:   Thu Aug 4 17:51:27 2016 +0100

    MDL-55058 utilise stylelint in the prechecker

commit 093f6a0eb9df0793bf82ede16e32046d3b7f546d
Merge: bd359e2 f8b47f2
Author: Eloy Lafuente (stronk7) <stronk7@stronk7.com>
Date:   Fri Aug 5 14:37:54 2016 +0200

    Merge pull request #120 from danpoltawski/test-prechecker
    
    Add tests for prechecker

commit f8b47f2176e263d318f6a014b7c57076e9990b58
Author: Dan Poltawski <dan@moodle.com>
Date:   Fri Aug 5 12:26:11 2016 +0100

    MDLSITE-4700 install phpcs with composer

commit aadb928f4af394c0fbc5c307b66227477907b1a9
Author: Dan Poltawski <dan@moodle.com>
Date:   Fri Aug 5 11:42:07 2016 +0100

    MDLSITE-4700 tests: Remove local_codechecker from tests

commit 6f7c8bdb7a4c7e8e1d0b23693ccf61edfede3bfc
Author: Dan Poltawski <dan@moodle.com>
Date:   Wed Aug 3 12:44:47 2016 +0100

    MDLSITE-4700 tests: added for remote_branch_checker
    
    * Use https://git.in.moodle.com/integration/prechecker.git branches as
      fixtures
    * Include the summary and the smurf.xml for verifying results
    * travis: use node 4 (required for eslint)

commit f5032fa51258835c62d14a0c00ae82304bba4148
Author: Dan Poltawski <dan@moodle.com>
Date:   Wed Aug 3 12:37:21 2016 +0100

    MDLSITE-4700 remote_branch_checker: testability
    
    * Remove our custom cli for phpcs and add the phar instead
    * Make the coding standard directory be an optional argument
    * Allow the branch point in time to be reset
    * Don't run local_moodlecheck in testing environment (This is not such
     an elegant solution. In future iterations we'll probably want a more
     flexible way of defining which checks run.)

commit 8234ee584b48722b52b5b702cbcce790abdb95af
Author: Dan Poltawski <dan@moodle.com>
Date:   Thu Aug 4 12:03:29 2016 +0100

    MDLSITE-4700 tests: use assert_files_same

commit bfc0b829c677d895400d65997460e95883df691c
Author: Dan Poltawski <dan@moodle.com>
Date:   Thu Aug 4 11:56:14 2016 +0100

    MDLSITE-4700 tests: add assert_files_same
    
    Utilitiy function for asserting two files contents are the same

commit bd359e270b4eb099fad7f63ac4c52d4290122e39
Merge: 5cb0c6c 8acc85f
Author: Eloy Lafuente (stronk7) <stronk7@stronk7.com>
Date:   Thu Aug 4 00:26:45 2016 +0200

    Merge pull request #122 from danpoltawski/state-preservation-improvements
    
    NOBUG: Clean up the code for storing $WORKSPACE between tests

commit 8acc85fa04b67b6ee434545898a0edbe7cf5d56f
Author: Dan Poltawski <dan@moodle.com>
Date:   Wed Aug 3 19:45:39 2016 +0100

    NOBUG: Clean up the code for storing $WORKSPACE between tests
    
    * Centralise the code and add tests
    * Don't store it in the cache directory - store it in a tmp directory
      which only persists per file/run
    * Add helpers for determining when in the first or last test

commit 5cb0c6c4bf21998168c0353f6655dc5077d2c783
Merge: d67b14a ba547ee
Author: Eloy Lafuente (stronk7) <stronk7@stronk7.com>
Date:   Wed Aug 3 19:17:08 2016 +0200

    Merge pull request #121 from danpoltawski/clean-workspace-fix
    
    NOBUG: Make sure clean_worspace_directory removes .files

commit ba547eefc62379b1352683456cbb2e768dbdeb59
Author: Dan Poltawski <dan@moodle.com>
Date:   Wed Aug 3 17:56:24 2016 +0100

    NOBUG: Make sure clean_worspace_directory removes .files
    
    My original implementation of this was to prevent accidents with unset
    variables causing an rm -rf /.
    
    But I don't see a neat way to do that..

commit d67b14a34363994e64d16fefbca7518241253f01
Merge: 0eaa10b dce4bf5
Author: Eloy Lafuente (stronk7) <stronk7@stronk7.com>
Date:   Wed Aug 3 12:58:33 2016 +0200

    Merge pull request #119 from danpoltawski/prechecker-prep
    
    Preparation for prechecker testability

commit dce4bf5e557c269ded30a0c11919d069c91b6a51
Author: Dan Poltawski <dan@moodle.com>
Date:   Wed Aug 3 10:45:27 2016 +0100

    MDLSITE-4700 prechecker: change $baserepository to $baseref
    
    This variable is now used to track the repository we are merging
    against, so it can be (e.g. for master):
    
    * origin/master - normally
    * integration/master - in the case of a branch based on integration
    
    or, for in future commit -for testing purposes, something like:
    
    * sha-hash / tag

commit fdf3b528d85d9ac3b6d57d07a688358fdc9bd4ba
Author: Dan Poltawski <dan@moodle.com>
Date:   Tue Aug 2 16:16:20 2016 +0100

    MDLSITE-4700 prechecker: Simplify prechecker a bit
    
    Don't create a local (e.g.) 'master' branch, only the master_precheck
    branch is needed locally so don't do work to create the 'master' one.
    
    We can also use git checkout -B to simplify (as used in security checker).
    
    This is to prepare for testability..

commit 0eaa10bc1f5b5be515900a0dc50ebb518f4b78c6
Merge: bf6f62a 8dcae74
Author: Dan Poltawski <talktodan@gmail.com>
Date:   Mon Aug 1 05:55:48 2016 +0100

    Merge pull request #117 from stronk7/verify_permissions
    
    NOBUG: Continuously verify perms are ok

commit 8dcae7452f2a2b6a0140d512d059c314684b7ab9
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Sun Jul 31 14:35:28 2016 +0200

    NOBUG: Continuously verify perms are ok

commit bf6f62a2887084d0b278c419194620560b1a9064
Merge: 2110ab7 a1bb6c4
Author: Eloy Lafuente (stronk7) <stronk7@stronk7.com>
Date:   Sun Jul 31 12:22:34 2016 +0200

    Merge pull request #116 from danpoltawski/check_upgrade_savepoints-tests
    
    Add tests for check_upgrade_savepoints

commit 2110ab72a1fcf1cacf708313105f1d49c0188601
Merge: 1858863 c9e5be9
Author: Eloy Lafuente (stronk7) <stronk7@stronk7.com>
Date:   Sun Jul 31 12:20:22 2016 +0200

    Merge pull request #115 from danpoltawski/versions_check-set-tests
    
    Some tests for versions_check_set.sh

commit 1858863b8cabca93691abd12ae30a31446e4944c
Merge: 2931180 23fd02e
Author: Eloy Lafuente (stronk7) <stronk7@stronk7.com>
Date:   Sun Jul 31 12:16:47 2016 +0200

    Merge pull request #114 from danpoltawski/go-gnu-only
    
    Verify more GNU coreutils depenencies and reverse course with wc tolerance

commit c9e5be916860a149a3a32e512d98140780ac0b96
Merge: eae3c2b 2931180
Author: Dan Poltawski <talktodan@gmail.com>
Date:   Sat Jul 30 21:32:02 2016 +0100

    Merge branch 'master' into versions_check-set-tests

commit a1bb6c4ca9a99f366f69e2aefa61ad1f06781314
Merge: aa281c3 2931180
Author: Dan Poltawski <talktodan@gmail.com>
Date:   Sat Jul 30 21:31:54 2016 +0100

    Merge branch 'master' into check_upgrade_savepoints-tests

commit 23fd02eabb8da16405caf0890425fd725ba81124
Merge: 4899802 2931180
Author: Dan Poltawski <talktodan@gmail.com>
Date:   Sat Jul 30 21:31:45 2016 +0100

    Merge branch 'master' into go-gnu-only

commit 2931180af75d5e0b2d2bff346fc415b78d5747d9
Author: Dan Poltawski <dan@moodle.com>
Date:   Sat Jul 30 21:19:49 2016 +0100

    NOBUG: Make git am quiet
    
    (Just prevents misleading output being seen in tests failing)

commit eae3c2b7cb38603b78832e2897fdd4c5f368b9a3
Author: Dan Poltawski <dan@moodle.com>
Date:   Sat Jul 30 21:10:56 2016 +0100

    Ignore the platform-dependent output of date in test
    
    My date returns:
    invalid date â€˜20162223â€™
    
    Jenkins date returns:
    invalid date `20162223'

commit aa281c354424d4b60ba91f4d953e22a75498202f
Author: Dan Poltawski <dan@moodle.com>
Date:   Sat Jul 30 21:05:54 2016 +0100

    Add tests for check_upgrade_savepoints

commit 16fa51efc63ee346d6860d4d13972ae556aa1d3a
Author: Dan Poltawski <dan@moodle.com>
Date:   Sat Jul 30 20:27:36 2016 +0100

    Add bc to travis environment

commit a08a8902addc61d0ec16edcb546eab5468e36326
Author: Dan Poltawski <dan@moodle.com>
Date:   Sat Jul 30 19:42:43 2016 +0100

    Some tests for versions_check_set.sh
    
    Not exhasitive! There are a lot of things done by this script, more
    tests can be added.

commit 4899802710c1d7a6c7b3d730deceb005f94131cb
Author: Dan Poltawski <dan@moodle.com>
Date:   Sat Jul 30 17:04:16 2016 +0100

    Verify more GNU coreutils depenencies and reverse course with wc
    
    This reverses course (and mostly reverses) changes in
    89a64f3d214511 and b76bc6f07 to make the scripts more tolerance to
    mac/bsd wc.
    
    After I started looking at versions_check_set I found another gnu
    depdency and I think its best to make the scripts simpler and less
    portable. If there is one or two gnu dependencies, its not worth having
    tolerances for other things like wc).
    
    Also make verify_commit_messages/verify_commit_messages.sh have +x
    permission.

commit 861cf43b1a4d362fdf2a4903d7298d082d1412d6
Merge: 423a780 b76bc6f
Author: Eloy Lafuente (stronk7) <stronk7@stronk7.com>
Date:   Fri Jul 29 16:35:57 2016 +0200

    Merge pull request #113 from danpoltawski/verify_commit_messages-tests
    
    Verify commit messages tests

commit b76bc6f07a2a5448566fd44afee92faad46860f4
Author: Dan Poltawski <dan@moodle.com>
Date:   Fri Jul 29 15:03:51 2016 +0100

    NOBUG: make wc calls more portable to my stupid space-filled version

commit 7b56aa9e26f46a23abfc3772cb83e92ac1438559
Author: Dan Poltawski <dan@moodle.com>
Date:   Fri Jul 29 15:03:38 2016 +0100

    NOBUG: Add tests for verify_commit_messages

commit 423a780ab014aff1718370e27dda48730bf4c9cc
Merge: d893598 1046d49
Author: Dan Poltawski <talktodan@gmail.com>
Date:   Fri Jul 29 12:48:37 2016 +0100

    Merge pull request #112 from stronk7/no_bin_bash_anymore
    
    No bin bash anymore

commit 1046d4940f22047d549d64911da0183cdcb39e67
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Fri Jul 29 12:47:02 2016 +0200

    NOBUG: Ensure local_ci codebase does not have any /bin/bash

commit cb4fd3e9008897cfd2d6fc0fdb9f10e6f13ba353
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Fri Jul 29 12:44:53 2016 +0200

    NOBUG: Move from harcoded /bin/bash to portable env bash
    
    That way the bash used is the specified one and not the
    default one installed in the system.

commit d893598c8bfe5b9f76248d790e37055165a5589c
Merge: 422343c aceff13
Author: Dan Poltawski <talktodan@gmail.com>
Date:   Fri Jul 29 10:32:14 2016 +0100

    Merge pull request #111 from stronk7/laptop
    
    slashes, define_excluded and tests

commit aceff13d8caffcf4ebe549e3f550b0afddf99417
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Fri Jul 29 01:30:04 2016 +0200

    NOBUG: Added tests to cover all formats and the trailing slashes case
    
    Also, fix a small "tearDown" => "teardown" case (must be all lower)

commit 60d0b2cce75f8dfb4e322952542b241dc1fa2e55
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Fri Jul 29 01:28:29 2016 +0200

    NOBUG: Added new format option to get excluded results output
    
    While this is only useful right now for tests, it can be used
    to change all the no-subshell executions by normal ones requiring
    a given format.

commit 00705ef645fe633fef036fdcc44223fd85236a6e
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Thu Jul 28 17:22:07 2016 +0200

    NOBUG: Ensure gitdir does not have trailing slashes
    
    They lead to wrong list of excludes (full paths), never matching
    expected relative list.
    
    Also, ensure sort does not perform expansion ever and results
    are ascii-sorted in a portable way

commit 422343c9ee5f629e8306f6702aa0bf7c407c30b5
Merge: db90151 89a64f3
Author: Eloy Lafuente (stronk7) <stronk7@stronk7.com>
Date:   Thu Jul 28 13:17:49 2016 +0200

    Merge pull request #110 from danpoltawski/tests-to-neutral-path
    
    MDLSITE-4702: Convert tests to neutral path to prevent regression

commit 89a64f3d21451158c5b3f84d358f6f8a88b1dad0
Author: Dan Poltawski <dan@moodle.com>
Date:   Wed Jul 27 13:22:23 2016 +0100

    MDLSITE-4702 improve test naming and make wc -l more portable
    
    * The test naming is slightly misleading looking like there is a failure
      in test
    * BSD wc -l introduces some whitespace which was causing tests to fail -
      make it a bit more portable

commit f8ef90ae6a2128f77972906761777eaec6b4b611
Author: Dan Poltawski <dan@moodle.com>
Date:   Wed Jul 27 07:49:26 2016 +0100

    MDLSITE-4702: Add local helpers for doing running of scripts
    
    These helpers change the run behaviour so we no longer run the
    scripts in the same directory as the script as previously. The previous
    behaviour doesn't match the way which scripts are run with in the jenkins
    environement and can lead to errors with paths not included safely.
    
    This should hopefully prevent a repeat of db90151cae6a28

commit 8e66f8851218b4f06909f71fa0493b215a3267ba
Author: Dan Poltawski <dan@moodle.com>
Date:   Wed Jul 27 08:21:45 2016 +0100

    MDLSITE-4702: fix some mistaken get_string() uses
    
    Detected while working on improved tests. get_string() can't
    be used now we don't have moodle

commit db90151cae6a28a255ac977b5f93a14200349ee7
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Wed Jul 27 04:27:21 2016 +0200

    MDLSITE-4702: Without moodle default chdir() we need to use absolute paths
    
    With PR #109 we deleted the job dependencies on Moodle. But it seems
    we forgot to notice (in fact tests were passing) the automatic chdir()
    call present in setup.php. Without it, no xlst sheets were found and
    the job ultimatelly was failing. Simple fix does switch to full paths
    so xslt sheets will be found without problem.

commit c035da4da53e7a56640ff65105988f2b2998a0a9
Merge: 3f9a330 91ed9a5
Author: Eloy Lafuente (stronk7) <stronk7@stronk7.com>
Date:   Tue Jul 26 18:44:14 2016 +0200

    Merge pull request #109 from danpoltawski/test-remote-branch-reporter
    
    Remove Moodle dependency from remote_branch_checker/remote_branch_reporter.php

commit 91ed9a5d40f31da026ea4fbf6b17b6bfaae005f6
Author: Dan Poltawski <dan@moodle.com>
Date:   Tue Jul 26 16:30:43 2016 +0100

    NOBUG: Remove Moodle depdenency from remote_branch_reporter.php

commit d1fbcbda173909456ce687c282f85b34b411c318
Author: Dan Poltawski <dan@moodle.com>
Date:   Tue Jul 26 13:56:51 2016 +0100

    NOBUG: Add tests for remote_branch_reporter.php
    
    Using fixture generated from workspace directories found on jenkins.

commit 3f9a330e053ea4cc476b398b5e454dcaa92e5938
Merge: d538415 f3acd0b
Author: Eloy Lafuente (stronk7) <stronk7@stronk7.com>
Date:   Sun Jul 24 19:46:07 2016 +0200

    Merge pull request #107 from danpoltawski/list_valid_components-tests
    
    List valid components tests

commit d538415d0eb5b867fd07853e76e9ae2041247a5c
Merge: b2b35b7 2e6fffb
Author: Eloy Lafuente (stronk7) <stronk7@stronk7.com>
Date:   Sun Jul 24 19:26:52 2016 +0200

    Merge pull request #106 from danpoltawski/diff_extract_changes-tests
    
    Add tests to diff_extract_tests and remove Moodle depency

commit b2b35b7d3a612c1db3ac489e2e3095bde87002d9
Merge: 80d95a3 2a27f01
Author: Dan Poltawski <talktodan@gmail.com>
Date:   Fri Jul 22 07:22:02 2016 +0100

    Merge pull request #108 from stronk7/laptop
    
    NOBUG: Show the php version used for linting (plus tests)

commit 2a27f0143867c9bb7b6f7dbe2058f6fe19bca3fd
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Fri Jul 22 00:04:19 2016 +0200

    NOBUG: Show the php version used for linting (plus tests)

commit f3acd0b132dc38f75779e4f2a10756ccaf5a7445
Author: Dan Poltawski <dan@moodle.com>
Date:   Thu Jul 21 13:20:16 2016 +0100

    list_valid_components.php: use central clilib
    
    (And remove use of undefined get_string())

commit 04ca6886ea87d4bbc5e727097c769ad2c2e3bfac
Author: Dan Poltawski <dan@moodle.com>
Date:   Thu Jul 21 13:16:58 2016 +0100

    Add test for list_valid_components
    
    The <2.5 behaviour is not tested, but will likely look at removing that.

commit 2e6fffb39117f8703b097f1a2a8db430ffb48617
Author: Dan Poltawski <dan@moodle.com>
Date:   Thu Jul 21 12:05:12 2016 +0100

    Remove Moodle dependency from diff_extract_changes

commit 7ff8f901e0d2a1c5663c50b6b155bbb4f901ff68
Author: Dan Poltawski <dan@moodle.com>
Date:   Thu Jul 21 11:51:29 2016 +0100

    Add tests for diff_extract_changes

commit 80d95a31bff88a1989d2988c6b1df3f1a7d5a082
Merge: 2fbf37f cb7cc09
Author: David MonllaÃ³ <david.monllao@gmail.com>
Date:   Wed Jul 20 19:39:48 2016 +0200

    Merge pull request #105 from danpoltawski/checkstyle-tests
    
    Add tests for various checkstyle converters (and remove Moodle dependency)

commit cb7cc093ddddaf0358e5b90cad94d01d64d0bddc
Author: Dan Poltawski <dan@moodle.com>
Date:   Wed Jul 20 17:01:19 2016 +0100

    Remove Moodle install dependency on checkstyle converters
    
    Added s() to clilib for ease..
    
    It would be able to consolodate savepoints2checkstyle.php and
    commits2checkstyle.php into checkstyle_converter.php eventually, but
    they have slightly more elaborate (non-line-based) logic than the other
    ones.

commit 6df8435a7d5851ff8450a4434101d1596efde186
Author: Dan Poltawski <dan@moodle.com>
Date:   Wed Jul 20 14:21:08 2016 +0100

    Add tests for various checkstyle converters
    
    These convert from script output to checkstyle.xml file format

commit 2fbf37f7beb0eec2f878d686f9015c16cd1c7c4a
Merge: a3b619d c068dfa
Author: Eloy Lafuente (stronk7) <stronk7@stronk7.com>
Date:   Wed Jul 20 15:51:31 2016 +0200

    Merge pull request #104 from danpoltawski/MDLSITE-4695
    
    MDLSITE-4695 prechecker: add ability to push precheck branches to gitlab

commit c068dfa872589f7e07b8faff15f383bfe5f302a4
Author: Dan Poltawski <dan@moodle.com>
Date:   Wed Jul 20 13:09:49 2016 +0100

    MDLSITE-4695 prechecker: add ability to push precheck branches to gitlab

commit a3b619d30c7a9d5a48d9be0a8d3800faebbbd0c0
Author: Dan Poltawski <dan@moodle.com>
Date:   Fri Jul 15 17:31:43 2016 +0100

    Disable problematic test

commit fb82ffa2a20d2feb17017fac047a41dc899d5a81
Merge: 767c193 74fd17b
Author: Eloy Lafuente (stronk7) <stronk7@stronk7.com>
Date:   Fri Jul 15 18:05:50 2016 +0200

    Merge pull request #103 from danpoltawski/travis-without-moodle
    
    travis/check_branch_status.php: remove moodle depdency

commit 767c1937a479c81503ba8482665ece4a2a91d552
Merge: 57a1ffa c523b79
Author: Eloy Lafuente (stronk7) <stronk7@stronk7.com>
Date:   Fri Jul 15 16:51:53 2016 +0200

    Merge pull request #102 from danpoltawski/MDLSITE-4685-detect_conflicts
    
    MDLSITE-4685: fix detect_conflicts.sh and improve testing infrastructure

commit 57a1ffa43189af0a09e02b148fe86e508a148966
Merge: d7434ce 6fc655f
Author: Eloy Lafuente (stronk7) <stronk7@stronk7.com>
Date:   Fri Jul 15 16:42:49 2016 +0200

    Merge pull request #101 from danpoltawski/remove-unused-files
    
    Remove some unused scripts

commit 6fc655fde22a60403cec6cdc3fd0ce68366b2880
Author: Dan Poltawski <dan@moodle.com>
Date:   Wed Jul 13 16:27:25 2016 +0100

    Remove some unused scripts
    
    They will still be available in the git history, but by removing them we
    make it clearer what is an active script.
    
    (Partly because I wanted to get a good handle on what scripts need tests
    adding to them).

commit 74fd17b7b9013699ccb80f7b7903341a3dcea32e
Author: Dan Poltawski <dan@moodle.com>
Date:   Thu Jul 14 12:29:33 2016 +0100

    travis/check_branch_status.php: remove moodle depdency
    
    * Add bats test for script
    * Import clilib from Moodle (will be useful for various other scripts)
    * Remove moodle requirement from script

commit c523b79d14797cc4bee4d8a2b7d80e8fddfcac13
Author: Dan Poltawski <dan@moodle.com>
Date:   Thu Jul 14 10:00:54 2016 +0100

    MDLSITE-4685 tests: Introduce git_apply_fixture
    
    And modify tests to avoid repeated cd's

commit 3291b448a427a6bb7992224f5e92480a8c6f4b92
Author: Dan Poltawski <dan@moodle.com>
Date:   Thu Jul 14 09:03:14 2016 +0100

    MDLSITE-4685 detect_conflicts: respect errors which occur
    
    Practically the same commit as a13b1ecc602f..
    
    * Switch the find loop to a line based itteration rather than
      word based iteration which was causing problems with spaces
    * Ensure required variables are set before the script runs
    * Switch to set -e mode so we will fail in case of errors

commit 81862debd1e90e3dc7b37d60ee40bb720b934508
Author: Dan Poltawski <dan@moodle.com>
Date:   Thu Jul 14 08:57:19 2016 +0100

    MDLSITE-4685 tests: for detect_conflicts

commit 85644aa4bfd553b7bcfa9d0805b6ca625863b33f
Author: Dan Poltawski <dan@moodle.com>
Date:   Thu Jul 14 08:28:55 2016 +0100

    MDLSITE-4685 tests: verify some gnu tools installed

commit d7434ce1a7310aa9a8d8ab349074a1b8df2edf1e
Merge: 6c830fc a13b1ec
Author: Eloy Lafuente (stronk7) <stronk7@stronk7.com>
Date:   Thu Jul 14 02:38:28 2016 +0200

    Merge pull request #100 from danpoltawski/MDLSITE-4685
    
    MDLSITE-4685: fix problems in illegal_whitespace.sh and add tests

commit a13b1ecc602f79c96d9db847730aea96bde7ec7f
Author: Dan Poltawski <dan@moodle.com>
Date:   Wed Jul 13 19:08:43 2016 +0100

    MDLSITE-4685 illegal_whitespace: respect errors which occur
    
    * Switch the find loop to a line based itteration rather than word based
      iteration which was causing problems with spaces
    * Ensure required variables are set before the script runs
    * Switch to set -e mode so we will fail in case of errors

commit 90878c704b9fdb042aa9f18d1d3fd4906ff19ee1
Author: Dan Poltawski <dan@moodle.com>
Date:   Wed Jul 13 18:17:11 2016 +0100

    MDLSITE-4685 tests; Add test for illegal_whitespace

commit d2b000cdd164d05bc344b1a0e79e9b9039f73689
Author: Dan Poltawski <dan@moodle.com>
Date:   Wed Jul 13 18:17:17 2016 +0100

    MDLSITE-4685 tests: expose function to clean $WORKSPACE

commit 6c830fc420cec9d3bab94fb8bfe1a40286661b6f
Merge: af32548 0068869
Author: Eloy Lafuente (stronk7) <stronk7@stronk7.com>
Date:   Wed Jul 13 18:07:41 2016 +0200

    Merge pull request #92 from danpoltawski/MDLSITE-4211
    
    MDLSITE-4211 testing: add ci tests to local_ci

commit 006886992fca46be85d331e5f7a320a42d60bb2f
Author: Dan Poltawski <dan@moodle.com>
Date:   Wed Jul 13 14:44:29 2016 +0100

    MDLSITE-4211 add build button to readme

commit 206a47be27e27d8e3b7544efd5f4bac926dd0d52
Author: Dan Poltawski <dan@moodle.com>
Date:   Wed Jul 13 14:37:14 2016 +0100

    MDLSITE-4211 rename tests so slow ones come last
    
    This is a bit primative, but at least we see some action quickly.

commit 3afbeeb0aba95de38bc9132e6e2cd99652e7f82f
Author: Dan Poltawski <dan@moodle.com>
Date:   Wed Jun 15 21:56:41 2016 +0100

    MDLSITE-4211 testing: add unit tests!
    
    * grunt_process
    * less_checker
    * php_lint
    * shifter_walk
    * thirdparty_check

commit 6eab37799bac395f868a5f10c4afaf0d14bfd78b
Author: Dan Poltawski <dan@moodle.com>
Date:   Wed Jun 15 21:55:21 2016 +0100

    MDLSITE-4211 add travisfile and tests structure
    
    There are actually quit a few things i'm not a fan of from my first
    playing with bats - one was the fact there isn't a good way to get
    output from failed tests! So because of that I have also included the
    bats-assert and bats-error libraries.
    
    See https://github.com/ztombol/bats-docs for details of the assertion
    lib.

commit af3254835ed29bb1e2e18f5d9b6575f8c705068c
Merge: cc763d7 dba0d5f
Author: Eloy Lafuente (stronk7) <stronk7@stronk7.com>
Date:   Tue Jul 12 23:03:00 2016 +0200

    Merge pull request #99 from danpoltawski/MDLSITE-4678
    
    MDLSITE-4678 grunt_process: run grunt ignorefiles and detect changes

commit dba0d5fe29e84228debc869793c46bd151121c59
Author: Dan Poltawski <dan@moodle.com>
Date:   Tue Jul 12 12:13:07 2016 +0100

    MDLSITE-4678 grunt_process: run grunt ignorefiles and detect changes

commit cc763d72b8fc50ba2c746c6703e7b1ddc111815a
Merge: feac11a 4ad93a4
Author: Dan Poltawski <talktodan@gmail.com>
Date:   Mon Jul 4 11:52:10 2016 +0100

    Merge pull request #98 from dmonllao/prepare_npm_restore_dir
    
    Restore base directory

commit 4ad93a45a499adc76383d9f5419dc83b0626b542
Author: David MonllaÃ³ <david.monllao@gmail.com>
Date:   Mon Jul 4 12:47:23 2016 +0200

    Restore base directory

commit feac11aebdf9ff0c8294dd3088e231be94ba13dc
Merge: 95cbf84 a22b138
Author: Dan Poltawski <talktodan@gmail.com>
Date:   Sun Jul 3 14:11:14 2016 +0100

    Merge pull request #97 from danpoltawski/MDLSITE-4667
    
    MDLSITE-4667 move smurf.html to https friendly stylesheet

commit a22b138c3988b3336c1a72a44ac0e79d7b61805a
Author: Dan Poltawski <dan@moodle.com>
Date:   Sun Jul 3 14:02:54 2016 +0100

    MDLSITE-4667 move smurf.html to https friendly stylesheet
    
    (Also fixed some docs urls I noticed whilst greping)

commit 95cbf84cadfcf1e380cc64cb4cf1c182993ea5aa
Merge: 925c154 b1c1424
Author: Eloy Lafuente (stronk7) <stronk7@stronk7.com>
Date:   Thu Jun 30 18:31:43 2016 +0200

    Merge pull request #81 from danpoltawski/MDLSITE-4620
    
    MDLSITE-4620 detect commits which aren't in 'current integration'

commit b1c14241d082633f922edffa645d005bf65cf789
Author: Dan Poltawski <dan@moodle.com>
Date:   Thu Jun 30 17:05:39 2016 +0100

    MDLSITE-4620 ignore reverts

commit af05d15d09d67d11ab313df27cc11f68bd652b62
Author: Dan Poltawski <dan@moodle.com>
Date:   Thu Jun 30 16:36:08 2016 +0100

    MDLSITE-4620 mark as integrated: don't check some auto commits

commit aa3c88ece6977d316cb549272c6334f1b589ed13
Author: Dan Poltawski <dan@moodle.com>
Date:   Wed Jun 8 17:41:10 2016 +0100

    MDLSITE-4620 detect commits which aren't in 'current integration'
    
    At the moment I don't have a way to make this 'green' if it happens..

commit 925c15481ef7883cd2037e0b1e9c776bb01c0241
Author: Dan Poltawski <dan@moodle.com>
Date:   Tue Jun 28 09:01:27 2016 +0100

    HQ-1070 grunt: add --no-color for better formated output

commit e898e71ac1bcccd0fc0b2650bc459075c5cd627d
Merge: c6499b6 e03235e
Author: Dan Poltawski <talktodan@gmail.com>
Date:   Tue Jun 28 00:53:38 2016 -0700

    Merge pull request #94 from dmonllao/include-missing-amd-compile
    
    HQ-1070 autoresolve both amd and yui modules

commit c6499b661dd688dbf8d661f39c3e5ce3c433460a
Merge: 0e6e254 7693007
Author: Dan Poltawski <talktodan@gmail.com>
Date:   Tue Jun 28 00:15:16 2016 -0700

    Merge pull request #96 from stronk7/laptop
    
    MDLSITE-3831 Improve handling of both binary and with-whitespace files

commit e03235e4ebf113f6b1a4298c116e5d5a572bf31c
Author: David Monllao <davidm@moodle.com>
Date:   Thu Jun 23 07:01:45 2016 +0200

    HQ-1070 autoresolve both amd and yui modules

commit 769300781dfe1bb4f2fae874f212f9112a0cf6e9
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Thu Jun 23 19:24:18 2016 +0200

    MDLSITE-3831 diff extractor: Now handling binary files properly
    
    Before the patch, binary files were simply being ignored in the
    generated patchset.xml file.
    
    Also paths/files containing whitespaces were completely broken,
    now are handled and supported properly.

commit 89484ec50a4834d103f8e40d92662b6af64348c2
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Thu Jun 23 19:13:33 2016 +0200

    MDLSITE-3831 prechecker: files with spaces are removed ok if needed

commit 0e6e254ba3dd98aaa5a7fb15506ae0c78a730c66
Merge: 4813e56 2eee823
Author: Eloy Lafuente (stronk7) <stronk7@stronk7.com>
Date:   Mon Jun 20 17:30:46 2016 +0200

    Merge pull request #93 from stronk7/MDLSITE-4644
    
    MDLSITE-4644 prechecker: make eslint to run out from exit-on-error

commit 2eee8239e97b66ee42616d79ae45a404e0f780b3
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Mon Jun 20 17:16:30 2016 +0200

    MDLSITE-4644 npm installer: report both npm and node versions

commit 53b88765013ef5074ecd80667d10dcc5e2de500c
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Mon Jun 20 16:09:24 2016 +0200

    MDLSITE-4644 prechecker: make eslint to run out from exit-on-error
    
    It seems that in the last move we did put eslint under an
    exit-on-error section within the codechecker. That was leading
    to executions exiting with error when eslint detected some
    coding-style  problem.
    
    Note the fix is not the perfect fix, just a quick attempt to keep
    the things working. There are some linked issues where real
    improvements should happen:
    
    - MDLSITE-4625, about to properly inspect exit codes an output
        for every check and be able to discern correct executions
        from incorrect ones.
    - MDLSITE-4211, about to have the codechecker, and other local_ci
        stuff covered by own unit tests.

commit 4813e5683d81e88e83cef6eb8db113aa90396189
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Mon Jun 20 11:23:29 2016 +0200

    MDLSITE-4644 prechecker: disable eslint until we find and fix it

commit 0deb64b5aa56e0e3dc52ffc6373067f6960a8676
Author: Dan Poltawski <dan@moodle.com>
Date:   Thu Jun 16 20:16:45 2016 +0100

    MDL-52127 eslint: don't run grunt ignorefiles
    
    1) Because the final solution which landed to moodle.git put the
    ignorefile in git, so its not necessary
    
    2) Because this job was broken - the grunt task runs after we've deleted
    all the non-patch files. So a) the gruntfile wasn't there and b) if it
    was there it would be running with an incomplete thirdpartylibs.xml and
    generate the wrong ignorefile results
    
    closes #91

commit d9d7b5e07cceb6d364a42f39a726dc0eec4ae4d3
Merge: 8f4867c fb5fb82
Author: Dan Poltawski <talktodan@gmail.com>
Date:   Tue Jun 14 11:35:30 2016 +0100

    Merge pull request #87 from stronk7/HQ-1069
    
    HQ-1069 git gc: Apply for common collector in security clones

commit 8f4867c3825441d56bf097e46f8db2688bb9edca
Merge: 580700d 18a4615
Author: Eloy Lafuente (stronk7) <stronk7@stronk7.com>
Date:   Tue Jun 14 12:33:12 2016 +0200

    Merge pull request #90 from danpoltawski/security-rebase-colors
    
    HQ-1070 don't use colors in grunt output

commit 18a4615a056414c56329b1a0e7cb371680d743fc
Author: Dan Poltawski <dan@moodle.com>
Date:   Tue Jun 14 11:29:04 2016 +0100

    HQ-1070 don't use colors in grunt output
    
    I am sure grunt is supposed to autodetect this, but it doens't seem to
    be, so avoid those horrible colour escape sequences

commit fb5fb8293927f526fa958a27e376e95d84431da4
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Tue Jun 14 10:26:40 2016 +0200

    HQ-1069 git gc: Apply for common collector in security clones
    
    This implements a common git gc cleaner and moves current jobs
    needing it (remote_branch_checker, rebase_security and
    check_marked_as_integrated) to use it.
    
    Frequency can be adjusted using gcinterval (defaults to 25) and
    gcaggressiveinterval (defaults to 900) if needed.

commit 580700deb88f7f1980d41c55a80eaa31c0a5f3bd
Author: David Monllao <davidm@moodle.com>
Date:   Tue Jun 14 18:11:55 2016 +0800

    HQ-1070 We should look at both rebase-merge and rebase-apply

commit df3087824a2abeaee36dcae57b624730f0613bdf
Merge: 36f849c 1bcb488
Author: Dan Poltawski <talktodan@gmail.com>
Date:   Tue Jun 14 10:55:17 2016 +0100

    Merge pull request #88 from dmonllao/hq-1070-abort-rebase
    
    HQ-1070 Abort previous rebases

commit 1bcb48885921ba65d179c1e8edb2ce2d45b1fb5a
Author: David Monllao <davidm@moodle.com>
Date:   Tue Jun 14 16:28:35 2016 +0800

    HQ-1070 Abort previous rebases
    
    Also added a control for infinite loops.

commit 36f849c3a0c927095114481154f114d777ef7f6b
Merge: e301db0 2d16779
Author: Eloy Lafuente (stronk7) <stronk7@stronk7.com>
Date:   Tue Jun 14 09:41:54 2016 +0200

    Merge pull request #86 from danpoltawski/HQ-1070
    
    HQ-1070 Fix placement of npm preperation

commit 2d167793e2fb2ee7fedf0c999c0f346b817f1f38
Author: Dan Poltawski <dan@moodle.com>
Date:   Tue Jun 14 08:38:37 2016 +0100

    HQ-1070 Fix placement of npm preperation
    
    Previously we were preparing it before we'd cleaned up the branch

commit e301db0ddcdc3157f8555195ec7d019d4b258b0a
Merge: b21c590 7c66ea7
Author: Eloy Lafuente (stronk7) <stronk7@stronk7.com>
Date:   Sun Jun 12 23:29:39 2016 +0200

    Merge pull request #83 from danpoltawski/eslint
    
    MDLSITE-3782 precheck javascript with ESLint when present

commit 7c66ea7fb2990dab70b97d148cd8ef2fd4b4851f
Author: Dan Poltawski <dan@moodle.com>
Date:   Fri Jun 10 12:42:29 2016 +0100

    MDLSITE-3782 precheck javascript with eslint when present
    
    eslint superseeds jshint after MDL-52127 lands

commit b21c5907b43468a6c9c234d0ad56269488b27cc9
Merge: 2698a2e 528785c
Author: Dan Poltawski <talktodan@gmail.com>
Date:   Sat Jun 11 13:11:07 2016 +0100

    Merge pull request #84 from danpoltawski/grunt-actually-fail
    
    NOBUG: Detect grunt failures properly

commit 528785c82bc856ab4d8a372fba64d4e2c3d6e340
Author: Dan Poltawski <dan@moodle.com>
Date:   Sat Jun 11 13:08:53 2016 +0100

    NOBUG: Detect grunt failures properly

commit 2698a2ed313c93a055c50a696480e8424617e818
Merge: 74e756e d308ac5
Author: Dan Poltawski <talktodan@gmail.com>
Date:   Sat Jun 11 12:58:20 2016 +0100

    Merge pull request #85 from stronk7/MDLSITE-4419
    
    MDLSITE-4419 - Move all jobs to use the new prepare_npm_stuff installer

commit d308ac530cd1dd2ff2adcdd6254ea0e07676267d
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Fri Jun 10 20:15:35 2016 +0200

    MDLSITE-4419: Move all scripts to common prepare_npm_stuff.sh
    
    New behavior is simple:
    
    - if npmbase is passed, then the script will call to
      prepare_npm_stuff.sh and also clean link.
    - if npmbase is not passed, then it will assume somebody else
      (caller) has prepared the npm stuff already and won't
      operate anything.

commit 428786c25627c7436b7a7407ceda9b0d45e8337d
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Sat Jun 11 01:56:57 2016 +0200

    MDLSITE-4419: Only generate node_modules link when grunt is available

commit de2e34bdefa6e7bf5e411268dc597733acdab889
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Fri Jun 10 20:19:00 2016 +0200

    MDLSITE-4419: General install to happen before grunt-cli
    
    With new npm versions it seems that package/shrinkwrap are observed
    better and the grunt-cli installation was deleted by the general one.
    
    Hence we perform the general before the grunt-cli one.

commit 74e756ecf47aae8bade9e0ee93c8262d28783542
Merge: d62e127 75713a0
Author: David MonllaÃ³ <david.monllao@gmail.com>
Date:   Thu Jun 9 10:54:48 2016 +0800

    Merge pull request #82 from danpoltawski/relax-check
    
    MDLSITE-2839 relax commit message detector

commit 75713a043177670ce1efa35b7697173ac9e58cd7
Author: Dan Poltawski <dan@moodle.com>
Date:   Wed Jun 8 18:40:29 2016 +0100

    MDLSITE-2839 relax commit message detector
    
    We have the pre-checker to check for messages in the exact right format,
    here we should just search for related commits less striclty

commit d62e127b133c9d6f92ce61a4b5d7032b27be70b1
Author: David Monllao <davidm@moodle.com>
Date:   Wed Jun 8 15:27:00 2016 +0800

    MDLSITE-2839 Missing \

commit ddd4aa47090296fc7a56919249e1bc1d979f8701
Merge: 6b0ea03 13c0f8f
Author: Dan Poltawski <talktodan@gmail.com>
Date:   Wed Jun 8 08:16:08 2016 +0100

    Merge pull request #80 from dmonllao/check-marked-as-integrated-2
    
    MDLSITE-2839 Expanding regex coverage

commit 13c0f8fec31b254a245020143270cb3a6eb968d2
Author: David Monllao <davidm@moodle.com>
Date:   Wed Jun 8 14:50:22 2016 +0800

    MDLSITE-2839 Expanding regex coverage
    
    JIRA cli 3.9 and 5.0 seem to return different fixVersion formats,
    the regex should be adapted to work with both.
    
    Other changes added as part of this commit:
    - Info about skip-ci-version-check label on error messages
    - Criteria changed, the issue should be already integrated
    - Only the first error was printed

commit 6b0ea0395c50882d3eaa16c64627a02b7acd325d
Author: Dan Poltawski <dan@moodle.com>
Date:   Tue Jun 7 16:53:50 2016 +0100

    MDLSITE-2839 - try again with quoting issue

commit 0cd3eb4af42da3d69414b9fa8f0dd20edcf0143d
Author: Dan Poltawski <dan@moodle.com>
Date:   Tue Jun 7 16:50:19 2016 +0100

    MDLSITE-2839 - fix lack of quoting

commit a6cb1308e68d9e80aab96e9e8a534e9241cf92cc
Merge: ab6b789 5fd8df4
Author: Dan Poltawski <talktodan@gmail.com>
Date:   Tue Jun 7 16:35:28 2016 +0100

    Merge pull request #79 from dmonllao/check-marked-as-integrated
    
    MDLSITE-2839: Check fix version against integration branches

commit 5fd8df45269cd318e12dc753ba734bf488d053a3
Author: David Monllao <davidm@moodle.com>
Date:   Fri Jun 3 10:09:50 2016 +0800

    MDLSITE-2839: Check fix version against integration branches

commit ab6b7891d609f3f12d433adeb1d7ad1f13598ee0
Author: Dan Poltawski <dan@moodle.com>
Date:   Thu May 5 10:00:54 2016 +0100

    HQ-691 security: clarify some var comments

commit 659f42804db58f2016e016c7892ad5b5cdb7677b
Author: David Monllao <davidm@moodle.com>
Date:   Thu Feb 11 11:13:26 2016 +0800

    HQ-691 security: JS and CSS compilation conflicts autoresolver

commit 01d54ac84f3ad04724774ea798ee44ae22b11786
Author: David Monllao <davidm@moodle.com>
Date:   Tue Apr 19 13:13:30 2016 +0800

    MDLSITE-4485 versionscheck: ANY_VERSION as dependency valid version value

commit c28891cbc389b8db421200edc8d571331d68647f
Merge: 8078991 6c9caae
Author: Eloy Lafuente (stronk7) <stronk7@stronk7.com>
Date:   Fri Apr 15 10:23:23 2016 +0200

    Merge pull request #77 from stronk7/laptop
    
    MDLSITE-4017: Prevent mustfix fixfor version to be deleted on reopen

commit 6c9caaed625d5f1c837c187ba0f295faa2433323
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Fri Apr 15 01:50:45 2016 +0200

    MDLSITE-4017: Prevent mustfix fixfor version to be deleted on reopen

commit 8078991f5eb0950971b360f5b892557d73cfcced
Merge: 1bcc911 2135652
Author: Dan Poltawski <talktodan@gmail.com>
Date:   Thu Apr 7 10:34:32 2016 +0100

    Merge pull request #76 from stronk7/laptop
    
    MDLSITE-4419: legacy recess 1.1.9 is the only one for old branches

commit 2135652b031b70b38e3f6ed82840337f11d6742b
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Thu Apr 7 11:29:39 2016 +0200

    MDLSITE-4419: legacy recess 1.1.9 is the only one for old branches
    
    Using any other (older) version leads to incompatible lessc > 1.4
    installed and less files not being processed. So, for the lifes of
    27 and 28, we'll be using that 1.1.9 version.
    
    29 and up, not affected, they don't use recess anymore.

commit 1bcc911715672fd79fcb56aa284c6ccff076c3fa
Merge: 6fcf596 4173860
Author: Dan Poltawski <talktodan@gmail.com>
Date:   Thu Feb 25 09:45:03 2016 +0000

    Merge pull request #75 from moodlehq/laptop
    
    NOBUG: Centralize all the npm install stuff

commit 4173860cfaa2deab8507a38a652e6f765ee3e74a
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Thu Feb 25 01:33:32 2016 +0100

    NOBUG: Get rid of extrapath

commit 9e489a978af91fc457b11357a98ced2b17a251be
Author: Dan Poltawski <dan@moodle.com>
Date:   Wed Feb 24 20:44:17 2016 +0000

    NOBUG: Simplify job slightly
    
    1) Don't capture exitstatus - it wouldn't work anyway
    2) Only have two branches, with package.json and without

commit 458205e8ad1d86a4762ca873703cb0ef13bc8ee9
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Mon Feb 22 00:10:19 2016 +0100

    NOBUG: Centralize all the npm install stuff
    
    Right now there are a bunch of jobs requiring the
    installation of different nodejs stuff with npm.
    
    A) Chain of jobs by branch.
    
    - For branches < 29 (without package.json file):
      - The job 'shifter_walk' uses 'shifterbase' to maintain different
        shifter versions per branch. (current value ~/shifter_base)
      - The job 'less_checker' uses 'recessbase' to maintain different
        recess versions per branch. (current value ~/recess_base)
    - For branches >= 29 (with package.json file):
      - The job 'grunt_process' uses 'npmbase' to maintain different stuff
        (grunt, shifter, less, jshint...) per branch. (current value
        ~npm_base).
    
    B) Prechecker.
    
      - The job 'remote_branch_checker'' uses 'npmbase' to maintain different
        stuff (grunt, shifter, less, jshint...) per branch. (current value
        ~npm_base_prechecker). Run by 'grunt_process' above.
    
    C) New uses could also require the installation of npm stuff. For sure
       in a different base from the already used above.
    
    So, this new job is a "universal" nodejs stuff installer, behaving as
    follows:
    
    1) npm will be in charge of installing any package.
    2) every use above (A, B, C) will use a different 'npmbase'.
    3) within every 'npmbase' stuff will be installed per branch, aka:
      - A's own npmbase/branchname/node_modules
      - B's own npmbase/branchname/node_modules
      - ....
    4) If package.json is available, both grunt-cli and package.json stuff
       will be installed. This is the way in 29 and up.
    5) If package.json is not available, but shifterversion has been
       specified, shifter@version will be installed. This is for < 29.
    5) If package.json is not available, but recessversion has been
       specified, recess@version will be installed. This is for < 29.
    6) At the end of the process all the installed binaries @
       node_modules/bin will be listed.
    7) Link the correct node_modules directory in the gitdir being used. The
       job using the installer will be in charge, if needed, of deleting the
       link once the job is done.
    
    Important note: This job does not perform any git operation (fetch,
    checkout...). Just requires the gitdir and gitbranch params in order to
    decide where packages will be installed and linked to.
    
    Once this job is available, the idea is to use it for new uses (C above)
    and also, progresively, replace all the current A & B uses above.
    
    That's it. Next step, replace, in the A, B jobs above, current partial
    installers of nodejs stuff by this universal alternative.

commit 6fcf5964e114ad1c441388bc921f39bbfe7bf3e9
Merge: d69bc9e 3d8dc0d
Author: Dan Poltawski <talktodan@gmail.com>
Date:   Mon Feb 15 13:17:38 2016 +0000

    Merge pull request #74 from moodlehq/laptop
    
    MDLSITE-4415 CiBoT: exclude info lines from jira report

commit 3d8dc0de597c7b5497bd4c56334e7b82833ef82e
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Mon Feb 15 14:07:19 2016 +0100

    MDLSITE-4415 CiBoT: exclude info lines from jira report

commit d69bc9e05b041dfaec8bdc69a833e8174d80834b
Merge: 2a9990f 833b576
Author: Eloy Lafuente (stronk7) <stronk7@stronk7.com>
Date:   Mon Feb 15 13:30:06 2016 +0100

    Merge pull request #73 from danpoltawski/MDLSITE-4414-cancelled
    
    MDLSITE-4414 travis: Issue warning when build is canceled

commit 833b576babaee3eeb1da55c8fab676920e37b5ea
Author: Dan Poltawski <dan@moodle.com>
Date:   Mon Feb 15 10:48:27 2016 +0000

    MDLSITE-4414 travis: Issue warning when build is canceled

commit 2a9990fce81b8501d4b6a0fc99fd1b60c704b81e
Author: Dan Poltawski <dan@moodle.com>
Date:   Mon Feb 15 09:30:17 2016 +0000

    MDLSITE-4414: improve travis info in smurf.html

commit 2ca845162e43e06bda4824e0ea3d64dc9c58841b
Merge: de39bb7 09fff46
Author: Eloy Lafuente (stronk7) <stronk7@stronk7.com>
Date:   Sat Feb 13 10:13:27 2016 +0100

    Merge pull request #72 from danpoltawski/travis-status
    
    MDLSITE-4414: Precheck for travis status

commit 09fff4650aa3174bcf58b8f2227c50f53cee50c1
Author: Dan Poltawski <dan@moodle.com>
Date:   Fri Feb 12 18:43:36 2016 +0000

    MDLSITE-4414: Precheck for travis status
    
    * Missing setup becomes a warning
    * Travis build error becomes an error
    * In progress builds just don't count
    
    I added the 'diffurl' field to the checkstyle format so that could pass
    the url to the build to be linked in smurf.html

commit de39bb770c3d9021a5eed941c419e731931dcc0a
Merge: 423fa39 5b55b58
Author: Eloy Lafuente (stronk7) <stronk7@stronk7.com>
Date:   Wed Feb 3 22:04:27 2016 +0100

    Merge pull request #70 from danpoltawski/phpcs-abbrebiation
    
    Change the php code sniffer abbreviation

commit 5b55b585b45ec255cafa8733daf0737d542ed06a
Author: Dan Poltawski <dan@moodle.com>
Date:   Wed Feb 3 11:48:26 2016 +0000

    NOBUG: Change the php code sniffer abbreviation
    
    When I see the output of a smurf report with php coding style
    problems, I frequently mistake it for the phplint check - which is
    much more serious problem.
    
    To avoid this confusion I propose to change the shortname to phpcs to
    make it clearer.

commit 423fa396efc6146848f3df89c602c841139dd53c
Merge: b5371c8 48cbe4e
Author: Eloy Lafuente (stronk7) <stronk7@stronk7.com>
Date:   Thu Jan 28 11:39:38 2016 +0100

    Merge pull request #69 from danpoltawski/gitlab-urls
    
    Support HQ gitlab in diff urls

commit 48cbe4e4fa62bd8f0edbcc683d5487a6f8bff0dd
Author: Dan Poltawski <dan@moodle.com>
Date:   Thu Jan 28 10:22:31 2016 +0000

    NOBUG: support HQ gitlab in diff urls
    
    (And remove gitorious which has been shut down)

commit b5371c8cc25bcc97bd4a2248b51195deecbc3ec1
Author: Dan Poltawski <dan@moodle.com>
Date:   Mon Jan 4 15:04:30 2016 +0000

    Revert "NOBUG: Christmas upgrade"
    
    This reverts commit a2b4e3a80b0e0c88850ca357fe41e97592cfe3d0.

commit 5b241683ea2f423674e85918c513f46a7ae76f88
Merge: 9601228 27caac6
Author: Dan Poltawski <talktodan@gmail.com>
Date:   Thu Dec 24 13:18:38 2015 +0000

    Merge pull request #68 from stronk7/laptop
    
    MDLSITE-4329 Make the prechecker exit on shifter lint error too

commit 27caac68a294d4f4194f62fad734714644b312bd
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Thu Dec 24 13:52:39 2015 +0100

    MDLSITE-4329 Make the prechecker exit on shifter lint error too
    
    This intercepts error output, still passing it to parent process
    (usually pre-checker). So the process will now end with error if
    there are shifter lint errors found.

commit 9601228f7a329e77773554455d5766614f4973f5
Merge: 8a378c4 d9c9203
Author: Eloy Lafuente (stronk7) <stronk7@stronk7.com>
Date:   Thu Dec 24 12:22:22 2015 +0100

    Merge pull request #67 from danpoltawski/shifter-prechecker
    
    Check shifter lint errors in the prechecker

commit d9c920346fde11def68501b4d648c77edea26e21
Author: Dan Poltawski <dan@moodle.com>
Date:   Mon Nov 23 22:55:48 2015 +0000

    MDLSITE-4329 prechecker: report shifter problems

commit 8a378c4c56a08e643df577cddf9fbfffb5a97a64
Merge: 4402aff 509862b
Author: Dan Poltawski <talktodan@gmail.com>
Date:   Sat Dec 19 08:24:10 2015 +0000

    Merge pull request #66 from stronk7/laptop
    
    MDLSITE-4366 savepoints: discard unsafe strings to avoid problems

commit 509862b3ceb6d7cb6767fc089f96155180cabc7e
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Sat Dec 19 01:07:00 2015 +0100

    MDLSITE-4366 savepoints: discard unsafe strings to avoid problems
    
    Now we pre-process the upgrade code, looking for all strings
    within it. If the string is considered dangerous (contains
    parenthesis and other chars, then it's replaced by safe placeholder
    so next regexp operations won't fail).
    
    Safe strings are kept in place in order to keep code transformations
    being as small as possible, in case we want to add more checks in
    the future (savepoint params checks...).

commit 4402affd9b17a5052e92760d9f4f1d0fda7d312b
Merge: a2518e4 b64d747
Author: Dan Poltawski <talktodan@gmail.com>
Date:   Wed Dec 16 10:19:54 2015 +0000

    Merge pull request #65 from stronk7/laptop
    
    MDLSITE-4358 unit tests: move away from template1 as dflt. database

commit b64d747389f47b078f4cc610e9b5e6749430ed0b
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Tue Dec 15 18:57:45 2015 +0100

    MDLSITE-4358 unit tests: move away from template1 as dflt. database
    
    This avoid concurrence problems when 2 jobs are trying to issue
    create database statements, rare because it's quick command (1s)
    but possible (we have experimented it).

commit a2518e4423d31e8ab396bf5e9f8249e535558f35
Author: Dan Poltawski <dan@moodle.com>
Date:   Mon Dec 14 14:41:29 2015 +0000

    NOBUG: be a bit more fun

commit a2b4e3a80b0e0c88850ca357fe41e97592cfe3d0
Author: Dan Poltawski <dan@moodle.com>
Date:   Mon Dec 14 14:08:13 2015 +0000

    NOBUG: Christmas upgrade
    
    (To be reverted at the end of the festive season)

commit 786d4c59fde97a185c2c43dbaf8a7f225f6ecae5
Merge: a65586b 25c09ca
Author: Dan Poltawski <talktodan@gmail.com>
Date:   Mon Dec 14 12:28:57 2015 +0000

    Merge pull request #64 from stronk7/laptop
    
    MDLSITE-3818 cleanup: kill BUILD_ID and delete issues details

commit 25c09ca1e923ea1602f49257ad8ac61a256320d2
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Sun Dec 13 21:43:28 2015 +0100

    MDLSITE-3818 cleanup: kill BUILD_ID and delete issues details
    
    This commit cleans all remaining jobs using BUILD_ID and, instead
    do use a calculated (now), BUILD_TIMESTAMP, that is what BUILD_ID
    used to contain. Note this is basically a cosmetic change to make
    scripts to show information as it was some time ago.
    
    Also, in various tracker jobs where a number of issues (with full
    details) are returned, to avoid any disclosure of (security...)
    information, the file where details are stored is explicitly
    deleted at the end of the process.

commit a65586b616b23a1103c3a6f6f899e7dd5e389444
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Sun Dec 13 13:08:12 2015 +0100

    MDLSITE-4334 counters: Define the expected date format
    
    With the upgrade to JIRA CLI, date formats are not returned
    in d/MMM/yy format anymore, but d/M/yy h:m instead. That causes
    matching problems and end of cycles are not detected anymore.
    
    So we are ensuring that the expected d/MMM/yy is always used.

commit 9586d3dd4a438b5f8154a62edece95434f317959
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Sat Dec 12 17:35:13 2015 +0100

    MDLSITE-4355 ci: change removed option by newer counterpart

commit 061d50f59ef69b12654cdd323dc54cb27d89e7e5
Merge: a244f5f e51f794
Author: Eloy Lafuente (stronk7) <stronk7@stronk7.com>
Date:   Fri Dec 4 18:13:59 2015 +0100

    Merge pull request #63 from danpoltawski/npm-no-update
    
    Don't use npm update

commit e51f79421a5b4a62d0b8fe30ba626d4e6ddc2918
Author: Dan Poltawski <dan@moodle.com>
Date:   Fri Dec 4 14:44:40 2015 +0000

    Don't use npm update
    
    npm install does the same job and respects the shrinkwrap

commit a244f5f7f184dc0c4ccc7e5c0793fb3e985eb3a5
Merge: fa87c0b fbbccd0
Author: Eloy Lafuente (stronk7) <stronk7@stronk7.com>
Date:   Thu Dec 3 10:59:55 2015 +0100

    Merge pull request #62 from danpoltawski/fix-freds-mess
    
    Add the best smiley back and enforce use of https

commit fbbccd09caf961e3d28041e85e4f525a6cec18c0
Author: Dan Poltawski <dan@moodle.com>
Date:   Thu Dec 3 09:35:29 2015 +0000

    Add a note about the source of the poppoms

commit f2692e4712363041b762f8e9050330c967148215
Author: Dan Poltawski <dan@moodle.com>
Date:   Thu Dec 3 09:29:36 2015 +0000

    Add the best smiley back and enforce use of https
    
    This reverts commit cf83f2f7ffd51635af6136e83a17d74eeea2d469.

commit fa87c0bd1675009695be5a10a014b8c54468f2ac
Merge: 7c8a5c5 cf83f2f
Author: Eloy Lafuente (stronk7) <stronk7@stronk7.com>
Date:   Thu Dec 3 10:11:00 2015 +0100

    Merge pull request #61 from FMCorz/patch-1
    
    Use HTTPS for smileys when possible

commit cf83f2f7ffd51635af6136e83a17d74eeea2d469
Author: FrÃ©dÃ©ric Massart <fmcell@gmail.com>
Date:   Thu Dec 3 17:07:34 2015 +0800

    Use HTTPS for smileys when possible
    
    Using HTTP breaks the HTTPS validation on the tracker. I removed the pom pom girl as it doesn't have an HTTPS equivalent.
    
    Note: Untested.

commit 7c8a5c52dae37fb115575035eb49c906f0638581
Author: Dan Poltawski <dan@moodle.com>
Date:   Fri Nov 27 09:10:29 2015 +0000

    MDLSITE-4323 only run grunt when grunfile exists

commit 0e6e87708e344bbb0d282d057940bc10947326ff
Merge: c462c40 ec32296
Author: Eloy Lafuente (stronk7) <stronk7@stronk7.com>
Date:   Wed Nov 25 17:48:13 2015 +0100

    Merge pull request #60 from danpoltawski/grunt-prechecker
    
    MDLSITE-4323 Add grunt to the prechecker

commit ec3229694362b830ce67eb69f603f14bc5cc8b88
Author: Dan Poltawski <dan@moodle.com>
Date:   Mon Nov 23 21:31:49 2015 +0000

    MDLSITE-4323 refactored checkstyle converter into single file
    
    There were a number of duplicate scripts all doing basically the same
    thing.

commit 2a7b347cb4a07b416fede134aaff808050a00f6e
Author: Dan Poltawski <dan@moodle.com>
Date:   Mon Nov 23 18:00:54 2015 +0000

    MDLSITE-4323 grunt: Add grunt process to prechecker

commit c462c400e0483a52a1fa4b4b41038047309ea2e6
Merge: 115cd41 a149e15
Author: Eloy Lafuente (stronk7) <stronk7@stronk7.com>
Date:   Fri Nov 6 17:47:52 2015 +0100

    Merge pull request #59 from danpoltawski/MDLSITE-3701
    
    MDLSITE-3701 tracker: query issues 'peer review in progress' for checks

commit 115cd4136acaf60efc06fc59e9a755360f728f31
Merge: 92a7894 7791302
Author: Eloy Lafuente (stronk7) <stronk7@stronk7.com>
Date:   Fri Nov 6 16:47:20 2015 +0100

    Merge pull request #58 from danpoltawski/MDLSITE-3667
    
    MDLSITE-3667 commits: Improve handling of additional ':' it message

commit a149e152eed23fbbb9d7b8aa27045c471b5ea19c
Author: Dan Poltawski <dan@moodle.com>
Date:   Fri Nov 6 13:18:06 2015 +0000

    MDLSITE-3701 tracker: query issues 'peer review in progress' for checks
    
    If issues are peer reviewed too quickly, they do not get the ci label

commit 7791302dfd4e1cafdcc7339c2e519b6ef86167ec
Author: Dan Poltawski <dan@moodle.com>
Date:   Fri Nov 6 10:36:06 2015 +0000

    MDLSITE-3667 commits: clarify that we are talking about commit messsage
    
    As suggested by David

commit 92dfe6bd652645de2cb4b6e7f33a8df0471bc175
Author: Dan Poltawski <dan@moodle.com>
Date:   Fri Nov 6 10:31:07 2015 +0000

    MDLSITE-3667 commits: identify commit which previously was flagged OK

commit cf804cec4797a428d95abca75ac7b5028c5e70df
Author: Dan Poltawski <dan@moodle.com>
Date:   Fri Nov 6 10:17:09 2015 +0000

    MDLSITE-3667 commits: improve handling of superfolous ':'
    
    Previously we were throwing error: 'The commit does not begin with the expected issue code MDL-[0-9]{3,6} and a space.'

commit 92a78947cb811af115835ec3b3c33fbd5ebbf19a
Author: Andrew Nicols <andrew@nicols.co.uk>
Date:   Mon Oct 26 11:16:32 2015 +0800

    MDLSITE-4217 ant: Fix PHP Lint issues

commit 0426efefbae7e173d7aa10c72c4f4e1cc0bd65cd
Merge: ee520e2 30e6439
Author: Dan Poltawski <talktodan@gmail.com>
Date:   Wed Oct 21 09:12:03 2015 +0100

    Merge pull request #56 from stronk7/MDLSITE-1973
    
    MDLSITE-1973 versions: Verify wrong and future dates are not allowed

commit 30e64390d6e3bb6bb95efbfcb727162c6c9dfb56
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Wed Oct 21 02:21:37 2015 +0200

    MDLSITE-1973 versions: Verify wrong and future dates are not allowed
    
    While this does not complete all the checks to be implemented @
    MDLSITE-1973, the 2 new tests added:
    
    - Verify that the YYYYMMDD digits are correct, existing date.
    - Verify that the YYYYMMDD digits are actual (not future >7d) date.
    
    Do exactly match the 2-3 latest problems we have had lately. So
    the earlier we are checking for them, the better.

commit ee520e20783c0079b90ddd8111138095f26e822c
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Wed Oct 14 00:07:48 2015 +0200

    MDLSITE-4200 ci: also raise priority of security issues.
    
    This was originally planned as part of MDLSITE-2892, this
    is a good moment to implement it.

commit 8a2220b11e0121250df7910bdc25f91a9d7ea18a
Merge: b455a9a 7356e7e
Author: Dan Poltawski <talktodan@gmail.com>
Date:   Tue Oct 13 09:47:28 2015 +0100

    Merge pull request #55 from stronk7/MDLSITE-4200
    
    MDLSITE-4200 ci: raise integration priority when needed

commit 7356e7e847b436c2e6dc414301b012ff5a5b3584
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Mon Oct 12 17:27:39 2015 +0200

    MDLSITE-4200 ci: raise integration priority when needed
    
    There are some well known situations:
      - issue has "mdlqa" label.
      - issue has certain "Must fix for X.Y" version.
    
    Where we must give those issues higher prioring under
    continuous integration periods. Till now we do that using
    separate filters or custom searches.
    
    Instead, with this job, those issues will be searched periodically
    and their "integration priority" will be raised to 1, so they will
    appear the first under unmodified pickers.

commit b455a9a69f7b4c00b15d314163d4f1b3d136a322
Merge: 847b280 aae038e
Author: Eloy Lafuente (stronk7) <stronk7@stronk7.com>
Date:   Mon Oct 12 17:46:01 2015 +0200

    Merge pull request #54 from stronk7/MDLSITE-4198
    
    MDLSITE-4198 ci: split maxcommits into warning(10) and error(100)

commit aae038e7f7f32c1ea9f32b234eea08edb0226221
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Sat Oct 10 14:36:17 2015 +0200

    MDLSITE-4198 ci: split maxcommits into warning(10) and error(100)
    
    To better support branches with a number of commits, the old, unique,
    maxcommits setting is changed plugin-wide to use a couple of settings
    instead.
    
    Also, we are moving from an eroor&stop behavior (where the rest of the
    checks were not applied) to a error/warn and continue behavior, by
    showing the maxcommits warnings and errors within the commits checker.
    
    This may lead to problems is somebody does submit a huge/wrong branch,
    but that also was happening right now irrespectively of the # of
    commits. If we need countermeasures for that situation, time will tell.

commit 847b28004975caa9ac56377c7fffe97f32578235
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Tue Sep 29 18:45:25 2015 +0200

    NOBUG: Add simple html pages with direct links to personal pickers.
    
    To be used by the integration dashboard:
    
    https://tracker.moodle.org/secure/Dashboard.jspa?selectPageId=11350
    
    To force us to use always the complete lists because the
    widgets do use to show the issues in a wrong order (lists are ok).

commit b514cd707d77d58df9029f614c2ee93318ae6ced
Merge: 5c0736a 7273187
Author: Dan Poltawski <talktodan@gmail.com>
Date:   Tue Sep 22 11:53:20 2015 +0100

    Merge pull request #52 from stronk7/laptop
    
    NOBUG: Allow the maxcommits to be configurable

commit 72731875bf27dc983b2d43e30f9cb7ee4a643dfb
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Tue Sep 22 01:08:37 2015 +0200

    NOBUG: Allow the maxcommits to be configurable
    
    While we recently raised maxcommits to 100 (harcoded in the script),
    there are situations where we want to raise the limits more,
    specially when we are importing a branch containing years-of-dev
    about a new plugin.
    
    In those situations it's interesting to launch the bulk-checker manually
    by incrementing the number of allowed commits.
    
    A real example: https://tracker.moodle.org/browse/MDL-47494
    (there you can see all the "failed" CiBoT attempts and the interest
    into being able to, exceptionally, run the checker with more commits
    allowed).

commit 5c0736a3f89cbf163ead338af7cf6eef30a62e14
Merge: d911f43 ef5ccea
Author: Dan Poltawski <talktodan@gmail.com>
Date:   Mon Sep 21 09:40:56 2015 +0100

    Merge pull request #51 from stronk7/laptop
    
    NOBUG: Format XML output adding linefeeds and indentation

commit ef5ccea34a30a0299015c91e398c92b86e10b21b
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Mon Sep 21 10:29:34 2015 +0200

    NOBUG: Format XML output adding linefeeds and indentation
    
    This will prevent some utilities (sed) breaking badly
    against loooong reports leading to "too long line" problems.

commit d911f43d77b00240de81104c04ee792d5c3e3d20
Merge: 83861a8 2a11e92
Author: Dan Poltawski <talktodan@gmail.com>
Date:   Wed Jul 1 12:27:08 2015 +0200

    Merge pull request #50 from moodlehq/laptop
    
    NOBUG: Avoid weird dereferenced links std behavior.

commit 2a11e92da576e41addd9a1389a84e5e5bf3ff138
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Tue Jun 30 18:07:43 2015 +0200

    NOBUG: Avoid weird dereferenced links std behavior.
    
    By default, ln itself follows links so, at the end
    it's highly possible to get them recursively created
    no matter they already exists. To solve this the -n
    flag can be used, causing ln not to follow links.
    
    Or, something like that, really I've not thought too
    much about it. I just tried the flag and verified it
    solved the problem, so applying it everywhere.
    
    Ref: http://www.gossamer-threads.com/lists/linux/kernel/1966

commit 83861a81fde3451ed1ad105aef27f13d09602adf
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Fri May 22 19:47:41 2015 +0200

    MDLSITE-3874 ci: make source per branch to use node_modules subdir
    
    For some reason, soft linked installation of node stuff does not
    work well unless the source directory is called node_modules. Sure
    there are some realpath bit somewhere (grunt?) depending of that.
    
    Ultimately it was causing grunt to fail, not being able to execute
    the uglify-js task. With this trick, everything seems to work ok.

commit 622302d57f8d16163c58bf9ff96c5cba49515514
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Mon May 18 01:04:56 2015 +0200

    MDLSITE-3874 ci: grunt process job.
    
    This job does:
    
    - maintains 1 directory with all the nodejs stuff installed.
    - every 25 jobs performs a npm update
    - runs grunt that executes shifter (for yui modules), uglifyjs (for
      amd modules) and jshint.
    - reports any problem or difference between the repository status
      and the calculated stuff.

commit e402a3805429b39a7020c207f2cf75fdb0bcdd02
Merge: 0735517 c4f7571
Author: Dan Poltawski <talktodan@gmail.com>
Date:   Mon May 11 14:12:52 2015 +0100

    Merge pull request #49 from stronk7/laptop
    
    MDLSITE-4044 prechecker: create local branches when valid and needed

commit c4f75714c9559eba54b1ffb5a335346f00e7e261
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Mon May 11 12:16:01 2015 +0200

    MDLSITE-4044 prechecker: create local branches when valid and needed
    
    This usually happens only on first run after a major release, where
    new branches for patches are available.

commit 073551768d9910183fcf5329222a94190d126966
Merge: 163358b 156bec1
Author: Eloy Lafuente (stronk7) <stronk7@stronk7.com>
Date:   Thu May 7 15:51:53 2015 +0200

    Merge pull request #48 from moodlehq/laptop
    
    MDLSITE-3899 Stop running jshint on built folders

commit 156bec1014c4a2bfc08074a10207a4750d00cf1b
Author: Dan Poltawski <dan@moodle.com>
Date:   Thu May 7 14:38:14 2015 +0100

    MDLSITE-3899 stop running jshint on amd/build/
    
    The problem was the existing rule relied on having subdirectories (i.e.
    lib/yui/build/some-random-module/built.js for yui). Where as amd doesn't
    have this strcuture so its just lib/amd/build/some-module-min.js). Doing
    it this way means a more blanket ignore for yui, but think thats
    desierable anyway.

commit 163358b558f25f9a7d7b6d57a557c16b23f6e494
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Tue May 5 13:40:13 2015 +0200

    NOBUG: Add new fixtures directory.

commit b68aa06b919bf14930f3241a5b6339919ad6a51b
Merge: 923d7e3 ec78efb
Author: Dan Poltawski <talktodan@gmail.com>
Date:   Tue May 5 15:19:29 2015 +0100

    Merge pull request #47 from moodlehq/laptop
    
    MDLSITE-4023 - Various fixes

commit ec78efbd44a58e55a45fba9de6dd3f09aa10a282
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Tue May 5 13:32:36 2015 +0200

     MDLSITE-4023 prechecker: handle csslint problems as proper errors

commit 2b526f3fe309372f0d5a89e26740b0ac4cead653
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Sat May 2 12:17:14 2015 +0200

    MDLSITE-4023 bulk prechecker: Look for controlled errors.
    
    We output to the errors.txt file information with different
    levels (Info, Warn, Error). Before this patch, any level was
    causing the errors.txt to be printed, leading to confusion.
    
    Now we check if there is any Error level message to print that
    file. If there isn't any error, then an uncontrolled error has
    happened and we should be warned in order to fix it.

commit 9a830efcbaf758028775d3e7d711eafd69fd7fb5
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Sat May 2 11:10:26 2015 +0200

    MDLSITE-4023 prechecker: perform git gc randomly.
    
    - The prechecker will now execute git gc (normal or
      aggressive) every X executions (default to 25 and 900),
      can be configured.
    - Tidied the find commands in charge of deleting not
      modified files in order to avoid .git and work explicitly
      (previously they were ignored because of their existence
      in the excluded files).

commit 1d3e8f7b3b96c8678a81eba7437781b4f306d870
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Thu Apr 30 01:41:58 2015 +0200

    MDLSITE-4023 prechecker: Normalize error/warn/info output.
    
    So later the bulk checker can decide better about different
    situations.

commit 923d7e367e3fea6a49063c59a26e8949e8b7e200
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Tue Apr 28 21:35:15 2015 +0200

    MDLSITE-4020 prechecker: calculate excluded paths after merge
    
    We need to delay de calculation of excluded paths to happen
    after the merge of the remote branch has happened. Only that
    way, thirdpartylibs.xml coming with the remote branch will be
    excluded.

commit bfe8f705af83a3b2df40dadf4208751efadde8da
Merge: 40b5858 3af8c02
Author: Dan Poltawski <talktodan@gmail.com>
Date:   Tue Apr 28 11:48:10 2015 +0100

    Merge pull request #46 from stronk7/master
    
    MDLSITE-4018 bulk-checker: process all awaiting integration issues

commit 3af8c025c06de8b9e47dbcfa787ea9a890a8bc60
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Tue Apr 28 12:26:32 2015 +0200

    MDLSITE-4018 bulk-checker: process all awaiting integration issues
    
    Before this, only the oned under current integration were
    being checked and that was leading, on continuous periods,
    where everything happens quickly to some issues never checked.
    
    With this change we'll start to process any issue awaiting integration
    that never has been checked before (missing ci label).

commit 40b58580f4e56d6683b3ce76278e81ff90256be1
Merge: 2e50e06 09baaf1
Author: Dan Poltawski <talktodan@gmail.com>
Date:   Fri Apr 10 15:15:30 2015 +0100

    Merge pull request #44 from danpoltawski/auto-rebaser
    
    MDLSITE-2317 first cut of autorebaser

commit 09baaf15483e092fcee4faa8190de5c4dc9996ad
Author: Dan Poltawski <dan@moodle.com>
Date:   Thu Apr 9 16:22:15 2015 +0100

    MDLSITE-2317 clarify comment

commit 4b79155729c0667d91500ec1ca4183265f48b84b
Author: Dan Poltawski <dan@moodle.com>
Date:   Thu Apr 2 10:31:58 2015 +0100

    MDLSITE-2317 first cut of autorebaser

commit 2e50e06c9cdfd18c3be163744ef12f5f5c084ff7
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Tue Apr 7 18:06:56 2015 +0200

    NOBUG: Better detect merge remainders

commit 9b4d667fc995fed01487eeab4cb118f63c2b559f
Author: Dan Poltawski <dan@moodle.com>
Date:   Mon Apr 6 11:20:20 2015 +0100

    MDL-49684 add excluded timezone fixture

commit 2753cdb26bf30ed500b9a417ec8145044f4c8ede
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Mon Apr 6 01:21:59 2015 +0200

    MDLSITE-3940 control: verify XML files are well-formed
    
    Before proceeding to transform any XML file from checkstyle
    to smurf format, verify it's well-formed. This will help
    to avoid the checker to become completely broken whenever
    an individual check has any problem and, instead, that check
    will be skipped.

commit 0dc694771299cf52caf6fcf261ebbeaa7ee70c72
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Thu Apr 2 20:35:42 2015 +0200

    MDLSITE-2892: Guarantee no null priority is awaiting integration

commit 66ffe766bef06fbcebb1d4b1e219d3e01ab94ee9
Merge: ed6044d 458a7bd
Author: Dan Poltawski <talktodan@gmail.com>
Date:   Mon Mar 30 15:57:20 2015 +0100

    Merge pull request #43 from stronk7/laptop
    
    MDLSITE-2892: Guarantee no null priority lands to integration

commit 458a7bdcbe1e8008db0d7c25685bd6c6e901862c
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Mon Mar 30 16:28:31 2015 +0200

    MDLSITE-2892: Guarantee no null priority lands to integration
    
    This implements #4 of https://tracker.moodle.org/browse/MDLSITE-2892
    because it's leading to wrong orders in the integration process.
    
    The rest can wait for some time, but this one is hiting us with
    old issues having null altering the expected (0..1) order.

commit ed6044dbe544bdf83af72e02e7db77a771c3e786
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Thu Mar 26 11:31:04 2015 +0100

    NOBUG: Add final $ so the regexp has sense and only allow numbers there.

commit 47caa901a8f3aa435e84d25867a085c0424d1b33
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Fri Mar 20 19:39:25 2015 +0100

    MDLSITE-3912 checkstyle: safe-xml messages

commit 574e1c336d30bc64d0decf0ffa9ce5846e354556
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Fri Mar 20 02:45:59 2015 +0100

    MDLSITE-3912 ci: towards safe XML contents.

commit 0d50a58d49cb0e7000bd5f61ca00f97de4c8c4da
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Fri Feb 13 12:21:29 2015 +0100

    MDLSITE-3769 local_ci: Automated the count of delayed issues.
    
    As far as it's not possible to look for comment date (grrr), we
    look for all issues that have been waiting for integration or
    integration in progress and did not transition beyond that and
    have the delayed comment on them.
    
    Not sure if this is going to work or we'll need to fetch comments
    and filter by date manually... but worth trying as far as doing
    the later can be really slow.

commit 1d966ae392b17d75d48fa1680ec8e2db5eb68864
Merge: 2403f37 0d5b077
Author: Dan Poltawski <talktodan@gmail.com>
Date:   Mon Feb 2 10:29:07 2015 +0000

    Merge pull request #42 from stronk7/MDLSITE-3799
    
    MDLSITE-3799 ci: reset fixfor versions when moving out from integration.

commit 0d5b07727c6cdf56fffe3e5585c063ace002c0e4
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Mon Feb 2 11:25:22 2015 +0100

    MDLSITE-3799 ci: reset fixfor versions when moving out from integration.
    
    Reopened issues that have failed in the testing phase, already have got
    their fixfor versions set. Once they are reopened and moved out from
    current integration cycle those fixfor versions, now incorrect, remain
    set.
    
    This change just ensures that any issue moved out from integration
    (reopened) gets the versions cleaned.

commit 2403f37c35ee09006feeb552ece7cb198d39ecbb
Merge: 6c293c4 bf88569
Author: Eloy Lafuente (stronk7) <stronk7@stronk7.com>
Date:   Mon Jan 19 12:53:45 2015 +0100

    Merge pull request #41 from stronk7/laptop
    
    CONTRIB-4696 Make CI exclusions aware of distributed thirdpartylibs.xml

commit bf885692741a69848df00c2ff5a499beb5bb710f
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Mon Jan 19 02:11:09 2015 +0100

    CONTRIB-4696 Need gitdir and gitbranch defined earlier.

commit 22d087e6f68629659b034ee87956eda5d51ab70d
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Mon Jan 19 00:56:56 2015 +0100

    CONTRIB-4696 Apply distributed thirdpartylibs.xml to CI jobs
    
    Originally we introduced the ability to automatically exclude
    all the thirdpartylibs.xml locations to the local_codechecker
    plugin (phpcs invoked from within Moodle).
    
    CI jobs do not use that phpcs but the stock one that is not
    aware of our thirdpartylibs.xml at all. Instead, it relies in
    a fixed list of exclusions, that has worked nicely till now
    for core.
    
    Recently we have started to use the CI jobs to test plugins
    that can come with their own thirdpartylibs.xml, and those
    exclusions are not being applied.
    
    This patch just looks for all the available thirdpartylibs.xml
    files and add as many <location> exclusions are defined there.

commit 6c293c437819f54f88fac67f35f35abff544854d
Merge: c504d4c 609f07b
Author: Eloy Lafuente (stronk7) <stronk7@stronk7.com>
Date:   Mon Dec 29 19:07:23 2014 +0100

    Merge pull request #40 from danpoltawski/MDLSITE-3642
    
    MDLSITE-3642 emotion upgrade for cibot

commit 609f07b6d281057b19c92c629d67c383f352b9d8
Author: Dan Poltawski <dan@moodle.com>
Date:   Mon Dec 29 15:36:38 2014 +0000

    MDLSITE-3642 emotion upgrade for cibot

commit c504d4ccbb026ea8c80c5681ea8d108dcacbcd48
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Thu Dec 18 02:38:19 2014 +0100

    MDLSITE-2012 prechecker: ensure some vars are always set
    
    Regression introduced by previous commit, some variables were
    not being set anymore. And other jobs were needing them.
    
    So, just ensuring they are set inconditionally.

commit c1dcecfc8810a4615ecfcfa787d91b36eda184e0
Author: Dan Poltawski <dan@moodle.com>
Date:   Wed Dec 17 11:56:19 2014 +0000

    NOBUG: Added a bit of christmas cheer
    
    Yes, this didn't get peer reviewed, i'm a bad integrator ðŸ˜ˆ

commit 5819cc29a506145331520f87b47a508f29fceccf
Merge: 7ab38c9 232c546
Author: Dan Poltawski <talktodan@gmail.com>
Date:   Wed Dec 17 10:05:23 2014 +0000

    Merge pull request #39 from stronk7/MDLSITE-2012
    
    MDLSITE-2012 prechecker: Detect plugin builds and adapt checks

commit 232c54676fd42dc158420574e2aa1d040c6cc0f5
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Wed Dec 17 00:18:45 2014 +0100

    MDLSITE-2012 prechecker: Detect plugin builds and adapt checks
    
    Agreed with David, all his builds from the Plugins database will
    be passing PLUGIN-xxxxx (xxxx being the plugin version id) to the
    prechecker.
    
    That way the prechecker will know the execution is against a plugin
    and will skip the commits checker (for now) and will be able to
    introduce other customizations along the time (keeping the prechecker
    working for everybody).

commit 7ab38c98a2c540a8560c475075ec3c8fe8a566a7
Merge: f9507f5 f37b101
Author: Eloy Lafuente (stronk7) <stronk7@stronk7.com>
Date:   Thu Dec 11 16:27:50 2014 +0100

    Merge pull request #38 from danpoltawski/MDLSITE-3690
    
    MDLSITE-3690 integration cibot run now gets shown to all users

commit f37b1010ad18f25136d58e1eadc90d00d2435aae
Author: Dan Poltawski <dan@moodle.com>
Date:   Thu Dec 11 11:29:28 2014 +0000

    MDLSITE-3690 integration cibot run now gets shown to all users

commit f9507f507265e689145f1f8ecbaff30a5ace3cdd
Merge: 65de06c afefa43
Author: Eloy Lafuente (stronk7) <stronk7@stronk7.com>
Date:   Wed Dec 10 19:08:04 2014 +0100

    Merge pull request #37 from danpoltawski/MDLSITE-3680
    
    MDLSITE-3680 fix detection of merge point

commit afefa43af541abc5d2aa07590c825c536ae3000e
Author: Dan Poltawski <dan@moodle.com>
Date:   Wed Dec 10 17:45:20 2014 +0000

    MDLSITE-3680 improve error handling
    
    When I was testing MDLSITE-3680 I drove myself crazy trying to work out
    where a problem was occuring - it turned out that the
    
    git checkout MOODLE_27_STABLE && git reset (etc etc) was failing, then
    it was continuing to process based on the existing merge branch, from
    the previous run. This makes the script die when one of these operations
    fail.

commit 7603e6da4f96f8188148a7058c2826cb374b9adc
Author: Dan Poltawski <dan@moodle.com>
Date:   Wed Dec 10 16:43:20 2014 +0000

    MDLSITE-3680 fix integration.git detection
    
    Previously our detection of the ancestor was not always finding the
    correct ancestor. By using git merge-base be find the point which git
    will use for a 3 way merge i.e. the point it forked.

commit 65de06ce6c2a6bba11a40a38474c0c0b849dbc46
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Mon Dec 1 11:21:01 2014 +0100

    MDLSITE-2712 fix problem calculating branch ages against integration
    
    - --boundary was returning non-target commits.
    - small cleanup of current directory.
    - simplified to always look for ancestor from HEAD (already checked-out)
    - for integration.git checks, perform them since ancestor, not tip.
    - for moodle.git checks, perform them since tip (as was previously).

commit 1137618732d201dcf29567a5999e4984fa24f222
Merge: de4d58e fb91682
Author: Eloy Lafuente (stronk7) <stronk7@stronk7.com>
Date:   Mon Dec 1 11:02:12 2014 +0100

    Merge pull request #31 from danpoltawski/MDLSITE-2712
    
    MDLSITE-2712 allow checks against integration

commit fb916824699128c217ac41d2bfb732a6ab013750
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Fri Nov 28 22:30:07 2014 +0100

    MDLSITE-2712 tidying, commenting and reorganizing a bit
    
    This change contains basically cosmetic changes only to
    comments, initial creation of integration.git remote and
    tidying exit-on-error.
    
    The only remarkable change is that, now, the ancestor to be
    used is calculated (using the same way it was previously) and
    only then all the checks begin (including the branch aging ones
    that previously were executed always for the moodle.git ancestor).

commit e31859841b7a9014761378d3825ec714fd95ff40
Author: Dan Poltawski <dan@moodle.com>
Date:   Tue Sep 23 15:03:49 2014 +0100

    MDLSITE-2712 allow checks against integration

commit de4d58e74b403e52eb37d5e80d070989b6131165
Merge: b589477 9bed2b8
Author: Eloy Lafuente (stronk7) <stronk7@stronk7.com>
Date:   Fri Nov 28 12:56:37 2014 +0100

    Merge pull request #35 from danpoltawski/MDLSITE-3252-third-party
    
    MDLSITE-3252 check for third party library modifications

commit 9bed2b8a0fb5f2ca65bbc4a155201c5db2aee48b
Author: Dan Poltawski <dan@moodle.com>
Date:   Thu Nov 27 17:47:45 2014 +0000

    MDLSITE-3252 check for third party library modifications
    
    This check will try and find modification to third party libraries
    and warn about them if the thirdpartylibs.xml or readme_moodle.txt has
    not been updated.

commit b589477b5097d52989e31e74b20e4cc881c3d667
Merge: d1e9606 a9f1f7f
Author: Dan Poltawski <talktodan@gmail.com>
Date:   Thu Nov 27 18:47:38 2014 +0000

    Merge pull request #34 from stronk7/MDLSITE-3423
    
    MDLSITE-3423 ci: improved CiBoT notifications

commit a9f1f7fef0235882b5d72a2a3ad8a0ecd8f1b6ac
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Thu Nov 27 19:27:46 2014 +0100

    MDLSITE-3423 ci: improved CiBoT notifications
    
    - details for every check
    - direct links to smurf file
    - colors
    - some stuff reorganized
    - ...

commit d1e9606c83e0803fe44f3076683da24381463173
Author: Dan Poltawski <dan@moodle.com>
Date:   Thu Nov 27 10:17:51 2014 +0000

    NOBUG: fix bad handlign of whitespace

commit 59a6db8588d7675eb47e473ec4006e58128ed3a3
Merge: 9cf4f6a 8c8a0f7
Author: Eloy Lafuente (stronk7) <stronk7@stronk7.com>
Date:   Wed Nov 26 22:18:24 2014 +0100

    Merge pull request #32 from danpoltawski/MDLSITE-3651
    
    MDLSITE-3651 Add php_lint to prechecker

commit 8c8a0f7c142d2b6fd4e7a212ae58a55043a29f50
Author: Dan Poltawski <dan@moodle.com>
Date:   Wed Nov 26 21:09:08 2014 +0000

    MDLSITE-3651 - fix php warning

commit ea3d2430f1800fc93460687a8d8eceebf8855b6f
Author: Dan Poltawski <dan@moodle.com>
Date:   Wed Nov 26 20:33:19 2014 +0000

    MDLSITE-3651 enable some checks to disable filtering of results
    
    * And add line number to php_lint so it'll be linked to the file
    * Disable filtering of php_lint results - as filtering could mask some
      things unintentionally.

commit d6cd13e33f00dab96f538cc40e40a31017c58066
Author: Dan Poltawski <dan@moodle.com>
Date:   Wed Nov 26 14:39:51 2014 +0000

    MDLSITE-3651 Add php_lint to prechecker

commit 9cf4f6a9e7a50fa95a46c5f04016c2589a90d0d6
Merge: 925708a 8bb10d0
Author: Eloy Lafuente (stronk7) <stronk7@stronk7.com>
Date:   Wed Nov 26 19:46:21 2014 +0100

    Merge pull request #30 from danpoltawski/MDLSITE-3645
    
    MDLSITE-3645 Link to sourcecode when can

commit 8bb10d056306cd8559936719df50db14ca31bb0d
Author: Dan Poltawski <dan@moodle.com>
Date:   Wed Nov 26 18:34:25 2014 +0000

    MDLSITE-3645 small fix to the commit url template
    
    1) Only use the commit url template when its defined
    2) Use the same naming scheme as the diffurl

commit 15aa77f5f80d6a2000830e8dd65378313e2a1adf
Author: Dan Poltawski <dan@moodle.com>
Date:   Tue Nov 25 18:55:04 2014 +0000

    MDLSITE-3645 support diff urls when we can
    
    * Links to the source files for most problems
    * Links to commits for commit message problems

commit 925708ae9bab6c608f3d27f2e966f0e00fd06956
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Wed Nov 26 17:00:56 2014 +0100

    MDLSITE-3423 ci: bye, bye SMURFILE hash.

commit f64468cb4b55ab7c76b51f51bb5b00b964f5a99f
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Tue Nov 25 17:57:55 2014 +0100

    MDLSITE-3423 ci: condensedresult for communication with caller.

commit 34f14c4d6f0f004809f62ddd0dc1731f9203f59b
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Fri Nov 21 01:06:13 2014 +0100

    MDLSITE-3423 ci: add some extra information to formats
    
    In order to improve the results in Jira, we need to
    add some extra information (ids, classes...) to both the
    xml and html smurf formats for easier access.
    
    This covers:
    - calculation of the summary section.
    - applied to both xml and html formats.
    - enforce the generation of xml format unconditionally.
    - get rid of the "details" collapsable section.
    - minor anchor-navigation improvements.

commit db57bdafa4f41db29ebac1c6c3e167c3e2fc31df
Merge: 017ccb5 196dd89
Author: Eloy Lafuente (stronk7) <stronk7@stronk7.com>
Date:   Tue Nov 25 18:30:17 2014 +0100

    Merge pull request #29 from danpoltawski/MDLSITE-3647
    
    MDLSITE-3647 - fix csslint when only ignored css files found

commit 196dd89a10ee1cadedf0290b9afd0a9c1c046685
Author: Dan Poltawski <dan@moodle.com>
Date:   Tue Nov 25 16:42:50 2014 +0000

    MDLSITE-3647 Send error message to errorfile

commit f91f3410bc4d9780c41a61232f896db648fd3c0a
Author: Dan Poltawski <dan@moodle.com>
Date:   Tue Nov 25 16:23:46 2014 +0000

    MDLSITE-3647 - fix csslint when only ignored css files found

commit 017ccb54cb745cee2d927203984de8ca638a4bce
Merge: 1cc70ab e9cd870
Author: Eloy Lafuente (stronk7) <stronk7@stronk7.com>
Date:   Mon Nov 24 11:25:50 2014 +0100

    Merge pull request #28 from danpoltawski/MDLSITE-3612-ignore-fix
    
    MDLSITE-3612 fix for lack of ignore config

commit e9cd8709207c51d2be010a005ef6c7320bb5e8fe
Author: Dan Poltawski <dan@moodle.com>
Date:   Mon Nov 24 10:06:12 2014 +0000

    MDLSITE-3612 fix for lack of ignore config
    
    In fallback error checking - will not be a problem when MDL-48277 lands

commit 1cc70ab7d4b71aaaed52038bc21cb46b5d415d9a
Merge: 381d633 48afb52
Author: Eloy Lafuente (stronk7) <stronk7@stronk7.com>
Date:   Thu Nov 20 19:43:06 2014 +0100

    Merge pull request #27 from danpoltawski/MDLSITE-3612-csslint
    
    MDLSITE-3612 - support csslint checking of CSS

commit 48afb520366a055440d3bf326206ebd66a2fa059
Author: Dan Poltawski <dan@moodle.com>
Date:   Thu Nov 20 17:46:56 2014 +0000

    MDLSITE-3612 improve smurf.html display a bit
    
    * Rearrange CSSlint ordering
    * Reduce excess whitespace so it doenst need much scrolling
    * Reduce size of headers
    * Remove <hr> to seperate errors and warnings because it doesn't make
      as much sense with all the different sections on the page
    * Add bold to the summary of error numbers - because I never noticed
      this summary was the totals for all sections before..

commit 06140426916f6eb3f398b20a83414312d3e721eb
Author: Dan Poltawski <dan@moodle.com>
Date:   Tue Nov 18 19:56:03 2014 +0000

    MDLSITE-3612 - support csslint checking of CSS
    
    Since it reports in checkstyle format we can use existing reporting
    mechanisms.

commit 381d63306e7d6ec57d77816df363183b89108664
Merge: e91eeea 4e3a1a9
Author: Eloy Lafuente (stronk7) <stronk7@stronk7.com>
Date:   Mon Nov 17 18:49:23 2014 +0100

    Merge pull request #26 from danpoltawski/MDLSITE-3608
    
    MDLSITE-3608 php_lint: fix error handling on difference compairsons

commit 4e3a1a9f506f1a6d9776739c138987e869dc66c9
Author: Dan Poltawski <dan@moodle.com>
Date:   Mon Nov 17 17:27:19 2014 +0000

    MDLSITE-3608 php_lint: fix error handling on difference compairsons
    
    Previous error handling relied on non-strict error checking

commit e91eeea646d1d2874d382e96e576c74cb83252a6
Merge: 8817e87 7d85ac7
Author: Eloy Lafuente (stronk7) <stronk7@stronk7.com>
Date:   Thu Nov 13 21:49:10 2014 +0100

    Merge pull request #24 from danpoltawski/MDLSITE-2003
    
    MDLSITE-2003 php lint checker

commit 7d85ac74f4568611f1b6a6409d323c13e38686b8
Author: Dan Poltawski <dan@moodle.com>
Date:   Thu Nov 13 11:04:57 2014 +0000

    MDLSITE-2003 - php syntax checker
    
    To avoid syntax erors in the codebase. Note that this just runs lint
    against the current state of the files in the codebase. We could do
    something cleverer with git to checkout the contents of the file from
    each commit, but in the end this way is simpler and doing less work and
    checks the current state of the repo - so its probably no bad thing.
    
    Also detect BOM characters (thanks to Matteo for the suggestion)

commit 8817e87d79da6ff67dab211afdc7343031cfad27
Author: Dan Poltawski <dan@moodle.com>
Date:   Thu Nov 13 19:38:12 2014 +0000

    MDLSITE-2102 fix broken 'good' hash..

commit c28ecf856c559f5314e9e606ec80ab038d52ee58
Author: Dan Poltawski <dan@moodle.com>
Date:   Thu Nov 13 19:34:54 2014 +0000

    MDLSITE-2102 add extrapath for node environment

commit 88d17eb73c551a092e8aecc85f5f7b5df1d94308
Author: Dan Poltawski <dan@moodle.com>
Date:   Thu Nov 13 19:19:01 2014 +0000

    MDLSITE-2102 exclude built yui directories from jshint checks

commit 9503a16c8a728520d17d02ed187f0d57c3d3e074
Author: Dan Poltawski <dan@moodle.com>
Date:   Thu Nov 13 17:46:30 2014 +0000

    MDLSITE-2102 - support jshint checking of javascript
    
    Since it reports in checkstyle format we can use existing reporting
    mechanisms.

commit 4e0a06ae941a2bf1d067186edc9b1c396f79da4d
Merge: 20568b6 b205fa5
Author: Dan Poltawski <talktodan@gmail.com>
Date:   Wed Nov 5 10:05:32 2014 +0000

    Merge pull request #23 from stronk7/master
    
    NOBUG: Avoid a notice caused by undefined $CFG->libdir

commit b205fa51ed8d47f7dcd2e2369ff637c98717cbd6
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Tue Nov 4 19:53:45 2014 +0100

    NOBUG: Avoid a notice caused by undefined $CFG->libdir
    
    MDL-47195 introduced a new PSR0 autoloader and a new
    requirement, needing libdir to be defined. This patch
    just fulfills that new requirement.

commit 20568b6e8ef0b15728ce05838dc6400684b52c9e
Merge: 0cf6359 2665c34
Author: Dan Poltawski <talktodan@gmail.com>
Date:   Thu Oct 30 10:19:19 2014 +0000

    Merge pull request #22 from stronk7/MDLSITE-3538
    
    MDLSITE-3538 commit checker: disable some merge-commit checks

commit 2665c343592a0316231e3dfe1fc8c649741aa055
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Thu Oct 30 10:39:26 2014 +0100

    MDLSITE-3538 commit checker: disable some merge-commit checks
    
    We don't want to enforce any branch naming schema, so merge
    commits don't need to match the MDL issue anymore, as was
    planned originally @ MDLSITE-1990.
    
    So putting that under the control of a new, disabled by default,
    new parameter.

commit 0cf6359e2b0670bf10c175c7e06a71c508389791
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Tue Oct 7 01:20:02 2014 +0200

    Revert "MDLSITE-3413 ci: get rid of last comment date"
    
    This reverts commit 8cc1e0c84bedd7d5ffcac3e87d1945e2e82bb168.

commit e2b14302f1fe32e673bf6b7d5732061fdba326ed
Merge: cd3ee37 6681b81
Author: Dan Poltawski <talktodan@gmail.com>
Date:   Fri Oct 3 16:22:01 2014 +0100

    Merge pull request #21 from mudrd8mz/commit-message-first-line
    
    Do not count the trailing newline char when checking for the line length

commit 6681b816495c354d2b2332a1335c180cbbeb04e5
Author: David MudrÃ¡k <david@moodle.com>
Date:   Fri Oct 3 17:16:10 2014 +0200

    Do not count the trailing newline char when checking for the line length
    
    As a simple test, use the first line of this commit. It should report 72
    characters.

commit cd3ee3706a5941ac92a97967e1a414f301d0f665
Merge: f2bd553 9da2a89
Author: Dan Poltawski <talktodan@gmail.com>
Date:   Thu Oct 2 00:12:35 2014 +0100

    Merge pull request #20 from stronk7/master
    
    NOBUG: issue is not mandatory anymore.

commit 9da2a891531f6fba8734dee33f5245a287ae411c
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Thu Oct 2 01:02:48 2014 +0200

    NOBUG: issue is not mandatory anymore.
    
    Left it defined that way by mistake. Getting rid of now.

commit f2bd5534b0d4eaa906a194c905e94bdc29183b60
Author: Dan Poltawski <dan@moodle.com>
Date:   Tue Sep 30 11:21:23 2014 +0100

    MDL-47195 add exception for lib/horde

commit 6e477dac62323f7efbdd3e384de89a5a4330ea7e
Author: Dan Poltawski <dan@moodle.com>
Date:   Tue Sep 23 12:30:12 2014 +0100

    MDLSITE-3420 increase commit limit for developer checks
    
    While keeping a lower limit for issues sent for integration

commit 224f06db35d86b8b9e6774220de7ea0bfadece3a
Merge: 78fa405 beae782
Author: Dan Poltawski <talktodan@gmail.com>
Date:   Mon Sep 22 08:53:22 2014 +0100

    Merge pull request #19 from stronk7/master
    
    MDLSITE-3422 ci: Various improvement to smurf files

commit beae78241a2f18181d7c53c654407990b19391d1
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Mon Sep 22 02:10:52 2014 +0200

    MDLSITE-3422 ci: Various improvement to smurf files
    
    This commit solves/improves these:
    
    XML:
    - Added "numerrors" and "numwarnings" attributes to every check.
    - Added grand totals for the above to the <smurf> element.
    
    HTML:
    - Show the new totals from the XML.
    - Group problems by file, clearly separanting them.
    - Difference errors (red) and warnings (orange).
    - Cleverer handling of line numbers.
    - Dim the "details" section to make it less prominent.
    
    And, of course, update the hash-hack to detect 100% correct results
    (note this will be replaced by a better solution in MDLSITE-3423)

commit 78fa4059652e47317c3131c5ec9c263d19931296
Author: Dan Poltawski <dan@moodle.com>
Date:   Thu Sep 18 16:50:40 2014 +0100

    Fix checksum of 'OK' smurffile
    
    Caused by a90ca902edf :)

commit 8cc1e0c84bedd7d5ffcac3e87d1945e2e82bb168
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Wed Sep 17 18:16:13 2014 +0200

    MDLSITE-3413 ci: get rid of last comment date
    
    Temporarily this field has been disabled in the Tracker
    (because of some incompatibility). That has caused the
    bulk checker to stop working completely.
    
    Getting rid of the field seems to be the only solution
    to keep them working. Ideally we'll revert this commit
    once the field is available again.

commit a90ca902edff7e314712ef8860c362699f380be3
Author: Matteo Scaramuccia <moodle@matteoscaramuccia.com>
Date:   Wed Sep 17 09:45:43 2014 +0100

    MDLSITE-1990 fix plural issue

commit d2e23ea4404856d5085c5cd12949c63e19bd83a3
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Wed Sep 17 01:11:43 2014 +0200

    MDLSITE-1990 ci: enforce checkstyle generation.
    
    Before this, both the savepoints and the commit checkers were
    generating and empty .xml checkstyle file. In the other side,
    both the code checker and the phpdocs checker were always
    generating their .xml files.
    
    That caused the former ones to not be present in the final smurf
    files always, making it hard to use a constant checksum to look
    for perfect issues (no warnings and no errors).
    
    So, now... those .xml files will be always created, no matter they
    don't contain any problem.

commit a5b2bc2978f502de73cd3190d1e2ed30a56925c7
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Tue Sep 16 02:35:48 2014 +0200

    MDLSITE-1990 ci: Integrate into results file
    
    - Moved the already existing savepoints checker to the end of the report.
    - Added the commit checker to the report.
    - Minor tweaks to allow 0-lines to pass the filtering always.
    - Added new atteribute "type=error|warning" to the smurf xml (will need it later).
    - Updated the checksum to detect problem-free reports.

commit df250cb89f1db10617729317c62bf4ec0d73990a
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Mon Sep 15 02:45:57 2014 +0200

    MDLSITE-1990 ci: Integration with prechecker.

commit 0caac9f55c6b90246e3f12caba45794ab88638e0
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Mon Sep 15 01:38:58 2014 +0200

    MDLSITE-1990 ci: Add checkstyle converter.

commit 9088128d89970d02e34099a57fc33956b4e87534
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Mon Sep 15 00:57:08 2014 +0200

    MDLSITE-1990 ci: 1st cut of the checker
    
    TODO: Integrate it in the pre-checker

commit 78e05d9be85f43b078bb579e6d4a92e2ce707561
Merge: b0c217f b01a35d
Author: Dan Poltawski <talktodan@gmail.com>
Date:   Tue Jul 29 18:24:25 2014 +0100

    Merge pull request #17 from stronk7/master
    
    NOBUG: Simple cleanup

commit b01a35dd9a6ffa35d9b521bff9cd45494e94c6bc
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Tue Jul 29 19:04:44 2014 +0200

    NOBUG: Simple cleanup
    
    This commit just moves the calculation of the components some lines
    above, so we keep the 2 real check areas:
    
    - checks requiring the whole code base.
    - checks working against the changed files.
    
    properly isolated. 1st step towards introducing the new "framework"
    to specify, run and report new "pluggable" checks. Coming soon.

commit b0c217ffafe099b7e33625e4136805e59ad73f6f
Author: Dan Poltawski <dan@moodle.com>
Date:   Thu Jul 24 16:16:39 2014 +0100

    NOBUG make style of failure reports more consistent with code issues

commit fd5dc0e55a556682c22217f1c5dff3060bb09b7a
Author: Dan Poltawski <dan@moodle.com>
Date:   Thu Jul 24 16:07:12 2014 +0100

    MDLSITE-3257 failure not reported by cibot
    
    * Typo corrected causing the line not to be output
    * Also tweaked the message a bit

commit 08a2404d826960d0b505ab1018ae5544eeda98d5
Author: Dan Poltawski <dan@moodle.com>
Date:   Fri Jul 18 12:14:56 2014 +0100

    MDLSITE-2966 tweak testing instruction message

commit 3c8f3e41cdcd4202dc1f079866d1499ce11d3a32
Merge: 788624e c0b1426
Author: Eloy Lafuente (stronk7) <stronk7@stronk7.com>
Date:   Thu Jul 17 18:29:37 2014 +0200

    Merge pull request #16 from danpoltawski/MDLSITE-2966
    
    MDLSITE-2966 add check for testing instructions

commit c0b14268f438674e92f40115f9d94328ef92abf3
Author: Dan Poltawski <dan@moodle.com>
Date:   Thu Jul 17 13:38:15 2014 +0100

    MDLSITE-2966 add check for testing instructions

commit 788624eb99dcb766a7b7310c75c80f47ecee21af
Author: Dan Poltawski <dan@moodle.com>
Date:   Thu Jul 17 13:23:44 2014 +0100

    MDLSITE-2662 fixed link capitlisation

commit a0446c7e8a5693c19a8c78460724bd654fbf06db
Author: Dan Poltawski <dan@moodle.com>
Date:   Thu Jul 17 13:02:43 2014 +0100

    MDLSITE-3233 dan poltawski sucks!!!

commit 13fae04b6cc161c7e0ac688aadc6714709ea192f
Author: Dan Poltawski <dan@moodle.com>
Date:   Thu Jul 17 12:58:33 2014 +0100

    MDLSITE-3233 add informative link to code checker report

commit 172bb2b47e7305c9aabbf217543be6ab02bbe378
Merge: 101f6f5 ece21c1
Author: Dan Poltawski <talktodan@gmail.com>
Date:   Mon Jul 14 10:11:41 2014 +0100

    Merge pull request #15 from danpoltawski/MDLSITE-3233
    
    MDLSITE-3233 - fix message from cibot when repo not found

commit ece21c1d337b3b69a8141d9ff4277353334f0355
Author: Dan Poltawski <dan@moodle.com>
Date:   Mon Jul 14 08:55:58 2014 +0100

    MDLSITE-3233 - fix message from cibot when repo not found
    
    (Also made more cases get the -1 and error x)

commit 101f6f580dc62181af6263a52ff944d9af566cfe
Merge: f87fe3d 7636c49
Author: Eloy Lafuente (stronk7) <stronk7@stronk7.com>
Date:   Fri Jul 11 11:30:02 2014 +0200

    Merge pull request #14 from danpoltawski/MDLSITE-2689
    
    MDLSITE-2689 Reword a bit the messages from CiBoT

commit 7636c4923e6167f28387e2c9a63d0e048f220aa4
Author: Dan Poltawski <dan@moodle.com>
Date:   Fri Jul 11 10:25:13 2014 +0100

    MDLSITE-2689 make branch part less noisy
    
    Linking the whole branchname with a useful 'diff' url

commit c50cd1f892a1c596f5ab7a0be83ad9cd345ba66e
Author: Dan Poltawski <dan@moodle.com>
Date:   Wed Jul 9 22:54:03 2014 +0100

    MDLSITE-2689 improve the prechecker wording a bit
    
    I'm hacking hacking hacking here..
    
    * Capture the full job output using the jira client
    * Grep that output to find out if the smurf file detected any problems
    * Display a different message depending on the circumstances

commit 184cdf0d9fe50299ed1a8a2725f6aead19c47b5f
Author: Dan Poltawski <dan@moodle.com>
Date:   Wed Jul 9 19:38:35 2014 +0100

    MDLSITE-2689 determine if coding style problems detected
    
    I just use a checksum of the 'blank' file here to determine it, which is a
    great big hack, but quicker than refactoring the checker at this stage.

commit f87fe3db22d18563dd31e1233860e210fa0529f1
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Wed Jul 9 19:35:05 2014 +0200

    MDLSITE-3221 use local_codechecker if available
    
    If the local_codechecker is installed, give it preference
    to any execution of the coding_standards_detector.php job.
    
    Only if it's not available the pear-installed alternative
    will be used.

commit fc535a21fa80f201de40171461e47e9ed680730e
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Mon Jun 30 00:50:05 2014 +0200

    MDLSITE-3200: Accept extra config.php to be injected.
    
    This will enable optional configurations like testing
    alternative cache stores or using as default store for test runs.

commit 9a043866521af495d9afb11312aebe661ef8142d
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Fri May 9 02:56:23 2014 +0200

    MDL-45486 Handle different versions separately
    
    Now the setter accepts 2 different versions to be
    used, one for versions (setversion) and another for
    dependencies/requires (setrequires). The later defaults
    to the former.
    
    That way we can bump all versions to major release date
    while keeping all dependencies pointing to a recent, already
    released version (usually some RC).
    
    At the same time, some other improvements are landing with
    this change like:
    
    - Better handling of comments in dependencies.
    - Better handling of git repos ignored/excluded.

commit c576db28d85d52ca8ea0aac057e65ea67a816a8a
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Fri May 9 01:20:11 2014 +0200

    NOBUG: Clean comments in dependencies.

commit c8e14ebb2b7ffa9e582edb5af50d40d023c0f602
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Fri May 9 00:36:07 2014 +0200

    NOBUG: Require less parameters to run.
    
    Only old branches require mysql connection to
    fetch list of valid components. Require them
    only when needed.

commit b05a861a50b86a019c4b3ef7d83efdb0694f2b22
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Fri Apr 11 18:33:03 2014 +0200

    NOBUG: Handle moodle.git clones internally.
    
    With this change the job does not need the
    presence of the git plugin defined anymore.
    
    Right now it was more an obstacle than a help
    because it had to be configured strangely (pointing
    to a old branch/commit), to avoid it leading to
    the job own operations in the git repo.
    
    So, with this change the job itself manages both the
    initial clone and the cleaning before proceeding with the checks.

commit eca266268bbe305300950750c0b38ec8a5317431
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Wed Apr 9 03:06:13 2014 +0200

    NOBUG: Verify previous executions to decide.
    
    With this change the run_conditionally script
    looks within the $WORKSPACE and, if there is
    not a results file present or if the results file
    has errors, returns with exit code 0, so the
    compare job cannot be skipped.

commit aa295fae059174eae18badfb7618e8b2d369e0e9
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Tue Apr 1 12:43:31 2014 +0200

    MDLSITE-2913 First cut. WIP.

commit 4764c262d63b6c0ec5aeffa95985b8c658b66fe9
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Thu Mar 27 01:52:31 2014 +0100

    MDLSITE-2915 Add support for builtin recess compiler

commit f380827d8a44eac721231ddc7933fe0be1145fd4
Author: Marina Glancy <marina@moodle.com>
Date:   Wed Mar 26 10:29:11 2014 +0800

    NOBUG: add Rangy to excluded 3rd party libraries

commit 713687b289e5d3ab8162daa9dbdad9fa8e4c25fa
Merge: f69247c efda15c
Author: Dan Poltawski <talktodan@gmail.com>
Date:   Tue Mar 25 07:50:14 2014 +0800

    Merge pull request #13 from samhemelryk/lessphp
    
    Added lib/lessphp to the list of excluded dirs

commit efda15cb0a9948d02b753c0f8116eb991d89767f
Author: Sam Hemelryk <sam@moodle.com>
Date:   Tue Mar 25 10:43:49 2014 +1300

    Added lib/lessphp to the list of excluded dirs

commit f69247c80d78600fbd7ad8b8936dea850ee820de
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Mon Mar 17 19:02:15 2014 +0100

    MDLSITE-2885 Add information along the progress

commit a63b659b6206b17cb455f8a73a0d7a6f81a2928b
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Mon Mar 17 18:33:18 2014 +0100

    MDLSITE-2885 Always recreate the link.
    
    This may help in situations where a new clone is based
    in a previous branch or something is renamed. Not usual
    in production, but in development environments.

commit 3f8c760cc487d8ab06d08dd8f59cd0cbfd74aec5
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Mon Mar 17 18:13:00 2014 +0100

    MDLSITE-2885 Specify the exact php executable to use.
    
    In sites with multiple PHP versions installed, composer
    may end picking the incorrect executable. Let's always
    prioritize the one we use in CI ($phpcmd) via PATH.

commit 442d81feccca0d3a56a92cef585107645bc799f7
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Mon Mar 17 18:00:14 2014 +0100

    MDLSITE-2885 Link to dirroot/vendor
    
    We have some built-in dependencies in our tools requiring vendor
    to be within dirroot, so soft-linking out custom vendor will
    provide that, grrr.

commit e7cad09064a81e3fcbc3918624839161d72454f8
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Mon Mar 17 17:39:15 2014 +0100

    MDLSITE-2885 Run phpunit form composer.

commit a6e1706e2b69eba50204bee44e636518361cf812
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Mon Mar 17 17:32:38 2014 +0100

    MDLSITE-2885 Install composer into alt directory
    
    This script will automatically install and update
    the composer stuff as specified by Moodle's composer.json
    keeping it out from the dirroot/vendor and installing it
    into another alternative path, to avoid it being cleaned
    for every build.
    
    Any other script requiring composer stuff (phpunit, behat for now)
    will have to execute this script and, magically, the executables
    will be available for them.

commit 176fa4487d15b0b04641f4177767314dbe6f6532
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Fri Mar 14 18:54:32 2014 +0100

    MDLSITE-2882 look for exceptional stuff in output
    
    Apart from looking for any exception, debugging, stack trace
    along the execution of the script, we are also looking for
    any information in output not being part of the standard
    progress report (lines of dots with some numbers and % at the end).
    
    This should allow us to detect anything incorrect, sent
    with error_log() and friends (both to standard and error output).

commit 4fdf3ce381e6e75433f635c69f7cad814621da32
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Mon Feb 3 00:12:01 2014 +0100

    MDLSITE-2749 precheck: handle delete-only patches

commit b3073b987ac2f6e8708eada0a5c27f4afcac98b7
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Wed Jan 29 19:06:30 2014 +0100

    MDLSITE-2720 Enforce "plugin" for 2.7 and up
    
    Before 2.7, it was allowed to use both "module" and "plugin"
    in module activities. For 2.7 and up we only accept "plugin"
    in core. Note that for non-core module activities "module" will
    be allowed (deprecated) up to 2.10. No matter of that, we report
    any "module" use as error here.

commit d5d6499964009dd39c74e9d5d8412898d2997239
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Wed Jan 29 02:05:59 2014 +0100

    NOBUG: Support both $module and $plugin for modules.

commit 9ffa7acb6770e815c84f0c960c72ac3237db1b58
Merge: 533a601 5bc2095
Author: Eloy Lafuente (stronk7) <stronk7@stronk7.com>
Date:   Thu Jan 23 06:49:54 2014 -0800

    Merge pull request #12 from danpoltawski/clear-tester-on-move-to-integration
    
    Clear tester on move to current integration

commit 5bc209558b06668297652348d78be950474baff4
Author: Dan Poltawski <dan@moodle.com>
Date:   Thu Jan 23 13:36:46 2014 +0800

    Clear tester on move to current integration

commit 533a6012e04799506c0e5bccc2b6bd8bcc4f59a5
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Wed Jan 22 23:53:29 2014 +0100

    MDLSITE-2714 All criteria to clean the cime label
    
    Before this, it was possible for the chain of precheckers
    to pick the same issue more than once, if the "cime" label
    was added to an issue sent to peer review or integration.
    
    With this change, he "cime" label is always cleaned by all
    criteria so no dupe executions are possible anymore.

commit 24849126064626261ed43e0d35602a9d52fab3af
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Tue Jan 21 20:15:44 2014 +0100

    MDLSITE-2699 replace path the one being checked.
    
    Before this change, the script was returning paths
    belonging to the moodle site containing the local_ci
    plugin, instead of paths of the git repo being checked.
    
    This only was affecting 2.5 and previous, because for those
    versions is when we need the real site. For 2.6 and upwards
    getting components can happen without any site installed.

commit 2bcb939c320d63ffeeb9e5534bf3d1eb565e0e6b
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Mon Jan 20 21:09:01 2014 +0100

    MDLSITE-2694 prechecker. Fix "agood" typo, lol.

commit 234110d1978610b52af166828b7ce97edf52bdf3
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Mon Jan 20 17:51:30 2014 +0100

    MDLSITE-2688 Add a comment to the move to current

commit 663b7bc4b6031b38c85393bd28ad2ab296f72ab9
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Mon Jan 20 12:49:48 2014 +0100

    MDLSITE-2694 prechecker. Rebase limits now params.
    
    This moves the currently harcoded rebase limits (warn
    and error) to be params.
    
    At the same time some other params now have sensible defaults
    applied and all the required variables are checked to be defined.

commit ba8845f6e4b7631275d530d69359f496f6b71b62
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Mon Jan 20 03:28:30 2014 +0100

    MDLSITE-2688 Add the bulk-mover to integration.
    
    This adds the mover to current integration that:
    
    - Cleans the Integrator field.
    - Cleans the Integration date field.
    - Sets the Currently in integration field.
    - Removes the "ci" label (so bulk "awaiting-integration" will catch them).

commit 615558bae93d1d9386f8c6d47d0957cb1d263dda
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Thu Jan 9 01:47:17 2014 +0100

    MDLSITE-2690 Get rid of token logins everywhere
    
    Once checked that the bulk-checker is working ok without
    token logins, this commit applies the same change to
    all the other tracker jobs.

commit 3e4ae5bb13b08ea5e81a7e0be18f4c3958f9033b
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Thu Jan 9 01:25:25 2014 +0100

    MDLSITE-2690 Get rid of token logins in the bulk-checker
    
    It's causing problems by locking the cibot account
    randomly and only works for SOAP apis, so any action
    using REST apis will fail (and REST is the future of Jira).

commit c31f79e1c8113fe0ef8ad068503fb5d2216d656a
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Tue Jan 7 19:48:24 2014 +0100

    NOBUG: Upgrade jira-cli to 1.546

commit 048819d7d6e18a22ba042eb3ce8de3cbfdbef105
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Fri Jan 3 13:03:14 2014 +0100

    MDLSITE-2678 remove the "ci" label for wip issues
    
    Every time an issue is sent back to development (from
    peer-review or from integration), we are going to remove
    the "ci" label to cause the issue to be pre-checked again
    next time it's sent to peer review or integration.

commit c1b2f754c3477a2ddea87a9ad82905391d315584
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Sun Dec 29 18:53:17 2013 +0100

    MDLSITE-2665 CS will only check .php files for now

commit a81a19f1dbb340ef9404a7d0bbe70e15056d2422
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Sun Dec 29 16:36:30 2013 +0100

    MDLSITE-2664 Send feedback to the tracker on error
    
    There are some small checks built in the bulk checker
    detecting basic errors (missing repository, no branches...)
    and they, right now, are preventing the Tracker to get
    notified about them (information only remains @ jenkins).
    With this change, the tracker will be notified, so everybody
    knows about those basic mistakes.
    
    NOTE: This commit also includes some small changes to output.

commit 60d66019fa04809578f38324fd358393049e72a4
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Mon Dec 23 16:51:44 2013 +0100

    NOBUG: Restrict comments to integrators.
    
    While we advance a bit on prechecker improvements, when
    non-quiet operations are selected for awaiting integration
    issues, we restrict comments to integrators. Results will help to:
    
    1) integrate the issue.
    2) discover things to be added to the prechecker.

commit f455819c5ce1b5231b1cb7b821b40e2f5e1fea6f
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Fri Dec 20 16:30:00 2013 +0100

    NOBUG: Improve display of errors coming from the branch checker.

commit ea270568f0759b3d4c791f4a9bced64e2ed451c8
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Wed Dec 18 19:44:33 2013 +0100

    NOBUG: Skip security issues from the bulk checker.
    
    They don't contain branches to be inspected (patches are used),
    so no much to check automatically there.

commit b961c700f44ed2984d7772c6f34ecaa1e9f06a4c
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Mon Dec 16 02:44:34 2013 +0100

    NOBUG: Fixes getting subsystems.
    
    - Now core returns the dirroot path.
    - All subsystems (but core) are core_ prefixed.

commit ca150b7642f484fd59a89d1a3e16d6f89db6dc89
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Thu Dec 12 21:34:15 2013 +0100

    NOBUG: Split processing server url and publish one.
    
    It has been detected that pointing to the public URLs of the
    jenkins servers leads to stream problems when the jenkins-cli
    is controlling the execution of jobs. Instead it must use
    the "direct" url so communications aren't broken. In the other side,
    the publish URL is needed to spread results out there, allowing any
    developer to connect and watch results.
    
    Also integration_held issues have been excluded from both the
    peer-review and awaiting-integration lists.

commit 31641001bddb3ecbdbbbdd8460287ec8f17beb53
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Thu Dec 12 21:32:48 2013 +0100

    NOBUG: Control the max number of commits allowed.
    
    Main reason for that is to avoid crazily / incorrect
    branches to be processed by the checker, halting everybody else.

commit b77d55a67e38a6a143ba3a24895a47b44a6830fa
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Thu Dec 12 19:51:33 2013 +0100

    NOBUG: Upgrade jira-cli to 1.543.

commit af4fe11b17464dabd1d14d1fc14e0af60b13fd51
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Mon Nov 25 00:56:03 2013 +0100

    MDLSITE-2635: Decide if the job can be skipped
    
    This script looks for the changes between 2 commits
    and matches the changed files against an array of rules.
    
    If there is any match, then the job cannot be skipped (exit
    status = 0). If there isn't any match, then it's
    safe to skip the tests (exit status = 1).

commit d7680512f862a3576220d79197b0a80078a57fa9
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Thu Nov 21 02:40:36 2013 +0100

    MDLSITE-2635: list the changed files between 2 commits

commit c9656edab2e17cd5c5a4ba35b7b986ad35984659
Merge: c42c7af 974d97f
Author: Eloy Lafuente (stronk7) <stronk7@stronk7.com>
Date:   Wed Nov 20 07:18:15 2013 -0800

    Merge pull request #11 from stronk7/master
    
    MDLSITE-2623 Improve the components list for >=2.6

commit 974d97f6f752773606af6eaa54a59e014efcbfbd
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Tue Nov 19 02:30:23 2013 +0100

    MDLSITE-2623 Improve the components list for >=2.6
    
    Since 2.6 we can use the core_component class plain and straight
    without requiring a complete site to be installed. Let's use it,
    that will save some precious minutes on each iteration. Also will
    benefit the prechecker (previously always using the moodle-ci-site
    list of components).

commit c42c7aff3c6e69154dc8171a5ef313a85068718c
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Sat Nov 16 18:51:00 2013 +0100

    NOBUG: Give 15d to stable version check.
    
    It always happen that the backup version check
    for stable begins failing when a new branch and jobs
    are created. As far as it's not critucal, we are giving
    it 15 days before tart failing (that will fall to normal
    post-release weeks)

commit 96c209e976311e1fb5c44a39c88d21d687841197
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Wed Oct 30 00:20:12 2013 +0100

    NOBUG: Moving to native phploc

commit 75f77a9e92a529e028af9e9402e5eaad1b54553b
Merge: 6ceb5e7 7f0826c
Author: Damyon Wiese <damyon@moodle.com>
Date:   Tue Oct 29 01:16:54 2013 -0700

    Merge pull request #10 from damyon/ignore_shifter_whitespace
    
    NOBUG: Do not check shifter build results for whitespace

commit 7f0826ce62476bd85eb9915200ccee466408cc35
Author: Damyon Wiese <damyon@moodle.com>
Date:   Tue Oct 29 15:55:25 2013 +0800

    NOBUG: Do not check shifter build results for whitespace

commit 6ceb5e7e178c0426b1c24085308cae245f278928
Merge: fc4202e 0d70054
Author: Eloy Lafuente (stronk7) <stronk7@stronk7.com>
Date:   Mon Oct 7 03:33:58 2013 -0700

    Merge pull request #9 from damyon/detect_stale_shifted_files
    
    NOBUG: Delete all shifted files before running shifter

commit 0d7005426fde43fb520f21648acbc4c7ef2676a9
Author: Damyon Wiese <damyon@moodle.com>
Date:   Mon Oct 7 16:12:09 2013 +0800

    NOBUG: Delete all shifted files before running shifter
    
    This will let us detect stale files sitting in the build dir.
    Handily - there are some there already that can be used to check this patch.

commit fc4202e23db50b1cb71a26f5e5efa02cdef5517d
Author: Damyon Wiese <damyon@moodle.com>
Date:   Thu Oct 3 11:19:52 2013 +0800

    MDL-42023 Assign: Add fpdi library to excluded list

commit b2116bb05df0c247562170fb70417e5adbc166fa
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Tue Sep 24 23:31:08 2013 +0200

    NOBUG: Once the test has run, delete local/ci
    
    Since 2.6 version.php files are expected to be present
    for all the plugins installed. This test copies some scripts
    to gitdir/local/ci in order to execute stuff with the site
    installed using that gitdir.
    
    Once the test ends, we need to delete local/ci or phpunit
    tests will detect it as a "wrong" (missing version.php) plugin.

commit 45007059e1e4433a099b54986a318630781c2696
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Tue Sep 24 12:09:03 2013 +0200

    NOBUG: Exclue the new (2.6 and up) markdown lib.

commit afe1799ab6838ca0050bfb94e975896409e1b542
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Thu Sep 12 03:06:47 2013 +0200

    MDLSITE-2490 Add /vendor to list of excludes

commit 9d05d048b3ce35e02181467c5e054fad19f1d817
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Tue Sep 10 04:22:49 2013 +0200

    NOBUG: Prechecker continues using the moodle-ci components.
    
    Can be considered to move to real components (those available
    in the target branch), but that requires to install a Moodle
    instance, adding a noticeable execution penalty (>1 min) to the
    checker.

commit e8c48ab5d16c8aced26107eac851c50781016bea
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Tue Sep 10 03:02:05 2013 +0200

    NOBUG: Run the script against installed site.
    
    Before this change, the script was being executed
    from the moodle_ci_site by hacking CFG->dirroot and
    reseting caches, so plugin information was gathered
    from an uninstalled site.
    
    After this change, the shell script creates a real
    site and the php script is executed from that just
    created site. So the list of plugins is 100% real.
    
    Is slower, but the only way to get it 100% accurate.

commit 45e5286c49539ac3a027c75b338068f6f5a7ac2c
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Sat Jul 27 05:13:48 2013 +0200

    MDLSITE-2287 add txt to criteria postissue actions

commit 50ed6e403d6c75b501630a6a916c5273a490e880
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Sat Jul 27 05:07:55 2013 +0200

    MDL-40883 wipe the workspace for each run

commit e03cba5c8cdec8dd3948803337a67da067ce8d85
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Sat Jul 27 04:50:36 2013 +0200

    MDLSITE-2287 add txt ext + conditional details

commit 475cf3d2d2fd35b4761a4f67f67e393593d3045e
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Sat Jul 27 04:31:04 2013 +0200

    MDLSITE-2287 detect too old branches

commit d15a1a930bdd0f3146d5c4f95e39a0e449328113
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Sat Jul 27 04:29:44 2013 +0200

    MDLSITE-2287 first cut of bulk checker

commit dc3024ff8ff42e16767f43c2dc07e68992b45d12
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Sun Jul 21 18:46:23 2013 +0200

    Just reorganizing before some changes.

commit d9f77a5519ebd20f69fe6846c806fb739bbb120e
Author: Damyon Wiese <damyon@moodle.com>
Date:   Tue Jul 9 15:39:31 2013 +0800

    MDL-37565 Add tinymce pdw plugin to the excluded list

commit 94e851bb1799509e23afad7f8a25e62da7ab257a
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Mon Jul 8 18:47:21 2013 +0200

    Reset core_component caches before asking for components
    
    Now local_ci requires Moodle 2.6dev (201307104) so the new
    core_component stuff is available always.
    
    No matter of that we continue using the old (deprecated in 2.6
    and upwards) get_plugin_types|subsystems|...() calls. Some day we'll
    move to the new methods available within core_component.
    
    But the key change here is that, via inheritance, we add a reset() method
    able to clean the static caches built in the class, so the nasty hack of
    forcing dirroot will continue working and the components will be returned
    properly.
    
    Personally I'm not happy with this solution (double-hack), but it's the fastest
    one I've been able to achieve. In the future we should, somehow install
    the site properly, ask for the list of components and store it into some "work"
    directory so other jobs can reuse it. But not today. :-(

commit dd275cbce5b518214f8ae8e7a7dc59e566e2a104
Author: Damyon Wiese <damyon@moodle.com>
Date:   Mon Jul 8 15:20:56 2013 +0800

    Revert "NOBUG: attempted fix for list_valid_components."
    
    This reverts commit 992bfa85e0349d2028da95252007078969317ba5.
    
    (Reverting this because it didn't fix anything).

commit 992bfa85e0349d2028da95252007078969317ba5
Author: Damyon Wiese <damyon@moodle.com>
Date:   Mon Jul 8 14:32:41 2013 +0800

    NOBUG: attempted fix for list_valid_components.
    
    This is not failing on my local jenkins, but on integration
    and stronk7 it is reporting the wrong directory as the prefix for the
    plugins (the local_ci dir - not the master branch dir).
    
    Testing to see if setting dirroot before clearing the cache fixes this.

commit 3824321399306665a7038107cae7584e2f1fb890
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Mon Jul 8 02:37:19 2013 +0200

    MDLSITE-2287 Switch to html format.

commit 077b4e54be92d756fcd2d8bcb22cbd43fbacbdc7
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Mon Jul 8 01:31:35 2013 +0200

    MDLSITE-2216 Enable the moodlecheck execution

commit b399530a0cfa5da2beeaf77f242785a1f93443f5
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Wed May 1 17:49:56 2013 +0200

    NOBUG: ignores now used both by checker and setter
    
    The list of version.php files to ignore was harcoded
    both in the checker and the setter and, when executing
    the setter @ MDL-39434 it was detected that the list
    had become out of sync.
    
    This change just unifies the list of ignores (regular
    expression under $gitdir) and applies it both to the
    checker and the setter.

commit 556106f0be03c4d648c879e37479a5f9a67f8737
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Mon Apr 29 16:08:00 2013 +0200

    MDL-39260 Improve a bit the non-matching message

commit 0da6adfd3184266b1ccbf867671939392c9b6cfd
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Mon Apr 29 16:00:09 2013 +0200

    MDL-39260 No need for "bootstrap" exception.
    
    "bootstrap" directory (containing the original bootstrap product)
    is already under the "less" directory, so it does not need any
    exception. Sure I was blind when looking for it. Thanks David
    for detecting it.

commit 2c6cf92f22f4b65b6093014fc1b79785be619fa1
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Mon Apr 29 12:49:56 2013 +0200

    MDLSITE-2209 First cut of recess checker
    
    This job will validate all themes given
    a git based tree, looking for basic
    information (version.php, styles...) and
    later, for all the themes containing main
    .less files, will verify that their .css
    counterparts are on sync (by recompiling
    and compressing them using recess).

commit a3dd03eaf120d3e818621e3b582e4b8881319829
Author: Dan Poltawski <dan@moodle.com>
Date:   Fri Apr 26 10:24:43 2013 +0100

    MDL-39341 bootstrap fix exclude with rename

commit 6309f8915bc52d3e8f9a1287aae4b8b89956402c
Author: Dan Poltawski <dan@moodle.com>
Date:   Wed Apr 17 12:58:50 2013 +0100

    MDL-39087 - fix typo in last commit

commit f907b1ee13b58ddee32cbe54d90b07e8cbcc3a66
Author: Dan Poltawski <dan@moodle.com>
Date:   Wed Apr 17 12:53:42 2013 +0100

    MDL-39087 - don't check broken plugin fixtures

commit 667efafc1ca4527a1715d058c56f4083085ad48d
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Tue Apr 16 01:09:20 2013 +0200

    MDLSITE-2216 moodlecheck: stop it until fixed.

commit 95b0843bcd8ac48be02c93bda7c66056f352cb6f
Author: Damyon Wiese <damyon@moodle.com>
Date:   Mon Apr 15 12:26:34 2013 +0800

    MDL-38904 Remove exclusion for bootstrap js
    
    Bootstrap uses a yui gallery module with a single whitespace error.
    The module is no longer maintained so is not likely to be updated -
    since MDL-38904 moved the js and I would have had to update CI anyway,
    I just fixed the whitespace error and am removing the exclusion from ci.

commit 3869b6bd7dc9da16df8d93e30a67c88a02452a38
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Sat Apr 13 23:03:53 2013 +0200

    NOBUG: Changing trouble empty choice to "no/yes".

commit 5dce40a1d2bb78682c65ac9e9641d25a88f07487
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Fri Apr 5 00:51:19 2013 +0200

    MDLSITE-2100 ci: need to checkout from detached upgrade HEAD

commit 69005cfcf6eeb0e6659e4324bb83efc5badb7701
Merge: af5cbb7 51d6f63
Author: Eloy Lafuente (stronk7) <stronk7@stronk7.com>
Date:   Thu Apr 4 13:39:56 2013 -0700

    Merge pull request #8 from stronk7/MDLSITE-2100
    
    MDLSITE-2100 ci: never reset to origin, can contain newer commits

commit 51d6f63e314a6af19c5d80320baba5246d9f2bd1
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Thu Apr 4 22:33:34 2013 +0200

    MDLSITE-2100 ci: never reset to origin, can contain newer commits
    
    All the jobs that are chained per branch cannot be reset to
    their origin/xxxx counterpart because it's possible that the
    git poll already had incorporated commits for the next run. So
    the reset is performed to local branch and done.
    
    Note that the git poll itself is configured to renew the local
    branches once the next run starts (not before, poll knows that
    it has to wait until the whole chain ends before renewing local
    branches).

commit af5cbb7228833f91e4ac74b479132ceda24c6e91
Author: Dan Poltawski <dan@moodle.com>
Date:   Wed Apr 3 13:43:12 2013 +0800

    MDL-38509 - don't detect version files in fixtures

commit 525ebe7634480e36c77ae16c57d8672788fb7795
Author: Dan Poltawski <dan@moodle.com>
Date:   Wed Apr 3 11:55:30 2013 +0800

    MDL-38509 - Add a whitespace exception

commit c5b186d5b1a7a1572e77daa87ca9f643901c62d9
Author: Damyon Wiese <damyon@moodle.com>
Date:   Wed Apr 3 10:08:02 2013 +0800

    MDL-38016: Add excludes for thirdparty libs in bootstrap theme.

commit dfa50dd53de11e2c1922ebb2b888fbca0bb04a04
Merge: 29a1054 02b921e
Author: Dan Poltawski <talktodan@gmail.com>
Date:   Tue Apr 2 08:19:47 2013 -0700

    Merge pull request #7 from stronk7/MDLSITE-2184
    
    MDLSITE-2184 ci: reset caches to get fresh list of components

commit 02b921ed1454b94ba8fd587627701b8cf1e6383f
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Tue Apr 2 17:10:58 2013 +0200

    MDLSITE-2184 ci: reset caches to get fresh list of components

commit 29a105477678e22e9595033dd9d8757f7976aa6a
Author: Damyon Wiese <damyon@moodle.com>
Date:   Tue Mar 26 16:31:51 2013 +0800

    MDL-38650: Jquery mobile (Change to exlude entire folder)
    
    Was trying to be too specific before but it didn't work.

commit 8efb65bbd1fbe72f42cc81f2db54a762de922a0c
Author: Damyon Wiese <damyon@moodle.com>
Date:   Tue Mar 26 09:53:23 2013 +0800

    MDL-38650: Jquery mobile library moved to new folder

commit 2db3da18d5232a0bf128678a7d164649734078a1
Author: Damyon Wiese <damyon@moodle.com>
Date:   Mon Mar 25 13:36:20 2013 +0800

    MDL-15727: Add lib/jquery to excludes

commit 49a473f945647434d20fb49aee952f26b98f2ba5
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Wed Mar 20 23:23:51 2013 +0100

    MDLSITE-2155 install, run and report shifter results

commit 4eae5c2957819427677b2a6121667954857813cf
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Wed Feb 20 19:18:48 2013 +0100

    MDLSITE-2127 Do not use trailing slashes for $excluded_list
    
    Recently a bunch of utilities (phpcpd, phploc) changed to
    Symfony's Finder that does not allow trailing slashes at the
    end, so we are trimming all them for $excluded_list that is
    onlu used by those utilities.

commit 4816e3bd630bccee46bd3c2e4d6c0a443c1dcff5
Merge: 60e1cc9 c001e6c
Author: Dan Poltawski <talktodan@gmail.com>
Date:   Tue Feb 19 04:43:33 2013 -0800

    Merge pull request #6 from stronk7/MDLSITE-2127
    
    MDLSITE-2127 Support recent phploc versions.

commit c001e6c25decac4fe32b701d9fe1c99f8382d260
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Tue Feb 19 11:54:08 2013 +0100

    MDLSITE-2127 Support recent phploc versions.

commit 60e1cc9f6b37fc292093691185bf09d0eaa52ebb
Author: Damyon Wiese <damyon@moodle.com>
Date:   Tue Feb 19 14:25:23 2013 +0800

    MDL-37217 Add lib/google to excludes

commit 61d83be664821e83cf72ca662ccef9d2e6b25271
Author: Dan Poltawski <dan@moodle.com>
Date:   Tue Feb 19 11:02:04 2013 +0800

    Revert "MDL-38040 exclude some fixtures from tests"
    
    Fix for MDL-38051 incoming.
    
    This reverts commit 402ac743b300f5d59e723a51c01f9a16065afc6f.

commit 402ac743b300f5d59e723a51c01f9a16065afc6f
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Fri Feb 15 02:11:00 2013 +0100

    MDL-38040 exclude some fixtures from tests

commit c31d0bdc4d15c9dbf39c14e1f5b453978a167982
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Fri Feb 15 01:32:22 2013 +0100

    MDL-38040 Detect CRLFs by the illegal whitespace job.

commit 17bf8ace4e51101208b8613b91dacd5aa00449a5
Merge: 465285b 71c5e2f
Author: Eloy Lafuente (stronk7) <stronk7@stronk7.com>
Date:   Mon Feb 11 00:36:07 2013 -0800

    Merge pull request #5 from danpoltawski/password-compat-fix
    
    MDL-35332 - exclude lib/password_compat/ from checks

commit 71c5e2fc31515af12da8a1cf8fb4d99a6e5f2f4d
Author: Dan Poltawski <dan@moodle.com>
Date:   Mon Feb 11 15:06:41 2013 +0800

    MDL-35332 - exclude lib/password_compat/ from checks
    
    Its a third party library

commit 465285bf5b6899901633dbf37dd72365cf69121d
Merge: bd893af 5bd6e8b
Author: Dan Poltawski <talktodan@gmail.com>
Date:   Sun Feb 10 18:49:14 2013 -0800

    Merge pull request #4 from stronk7/MDLSITE-2096
    
    MDLSITE-2096 Detect unit test files having multiple classes.

commit 5bd6e8b247d2db5b23a10d845e0eec2ae37bbc6d
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Sat Feb 9 16:31:32 2013 +0100

    MDLSITE-2096 Detect unit test files having multiple classes.

commit bd893aff07a3a6e79c5a03db177c80bfb949c2e6
Merge: b9f909b d5da835
Author: Dan Poltawski <talktodan@gmail.com>
Date:   Wed Feb 6 04:49:49 2013 -0800

    Merge pull request #3 from stronk7/MDLSITE-2101
    
    MDLSITE-2101 Skip tests dirs wo unit test files

commit d5da835da24bd6a733869fd2be1d0402ea4fb651
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Wed Feb 6 12:14:45 2013 +0100

    MDLSITE-2101 Skip tests dirs wo unit test files

commit b9f909bd06ce64079d71262e7697943124721fbb
Merge: e2f5629 a4aeb6a
Author: Dan Poltawski <talktodan@gmail.com>
Date:   Mon Feb 4 04:31:43 2013 -0800

    Merge pull request #2 from stronk7/MDLSITE-2114
    
    MDLSITE-2114 - Delete 20_STABLE from local_ci scripts

commit a4aeb6ac80b71d1ea1100df43dcbd6f43f622aa8
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Mon Feb 4 12:55:15 2013 +0100

    MDLSITE-2114 - Delete 20_STABLE from local_ci scripts

commit e2f56296d187d4abfe302fdc4fc61ee1aaa4dfdd
Author: Dan Poltawski <dan@moodle.com>
Date:   Tue Jan 29 18:31:33 2013 +0800

    MDLSITE-2101 temp-add blocks/tests

commit f5a37397486c7ff4847ee68dc5f562504fd636e4
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Tue Jan 29 10:26:51 2013 +0100

    MDLSITE-2101 temp-add auth/tests

commit a1f2addb84a5abf424ba3ea011cba5da35ce3319
Merge: efbc309 a25349a
Author: Dan Poltawski <talktodan@gmail.com>
Date:   Thu Jan 24 19:15:03 2013 -0800

    Merge pull request #1 from stronk7/master
    
    MDLSITE-2094: Look for some more strings on phpunit output

commit a25349abdf0d63349016e913b84a45843a68cd61
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Fri Jan 25 01:01:05 2013 +0100

    MDLSITE-1972 Detect tests not covered by phpunit.xml

commit 97d5f2fc93b43aacc5dabef150cb6550c2460a73
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Thu Jan 24 23:39:10 2013 +0100

    MDLSITE-2094 look for debugging calls on execution

commit efbc3099c4d8c6ad633de3ad8b7930f49f44ac9e
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Tue Jan 8 22:48:30 2013 +0100

    Add lib/phpexcel to the excluded dirs.

commit 4aad04779b537685d62a479ae4904e3985361b20
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Fri Nov 30 03:55:29 2012 +0100

    NOBUG: Bump version and add missing string

commit 4fc85ff58dcfde9f1c6761c70310a6d6e51c0da9
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Fri Nov 30 03:25:17 2012 +0100

    MDL-36933 codechecker is codechecker

commit 8ed1c7ce8d3fea22163a66496ff6b37c06765331
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Fri Nov 30 03:10:37 2012 +0100

    MDL-36933 grrr, git versions, git versions
    
    Note the --short option is only available in 1.7.10 and up,
    switching to shellish alternative.

commit 260f00afd9652abe97ffb672e6493bc78d2cf28d
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Fri Nov 30 03:02:08 2012 +0100

    MDL-36933 Avoid updating some contrib local plugins

commit 74101eadf7b34f0f5c414a8b1da9da7c428a9e16
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Fri Nov 30 02:56:01 2012 +0100

    MDL-36933 Support backup version and release.
    
    - Verify they exist with proper format.
    - Verify they match main version and release.
    - Set version to the specified one.

commit cea5339343ad53b3931375e70733277bb7c48f51
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Fri Nov 30 02:01:10 2012 +0100

    MDL-36933 Improvements to the version check
    
    - check ordered by depth
    - exclude local/[ci|codecheck|moodlecheck] plugins
    - verify main release, branch and maturity are correct
    - verify all requires are satisfied

commit 079bb31a57f03bec28c679111b111691db47e19c
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Thu Nov 29 17:47:07 2012 +0100

    MDLSITE-2019 Fix string to new job meaning

commit 35a457254e3b5f8666d4b8e0f5a3af7cb0b472ed
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Thu Nov 29 17:32:27 2012 +0100

    MDLSITE-2019 Count test-failed issues per cycle

commit bfd0fabcfbd99a42525e12060f4448f6f0172ae3
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Thu Nov 29 16:53:55 2012 +0100

    NOBUG: Set the correct transitions.
    
    With current workflow, only these transitions
    can lead to accountable reopenend issues:
    
    - Integration review in progress => Reopened.
    - Problem during testing => Reopened.
    
    So we are only going to look for them.

commit 1db8cb5a3925084b48492e1a5786116a3025a8da
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Fri Nov 23 11:04:54 2012 +0100

    NOBUG: Change the time to be moved down to 1h
    
    That way, more reopenend issues will be caught
    before the developer changes the status from
    Reopened to any other.

commit de531b2fa75378fa99da3ba76c635169add3bdce
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Fri Nov 23 10:45:09 2012 +0100

    MDLSITE-2005 Use FROM...TO for transitions search
    
    Before this we were looking for independent statuses
    since a given date, leading to false positives (my fault).
    
    Now we are looking for proper transitions using the CHANGED FROM TO
    constructor, that I'm not sure why was ignored by me previously, grrr.

commit a1b21b2b88b963ee7184aa8f64f7d82ad79a28e8
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Fri Nov 23 10:06:52 2012 +0100

    MDLSITE-2005 Waiting for Inte => Reopened ignored
    
    Take out the Waiting for Integration => Reopened transition
    because it was leading to a lot of false positives being
    counted. It's really a pitty not being able to specify, in
    historic searches, any custom field, like "Currently in integration".
    
    So, once applied, this job will look, exclusively for these
    "transitions" since last integration cycle was closed:
      - Integration in progress => Reopened
      - Waiting for testing => Reopened
      - Passed => Reopened
      - Failed => Reopened
      - Tested => Reopened

commit 605ec04a99aa03bb3d11329843ac0d8ae527072a
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Sat Nov 17 13:36:19 2012 +0100

    MDLSITE-2005 fix cut use. Not working ok under linux.

commit 705b788e7d59b80fe5d9606c8c019e765482593b
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Sat Nov 17 12:55:32 2012 +0100

    MDLSITE-2005 Fix for supporting whitespaces on paths

commit 4948018400c5351655cb5649b09b7004971b9e9e
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Sat Nov 17 12:45:56 2012 +0100

    MDLSITE-2005 new job to automate the reopened counter

commit cb7581be6b4c0a4f3037bc5eee685e4f37fd96fb
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Fri Nov 16 17:09:24 2012 +0100

    NOBUG: Fix "jirasever" typo.

commit ddd5a2da9ac94b2bb5c019eb78c02142aae39385
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Wed Nov 14 20:46:00 2012 +0100

    HQ-326 Keep the build number in the run display name

commit e8f5e34fecb102a7a508243a387d6d2adb0c902c
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Wed Nov 14 17:54:10 2012 +0100

    NOBUG: Remove duplicate drop sentence left by error.

commit 7cc35a31db9c1161668c0e21d8056c9f3cb0bdb5
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Wed Nov 14 17:31:41 2012 +0100

    HQ-326 Reference to the issue in the README as a possible guide

commit 313bb1c63aaccacfc3f6227df9c47f5aa4952bda
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Wed Nov 14 12:59:07 2012 +0100

    HQ-326 Only allow localhost connections for moodle/jenkins users.

commit 48e53e07eb8d2e03bf2618892cb4949963ffaff1
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Wed Nov 14 02:57:18 2012 +0100

    HQ-326 Moodle + Jenkins init script
    
    This scripts perform all the actions needed to get one
    default jenkins server ready to work with moodle ci checks
    creating all the directories, databases, database users and
    the moodle ci site instance.
    
    It's safe to execute it multiple times as far as every action
    is verified before execution.
    
    Take a look to the comments in the script to know the requirements
    and the environmental variables needed.
    
    It can be executed manually or from within Jenkins. The later, the
    recommended. Take a look to the "Initial Jenkins Moodle Setup" job
    in Moodle integration ci servers.

commit 80bbe9edd9d82dfd666e3809f760ad65f3b23d35
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Mon Nov 12 16:35:56 2012 +0100

    Test Site Auto-Upgrade.

commit 85ed9d85098cb98c3b5ca47f64d1114c59ab171d
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Mon Nov 12 12:34:34 2012 +0100

    HQ-325 ci: Moving to own repository. Minor bits.

commit 707aeb47ed8da70759cd74d8a6fd5b7d518de1a6
Author: Dan Poltawski <dan@moodle.com>
Date:   Wed Nov 7 14:29:08 2012 +0800

    MDLSITE-1982 - fix whitespace check for tabfile.csv

commit 8ce791e7d37fc6af3e3c9092d042783e9b71c64f
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Tue Nov 6 10:37:04 2012 +0100

    Prevent some extensions to be processed by the whitespace (and other) checkers

commit b9d6ef3efc647cb10501be740dcd7074bfc7e2fe
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Wed Sep 19 23:01:26 2012 +0200

    More taking rid of mysql harcoded commands.

commit 1b2be36f1223bf01f846299cec7f657810d62514
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Wed Sep 19 22:49:03 2012 +0200

    Take rid of any mysql harcoded command.

commit 707ef24f9e69b566dc60b9de1bfcdcd93c38bc2d
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Mon Aug 27 14:54:27 2012 +0200

    Store both the .txt and the .xml of the savepoints checker.

commit a10a02f8aabcc8bf202d8480b1405a15c37056d2
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Mon Aug 27 13:48:31 2012 +0200

    Instrospect version.php only if available.

commit 25f0a3dc200d20a2bf767ddbd599e672cf7218b0
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Mon Aug 27 13:47:26 2012 +0200

    Better debugging & exit on error hadling. Messed by previous commit.

commit 61aa947858b2b86dc3edd8bd7b0b2de3bc424675
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Sun Aug 26 20:06:56 2012 +0200

    Disable debugging output -> clearer console

commit 19184959732adfcff3d84574c771322603d47a2b
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Sun Aug 26 13:45:31 2012 +0200

    Take rid of local path

commit 153562fbaaa24d78f206d6679add06bd33b75c54
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Sun Aug 26 13:38:39 2012 +0200

    Better env handling and comment out some tests for speed

commit 72c7f537dbf74b61e717c15ed6c649e61e445456
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Sun Aug 26 02:17:51 2012 +0200

    Add support for postgresql db to the phpunit check.

commit b3a2a3cadf3cb116318d459d92a835fc943385e0
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Wed Aug 15 20:08:09 2012 +0200

    Better handling of multiple matches per line.

commit 59eb13fdb484f4c92b2c5a1533a80be06d491df2
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Tue Aug 14 11:10:24 2012 +0200

    Tidy yui/tinymce excluded dirs.

commit 659a6202354146af231bf49d4980733d1bc6b5f8
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Fri Jun 29 03:24:46 2012 +0200

    Added some more checks. Conditionally, for 2.3 and upwards.
    
    - Looking for 'return true;'
    - Looking for function definitions (commented until MDL-34103 is fixed)

commit 49b3b7e1b7a4c2781f26301db36e4e5d60e7a0fa
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Sun Jun 24 17:04:01 2012 +0200

    Verify mod and block versions don't have decimal part.

commit 153e727d5b87fe11bf9bc2c93088bb6a75a91dac
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Mon Jun 18 03:59:55 2012 +0200

    Avoid updating main version.php. Manual update required there.

commit fc677ce945fde20879b3d0b53409132e8071a079
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Mon Jun 18 03:23:24 2012 +0200

    New checker, able to verify and set all the version.php files

commit 821ffc92a3176490dc29e056bd7792986bc2a05a
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Thu Jun 7 22:48:03 2012 +0200

    Moving from updateIssue to progressIssue
    
    Sort of workarround to avoid having some fields in the "edit" page (default screen)
    plus one more hack editing the transition in the Tracker (html hacking)
    because of https://jira.atlassian.com/browse/JRA-25002 (to be fixed in 5.x)

commit d829c7d5dd639bb477a35cc3fccd20a63690792f
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Wed Jun 6 23:01:05 2012 +0200

    Automated job to send reopened issues out from current integration.

commit ea1c08f6d440e4b36cc1eeeeb7063792ef4b3edf
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Fri May 25 10:19:25 2012 +0200

    Skip using the cli generator under 20 and 21 stables. It's not working.
    
    It never has been, but recent changes to improved error handling have
    caused the problem to be better detected, leading to failure. So now
    we are explicity skipping the generator under 20 and 21 stables.

commit 29693c0635f34533172ed007e9812bbb9ee08901
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Fri May 25 03:18:56 2012 +0200

    Split dataroot & datarootphpunit
    
    Not sure why but this was not failing in the Mac Jenkins server
    but using the same dataroot was (correctly) detected by linux
    Jenkins server as an erroneous situation.

commit bb46b21952ef93fc3fe72753f3524af6d0557e26
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Fri May 25 01:49:36 2012 +0200

    Add support to phpcmd + better error handling to phpunit check

commit e789dd8ffc383b521f3dbfdf1c23e429d7fc16a7
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Fri May 25 00:59:00 2012 +0200

    Add support to phpcmd + better error handling to simpletest check

commit b879d2d77e66ad255c88d964575776588c161ba3
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Thu May 24 15:48:44 2012 +0200

    Support $phpcmd & non-strict execution

commit 3d77c65a606166b1f6d2796284777bb85e700ec8
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Thu May 24 02:53:35 2012 +0200

    Support $phpcmd & strict execution

commit 7dccb1f5060652e66cd4ee61796484ab7c7c0e8a
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Sat May 5 20:15:43 2012 +0200

    Adding missing parenthesis and better regexp

commit e891f24ea0cce65181e5a6b5a3af7ab6ad17948d
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Wed Apr 25 13:05:36 2012 +0200

    Added the --no-edit option to avoid commit msg editor. New default behaviour since git 1.7.10
    
    Note this should not affect this utility when executed by the CI server, because git
    detects if it's being run in interactive mode or no. But we explicity set it to avoid
    problems if executed manually.
    
    More info: http://git-blame.blogspot.co.uk/2012/02/updates-to-git-merge-in-upcoming-1710.html

commit 00999fd3cc062acb27304424528d7c377d1a65de
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Tue Apr 24 01:35:26 2012 +0200

    Inspect output looking for stack traces. Any will lead to failed execution.

commit e0dee93e0c15fc5c8c3356ec21401ffa01068fbf
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Mon Apr 23 10:21:13 2012 +0200

    Require filelib that previously was being added by one test, now deleted

commit f7155f97f8246909841006785a25ef1fec18af1c
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Thu Apr 12 05:20:22 2012 +0200

    Added initial support for phpunit execution (based on config.php template)

commit 781b22d671713a6ccc18ac30c95ec6128538d3d9
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Thu Apr 12 05:17:39 2012 +0200

    Change a bit the simpletest naming schema

commit ad1b9068cc68e4f17aa654f9eb31184c8aac3d2c
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Wed Apr 4 04:22:03 2012 +0200

    Exclude wiki fixtures, they are txt

commit 2bf8961186c8c4a3a30a08398fd585400c042213
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Mon Apr 2 11:03:38 2012 +0200

    Support both old and new simpletest APIs

commit 2f7c72f938ca5eabb69d02f797059fc901b700a7
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Thu Mar 29 13:13:24 2012 +0200

    Handle debug levels so we get "normal" debugging before 2.3
    and E_STRICT included one under 2.3 and upwards

commit 449b371b98d5c9db0c5156ff650697f854b584fa
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Wed Mar 28 19:01:55 2012 +0200

    Change debug to include E_STRICT

commit 88d3415e1e9946df5b4c0a7912ca44cc2526bad1
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Tue Feb 28 14:44:19 2012 +0100

    Sort types in reverse order, so we get subplugins before plugins

commit 2436683304d36b5e1cc6c2a5750dd2bd738ecebc
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Mon Feb 6 00:48:42 2012 +0100

    Better zip handling and calculated list of component for phpdocs checker

commit 5f1ba10ea07b70537135b006d4b08fc7cf291025
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Sun Feb 5 13:27:15 2012 +0100

    Return all subsystems, no matter they have directory or no

commit b99a2811af2d3dcef188c823ff689fe7cbe63cba
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Sun Feb 5 13:16:03 2012 +0100

    The jenkins CLI, to launch/rename/control jobs programatically

commit a4b08b8694a8898cc5e416f58866703f76fcdf79
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Sun Feb 5 13:14:21 2012 +0100

    Delete some not used pasted lines

commit 742b4cd0cc7fc6af61f083b27869b7a489590379
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Sun Feb 5 13:13:36 2012 +0100

    Add "work" to be excluded always

commit d57701322500bb6c977e3c7243789cb471768cf7
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Sun Feb 5 13:12:50 2012 +0100

    New CLI to fetch all valid components for a given dirroot

commit fe109f7c5fcd55f4d8d6a229e422a902a9ba3872
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Tue Jan 31 17:02:10 2012 +0100

    Whitespace

commit b144469dfcdc12e8f087074e6ead59cbd778326c
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Tue Jan 31 17:01:21 2012 +0100

    Set jenkins displayname to the issue + branch

commit 577b157732bc433ed0e81af80aa1e13abcef7975
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Tue Jan 31 00:35:50 2012 +0100

    zip the patches together

commit c9eeeff91e807a7690aa38d5b1efd2fdb2b9cddf
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Mon Jan 30 21:28:20 2012 +0100

    Moved xsl sheet out from code to dir

commit 68b48308e7a8eb28429212e9017b66a93817152e
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Mon Jan 30 13:37:22 2012 +0100

    More switching from admin to local

commit 0e07142d8cb4843ff9808763354591496f90c9cf
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Mon Jan 30 12:56:27 2012 +0100

    Switched from admin/ci to local/ci

commit d6802fc184c05ae8d4d3b593f7ed330114cc872a
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Mon Jan 30 12:38:43 2012 +0100

    Added support for optional filtering

commit dbb951dd41c64a5f261f5376470d795ba772be97
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Mon Jan 30 12:09:52 2012 +0100

    First cut of the SMURF reporter + filtering

commit b22b3dbe27308e7d6424d1bdb5cc67f7fb56888f
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Mon Jan 30 12:08:21 2012 +0100

    Call to the smurf reporter

commit a29c75cedfba11c129c76987a4a879710b3c2434
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Sun Jan 29 03:36:44 2012 +0100

    Running all checks, towards unify reporting

commit 5d0b36c629c6920f967510c9d45829ea37e340de
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Sun Jan 29 03:25:31 2012 +0100

    Simple conversor to checkstyle format, for easier handling

commit 37a75fb2af59718ce60f08cde84ee04711c5207d
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Sat Jan 28 12:39:17 2012 +0100

    Addded some initial checks

commit 605be6c20ac348f719c1b6fa67fe3ce131bb309f
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Fri Jan 27 19:06:04 2012 +0100

    remote branch checker, 1st commit. to kept it safe.

commit 8b357403a1d12822adb8582f08888101e950fffe
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Fri Jan 27 18:48:03 2012 +0100

    add category/package/subpackage phpdocs

commit add3bfa3a813b9cbf8136e9ef614f9384e247132
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Fri Jan 27 17:23:50 2012 +0100

    Clarify comment

commit 3603ac078ccfbaaf7e6892a24f1d123ef5a81c33
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Fri Jan 27 17:20:33 2012 +0100

    Clear temp dataroot directories

commit 16ed97d5134fd1b1f353f62caf158374a98a717b
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Thu Jan 26 00:11:12 2012 +0100

    Handle deleted files properly

commit 9969703699a1b715bf384dbc69f2de21e1397a01
Author: Eloy Lafuente (stronk7) <stronk7@moodle.org>
Date:   Wed Jan 25 19:39:31 2012 +0100

    Move all the ci stuff to local
