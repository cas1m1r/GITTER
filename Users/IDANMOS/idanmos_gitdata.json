{
  "logs": [
    "/home/cas1m1r/GITTER/Users/IDANMOS/idanmos.git.WebCarRental"
  ],
  "username": "idanmos",
  "repos": {
    "WebCarRental": {
      "commits": [
        "027833bd2e9013f84e916b8d8612001c7bd7a6de",
        ""
      ],
      "files": [
        "SANDBOX/WebCarRental",
        "\u251c\u2500\u2500 add_car.php",
        "\u251c\u2500\u2500 api.php",
        "\u251c\u2500\u2500 car_rent.sql",
        "\u251c\u2500\u2500 CommonInterface.php",
        "\u251c\u2500\u2500 DatabaseInterface.php",
        "\u251c\u2500\u2500 favicon.ico",
        "\u251c\u2500\u2500 index.php",
        "\u251c\u2500\u2500 login.php",
        "\u251c\u2500\u2500 main.php",
        "\u251c\u2500\u2500 profile.php",
        "\u2514\u2500\u2500 register.php",
        "",
        "0 directories, 11 files",
        ""
      ],
      "branches": [
        "* main",
        ""
      ],
      "changes": {
        "027833bd2e9013f84e916b8d8612001c7bd7a6de": [
          "commit 027833bd2e9013f84e916b8d8612001c7bd7a6de",
          "Author: Idan Moshe <idanmos@gmail.com>",
          "Date:   Sat Mar 26 00:57:32 2022 +0300",
          "",
          "    Add files via upload",
          "",
          "diff --git a/CommonInterface.php b/CommonInterface.php",
          "new file mode 100644",
          "index 0000000..60b2073",
          "--- /dev/null",
          "+++ b/CommonInterface.php",
          "@@ -0,0 +1,14 @@",
          "+<?php",
          "+",
          "+    function return_error($error_message) {",
          "+        header('HTTP/1.1 403 Forbidden', true, 403);",
          "+        header('Content-Type: application/json');",
          "+        die(json_encode(array(\"success\" => false, \"data\" => $error_message)));",
          "+    }",
          "+",
          "+    function return_success($success_message) {",
          "+        header('HTTP/1.1 200 OK', true, 200);",
          "+        header('Content-Type: application/json');",
          "+        die(json_encode(array(\"success\" => true, \"data\" => $success_message)));",
          "+    }",
          "+?>",
          "\\ No newline at end of file",
          "diff --git a/DatabaseInterface.php b/DatabaseInterface.php",
          "new file mode 100644",
          "index 0000000..3fc64f9",
          "--- /dev/null",
          "+++ b/DatabaseInterface.php",
          "@@ -0,0 +1,223 @@",
          "+<?php",
          "+",
          "+    require_once './CommonInterface.php';",
          "+",
          "+    class DatabaseInterface {",
          "+        const debug = true;",
          "+",
          "+        public function __construct() {",
          "+            try {",
          "+                $this->MySQLdb = new PDO(\"mysql:host=localhost;dbname=car_rent\", \"root\", \"\");",
          "+                $this->MySQLdb->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);",
          "+            } catch (PDOException $exception) {",
          "+                echo \"Connection Error: \".$exception;",
          "+            }",
          "+        }",
          "+",
          "+        public function GetMySQLdb() {",
          "+            return $this->MySQLdb;",
          "+        }",
          "+",
          "+        /*",
          "+        * CheckErrors - if debug mode is set we will output the error in the response, if the debug is off we will be redirected to 404.php",
          "+        */",
          "+        public function CheckErrors($e,$pass = false) {",
          "+            if ($pass == true) return true;",
          "+",
          "+            if (self::debug){",
          "+                die($e->getMessage());",
          "+            }",
          "+            else {",
          "+                // return error if there is something strange in the database",
          "+                return_error(\":)\");",
          "+            }",
          "+        }",
          "+",
          "+        public function login($userName, $password) {",
          "+            try {",
          "+                $cursor = $this->MySQLdb->prepare(\"SELECT * FROM users WHERE userName='\".$userName.\"' AND password='\".$password.\"'\");",
          "+                $cursor->execute();",
          "+            } catch(PDOException $e) { //SQL injection",
          "+                $this->CheckErrors($e);",
          "+            }",
          "+            ",
          "+            if($cursor->rowCount() && $cursor->rowCount() > 0) {",
          "+                $cursor->setFetchMode(PDO::FETCH_ASSOC);",
          "+                return array(\"success\"=>true,\"data\"=>$cursor->fetch());",
          "+            } else {",
          "+                return array(\"success\"=>false,\"data\"=>\"Wrong Username/Password!<br>\");",
          "+            }",
          "+        }",
          "+",
          "+        public function register($userName, $password) {",
          "+            try {",
          "+                # Check if the username is taken",
          "+                $cursor = $this->MySQLdb->prepare(\"SELECT `userName` FROM `users` WHERE `userName`=:userName\");",
          "+                $cursor->execute( array(\":userName\"=>$userName) );",
          "+            } catch(PDOException $e) {",
          "+                $this->CheckErrors($e);",
          "+            }",
          "+",
          "+            /* New User */",
          "+            if(!($cursor->rowCount())){",
          "+                try {",
          "+                    $cursor = $this->MySQLdb->prepare(\"INSERT INTO `users` (`userName`, `password`) VALUES (:userName, :password)\");",
          "+",
          "+                    $cursor->execute(array(",
          "+                        \":password\"=>$password,",
          "+                        \":userName\"=>$userName",
          "+                    ));",
          "+                    return array(\"success\"=>true,\"data\"=>\"You have successfully registered!\");",
          "+                } catch(PDOException $e) {",
          "+                    $this->CheckErrors($e);",
          "+                }",
          "+            } else { /* Already exists */",
          "+                return array(\"success\"=>false,\"data\"=>\"username already exists in the system!\");",
          "+            }",
          "+        }",
          "+",
          "+        public function carAdd($manufacturer, $model, $year, $monthlyPrice) {",
          "+            $isAvailable = 1;",
          "+            $sql = \"INSERT INTO `cars` (`manufacturer`, `model`, `year`, `monthlyPrice`, `isAvailable`) value ('$manufacturer', '$model', $year, $monthlyPrice, $isAvailable)\";            ",
          "+            ",
          "+            try {",
          "+                $cursor = $this->MySQLdb->prepare($sql);",
          "+                $cursor->execute();",
          "+                return array(\"success\"=>true,\"data\"=>\"New record created successfully\");",
          "+            } catch(PDOException $e) {",
          "+                $this->CheckErrors($e);",
          "+            }",
          "+            return false;",
          "+        }",
          "+",
          "+        public function getAllCars() {",
          "+            try {",
          "+                $cursor = $this->MySQLdb->prepare(\"SELECT * FROM `cars`\");",
          "+                $cursor->execute();",
          "+                $retval = \"\";",
          "+",
          "+                foreach ($cursor->fetchAll() as $obj) {",
          "+                    $carId = $obj[\"carId\"];",
          "+                    $manufacturer = $obj[\"manufacturer\"];",
          "+                    $model = $obj[\"model\"];",
          "+                    $year = $obj[\"year\"];",
          "+                    $monthlyPrice = $obj[\"monthlyPrice\"];",
          "+                    $imageURL = $obj[\"imageURL\"];",
          "+                    $rentToUserName = $obj[\"rentToUserName\"];",
          "+",
          "+                    if (isset($imageURL)) {",
          "+                        $imageURL = base64_decode($obj[\"imageURL\"]);",
          "+                    }",
          "+",
          "+                    $retval.=\"<tr><td>$carId</td><td>$manufacturer</td><td>$model</td><td>$year</td><td>$monthlyPrice</td>\";",
          "+",
          "+                    $isAvailableToRent = $obj[\"isAvailable\"] == 1 ? true : false;",
          "+                    $isRentToLoggedInUserName = $_SESSION[\"userName\"] == $rentToUserName ? true : false;",
          "+",
          "+                    if ($isAvailableToRent) {",
          "+                        // Car is already available to rent",
          "+                        $retval.=\"<td><button id='car_$carId' type='button' class='btn btn-default' onclick='javascript:rentCar($carId)'>Rent</button></td>\";",
          "+                    } else {",
          "+                        if ($isRentToLoggedInUserName) {",
          "+                            // Car is rent to logged in user",
          "+                            $retval.=\"<td><button id='car_$carId' type='button' class='btn btn-default' onclick='javascript:returnCar($carId)'>Return</button></td>\";",
          "+                        } else {",
          "+                            // Car is rent to different user",
          "+                            $retval.=\"<td><button id='car_$carId' type='button' class='btn btn-default' disabled>Already Rent</button></td>\";",
          "+                        }",
          "+                    }",
          "+",
          "+                    $retval.=\"<tr>\";",
          "+                }",
          "+",
          "+                return array(\"success\"=>true,\"data\"=>$retval);",
          "+            }",
          "+            catch(PDOException $e) {",
          "+                $this->CheckErrors($e);",
          "+            }",
          "+            return false;",
          "+        }",
          "+",
          "+        public function getUserId($userName) {",
          "+            try {",
          "+                $cursor = $this->MySQLdb->prepare(\"SELECT `userId` FROM `users` WHERE `userName` = '$userName'\");",
          "+                $cursor->execute();",
          "+                $retval = $cursor->fetch();",
          "+                return $retval[\"userId\"];",
          "+            }",
          "+            catch(PDOException $e) {",
          "+                $this->CheckErrors($e);",
          "+            }",
          "+            return false;",
          "+        }",
          "+",
          "+        public function getUsers($userId) {",
          "+            try {",
          "+                $cursor = $this->MySQLdb->prepare(\"SELECT `userId`, `userName` FROM `users` WHERE NOT `userName` = $userId\");",
          "+                $cursor->execute();",
          "+                $retval = \"\";",
          "+                $retval = \"<select id='userNameSelection'>\";",
          "+",
          "+                foreach ($cursor->fetchAll() as $obj) {",
          "+                    $differentUserId = $obj[\"userId\"];",
          "+                    $differentUserName = $obj[\"userName\"];",
          "+",
          "+                    $retval.=\"<option value='$differentUserName'>$differentUserId - $differentUserName</option>\";",
          "+                }",
          "+",
          "+                $retval.=\"</select>\";",
          "+                return $retval;",
          "+            }",
          "+            catch(PDOException $e) {",
          "+                $this->CheckErrors($e);",
          "+            }",
          "+            return false;",
          "+        }",
          "+",
          "+        public function getProfile($userName) {",
          "+            try {",
          "+                $cursor = $this->MySQLdb->prepare(\"SELECT `userName`, `fullName`, `email`, `phoneNumber`, `address` FROM `users` WHERE `userName` = '$userName'\");",
          "+                $cursor->execute();",
          "+                $retval = $cursor->fetch();",
          "+                return array(\"success\"=>true,\"data\"=>$retval);",
          "+            }",
          "+            catch(PDOException $e) {",
          "+                $this->CheckErrors($e);",
          "+            }",
          "+            return false;",
          "+        }",
          "+",
          "+        public function editProfile($userName, $fullName, $email, $address, $phoneNumber) {",
          "+            try {",
          "+                $cursor = $this->MySQLdb->prepare(\"UPDATE `users` SET `fullName`='$fullName', `email`='$email', `phoneNumber`='$phoneNumber', `address`='$address' WHERE `userName`='$userName'\");",
          "+                $data = $cursor->execute();",
          "+                return array(\"success\"=>true,\"data\"=>$data);",
          "+            }",
          "+            catch(PDOException $e) {",
          "+                $this->CheckErrors($e);",
          "+            }",
          "+            return false;",
          "+        }",
          "+",
          "+        public function rentCar($carId) {",
          "+            try {",
          "+                $cursor = $this->MySQLdb->prepare(\"UPDATE `cars` SET `isAvailable` = '0', `rentToUserName` = :userName WHERE `cars`.`carId` = :carId\");",
          "+                $cursor->execute(array(\":userName\"=>$_SESSION[\"userName\"], \":carId\"=>$carId));",
          "+                return array(\"success\"=>true, \"data\"=>\"Car rent successfully!\");",
          "+            } catch (PDOException $e) {",
          "+                $this->CheckErrors(($e));",
          "+            }",
          "+        }",
          "+",
          "+        public function returnCar($carId) {",
          "+            try {",
          "+                $cursor = $this->MySQLdb->prepare(\"UPDATE `cars` SET `isAvailable` = '1', `rentToUserName` = '' WHERE `cars`.`carId` = :carId\");",
          "+                $cursor->execute(array(\":carId\"=>$carId));",
          "+                return array(\"success\"=>true, \"data\"=>\"Car return successfully!\");",
          "+            } catch (PDOException $e) {",
          "+                $this->CheckErrors(($e));",
          "+            }",
          "+        }",
          "+",
          "+    }",
          "+?>",
          "\\ No newline at end of file",
          "diff --git a/add_car.php b/add_car.php",
          "new file mode 100644",
          "index 0000000..fa01b99",
          "--- /dev/null",
          "+++ b/add_car.php",
          "@@ -0,0 +1,149 @@",
          "+<?php",
          "+",
          "+if (session_status() == PHP_SESSION_NONE) {",
          "+    session_start();",
          "+}",
          "+",
          "+if (!isset($_SESSION[\"userName\"])) {",
          "+    session_destroy();",
          "+    die(Header(\"Location: index.php\"));",
          "+}",
          "+",
          "+$userName = (isset($_SESSION[\"userName\"])) ? $_SESSION[\"userName\"] : '';",
          "+",
          "+?>",
          "+",
          "+<!DOCTYPE html>",
          "+<html lang=\"en\" dir=\"ltr\">",
          "+    <head>",
          "+    <title>ITSafe Car Rental</title>",
          "+        <meta charset=\"utf-8\">",
          "+\t\t<meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no\" />",
          "+        <link rel=\"shortcut icon\" href=\"favicon.ico\">",
          "+        <link rel=\"stylesheet\" href=\"https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css\">",
          "+        <script src=\"https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js\"></script>",
          "+        <script src=\"https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js\"></script>",
          "+    </head>",
          "+    <body class=\"text-center\" style=\"background-color: #ecedf0; width: 100%;\">",
          "+        <div>",
          "+            <!-- Nav Bar -->",
          "+            <nav class=\"navbar navbar-inverse navbar-fixed-top\">",
          "+                <div class=\"container-fluid\">",
          "+                    <div class=\"navbar-header\">",
          "+                        <button type=\"button\" class=\"navbar-toggle collapsed\" data-toggle=\"collapse\" data-target=\"#navbar\" aria-expanded=\"false\" aria-controls=\"navbar\">",
          "+                            <span class=\"sr-only\">Toggle navigation</span>",
          "+                            <span class=\"icon-bar\"></span>",
          "+                            <span class=\"icon-bar\"></span>",
          "+                            <span class=\"icon-bar\"></span>",
          "+                        </button>",
          "+                        <a class=\"navbar-brand\" href=\"index.php\">ITSafe Car Rental</a>",
          "+                    </div>",
          "+                    <div id=\"navbar\" class=\"navbar-collapse collapse\">",
          "+                        <ul class=\"nav navbar-nav navbar-right\">",
          "+                            <li><a id=\"logout\" href=\"#\" onclick=\"logout();\"><span class=\"glyphicon glyphicon-log-out\"></span> Logout</a></li>",
          "+                        </ul>",
          "+                        <ul class=\"nav navbar-nav navbar-left\">",
          "+                            <li><a href=\"main.php\">Book a Car</a></li>",
          "+                            <li class=\"active\"><a href=\"add_car.php\">Add a Car</a></li>",
          "+                            <li><a href=\"profile.php\">Profile</a></li>",
          "+                        </ul>",
          "+                    </div>",
          "+                </div>",
          "+            </nav>",
          "+            <br><br><br>",
          "+",
          "+            <!-- Add Car Form -->",
          "+            <div class=\"col-md-4 col-md-offset-4\" style=\"background-color: white; border-radius: 10px;\">",
          "+                <h3 style=\"text-align: center;\">Add a Car</h3>                    ",
          "+                <br />",
          "+",
          "+                <!-- Error Message -->",
          "+                <div id =\"alertDiv\" class=\"alert alert-danger text-left\" role=\"alert\" hidden>",
          "+                    <span class=\"glyphicon glyphicon-exclamation-sign\" aria-hidden=\"true\"></span>",
          "+                    <span class=\"sr-only\">Error:</span>",
          "+                    <span id=\"errorMessage\"></span>",
          "+                </div>",
          "+                    <div class=\"input-group\">",
          "+                        <span class=\"input-group-addon\"><i class=\"glyphicon glyphicon-globe\"></i></span>",
          "+                        <input id=\"manufacturer\" name=\"manufacturer\" type=\"text\" class=\"form-control\" placeholder=\"Manufacturer\">",
          "+                    </div>",
          "+                    <br />",
          "+                    <div class=\"input-group\">",
          "+                        <span class=\"input-group-addon\"><i class=\"glyphicon glyphicon-road\"></i></span>",
          "+                        <input id=\"model\" name=\"model\" type=\"text\" class=\"form-control\" placeholder=\"Model\">",
          "+                    </div>",
          "+                    <br />",
          "+                    <div class=\"input-group\">",
          "+                        <span class=\"input-group-addon\"><i class=\"glyphicon glyphicon-calendar\"></i></span>",
          "+                        <input id=\"year\" name=\"year\" type=\"text\" class=\"form-control\" placeholder=\"Year\">",
          "+                    </div>",
          "+                    <br />",
          "+                    <div class=\"input-group\">",
          "+                        <span class=\"input-group-addon\"><i class=\"glyphicon glyphicon-usd\"></i></span>",
          "+                        <input id=\"monthlyPrice\" name=\"monthlyPrice\" type=\"text\" class=\"form-control\" placeholder=\"Monthly Price\">",
          "+                        <div class=\"input-group-addon\">.00</div>",
          "+                    </div>",
          "+                    <br/>",
          "+                    <button id=\"saveButton\" type=\"button\" class=\"btn btn-primary\">Add</button><br/><br/>",
          "+                </div>",
          "+            </div>",
          "+",
          "+        <!-- Event Handling -->",
          "+        <script>",
          "+            function logout() {",
          "+                $.post(\"api.php\", {\"action\": \"logout\"}, function() {",
          "+                    location.href = \"index.php\";",
          "+                });",
          "+            }",
          "+",
          "+            function showErrorMessage(errorMessage) {",
          "+                $(\"#errorMessage\").text(errorMessage);",
          "+                $(\"#alertDiv\").show();",
          "+            }",
          "+",
          "+            function validate() {",
          "+                $(\"#alertDiv\").hide();",
          "+",
          "+                if (!$(\"#manufacturer\").val()) {",
          "+                    showErrorMessage(\"Manufacturer cannot be empty!\");",
          "+                    return false;",
          "+                }",
          "+                if (!$(\"#model\").val()) {",
          "+                    showErrorMessage(\"Model cannot be empty!\");",
          "+                    return false;",
          "+                }",
          "+                if (!$(\"#year\").val()) {",
          "+                    showErrorMessage(\"Year cannot be empty!\");",
          "+                    return false;",
          "+                }",
          "+                if (!$(\"#monthlyPrice\").val()) {",
          "+                    showErrorMessage(\"Monthly price cannot be empty!\");",
          "+                    return false;",
          "+                }",
          "+",
          "+                return true;",
          "+            }",
          "+",
          "+            $(\"#saveButton\").click(function() {",
          "+                if (validate()) {",
          "+                    var $postData = {",
          "+                        \"action\": \"carAdd\", ",
          "+                        \"manufacturer\": $(\"#manufacturer\").val(),",
          "+                        \"model\": $(\"#model\").val(),",
          "+                        \"year\": $(\"#year\").val(),",
          "+                        \"monthlyPrice\": $(\"#monthlyPrice\").val()",
          "+                    };",
          "+                    ",
          "+                    $.post(\"api.php\", $postData, function(data) {",
          "+                        if (data[\"success\"] == true) {",
          "+                            alert(\"Car added successfully!\");",
          "+                            location.href = \"main.php\";",
          "+                        } else {",
          "+                            alert(\"Error adding car!\");",
          "+                        }",
          "+                    });",
          "+                }",
          "+            });",
          "+        </script>",
          "+    </body>",
          "+</html>",
          "\\ No newline at end of file",
          "diff --git a/api.php b/api.php",
          "new file mode 100644",
          "index 0000000..16b7b6d",
          "--- /dev/null",
          "+++ b/api.php",
          "@@ -0,0 +1,206 @@",
          "+<?php",
          "+",
          "+    require_once \"./CommonInterface.php\";",
          "+    require_once \"./DatabaseInterface.php\";",
          "+",
          "+    if (session_status() == PHP_SESSION_NONE) {",
          "+        session_start();",
          "+    }",
          "+",
          "+    if (isset($_POST[\"action\"])) {",
          "+        switch ($_POST[\"action\"]) {",
          "+            case \"login\":",
          "+                login(",
          "+                    $_POST[\"userName\"],",
          "+                    $_POST[\"password\"]",
          "+                );",
          "+                break;",
          "+            case \"logout\":",
          "+                    logout($_POST[\"userName\"]);",
          "+                    break;",
          "+            case \"register\":",
          "+                register(",
          "+                    $_POST[\"userName\"], ",
          "+                    $_POST[\"password\"]",
          "+                );",
          "+                break;",
          "+            case \"getAllCars\":",
          "+                getAllCars();",
          "+                break;",
          "+            case \"carAdd\":",
          "+                carAdd(",
          "+                    $_POST[\"manufacturer\"],",
          "+                    $_POST[\"model\"],",
          "+                    $_POST[\"year\"],",
          "+                    $_POST[\"monthlyPrice\"]",
          "+                );",
          "+                break;",
          "+            case \"updateProfile\":",
          "+                updateProfile(",
          "+                    $_POST[\"userName\"],",
          "+                    $_POST[\"fullName\"],",
          "+                    $_POST[\"email\"],",
          "+                    $_POST[\"address\"],",
          "+                    $_POST[\"phoneNumber\"]",
          "+                );",
          "+                break;",
          "+            case \"getUserId\":",
          "+                getUserId($_POST[\"userName\"]);",
          "+                break;",
          "+            case \"getProfile\":",
          "+                getProfile($_POST[\"userName\"]);",
          "+                break;",
          "+            case \"rentCar\":",
          "+                rentCar($_POST[\"carId\"]);",
          "+                break;",
          "+            case \"returnCar\":",
          "+                returnCar($_POST[\"carId\"]);",
          "+                break;",
          "+            default;",
          "+        }",
          "+    }",
          "+",
          "+    function login($userName, $password) {",
          "+        if (isset($userName) && isset($password)) {",
          "+            $db = new DatabaseInterface();",
          "+            $retval = $db->login($userName, $password);",
          "+",
          "+            if ($retval[\"success\"] == true) {",
          "+                $_SESSION[\"userName\"] = $userName;",
          "+                return_success($retval[\"data\"]);",
          "+            } else {",
          "+                return_error($retval[\"data\"]);",
          "+            }",
          "+        } else {",
          "+            die(\"Missing user name or password!\");",
          "+        }",
          "+    }",
          "+",
          "+    function logout($userName) {",
          "+        session_destroy();",
          "+        die(Header(\"Location: index.php\"));",
          "+    }",
          "+",
          "+    function register($userName, $password) {",
          "+        if (isset($userName) && isset($password)) {",
          "+            $db = new DatabaseInterface();",
          "+            $retval = $db->register($userName, $password);",
          "+",
          "+            if ($retval[\"success\"] == true) {",
          "+                $_SESSION[\"userName\"] = $userName;",
          "+                return_success($retval);",
          "+            } else {",
          "+                return_error($retval);",
          "+            }",
          "+        } else {",
          "+            die(\"Missing user name or password!\");",
          "+        }",
          "+    }",
          "+",
          "+    function getAllCars() {",
          "+        $db = new DatabaseInterface();",
          "+        $retval = $db->getAllCars();",
          "+        if ($retval[\"success\"] == true) {",
          "+            return_success($retval[\"data\"]);",
          "+        } else {",
          "+            return_error($retval[\"data\"]);",
          "+        }",
          "+    }",
          "+",
          "+    function getUserId($userName) {",
          "+        if (isset($userName)) {",
          "+            $db = new DatabaseInterface();",
          "+            $retval = $db->getUserId($userName);",
          "+            if (isset($retval) && $retval != false) {",
          "+                $_SESSION[\"userId\"] = $retval;",
          "+                return_success($retval);",
          "+            } else {",
          "+                return_error(\"Malformed request\");",
          "+            }",
          "+        }",
          "+        return_error(\"Missing user name!\");",
          "+    }",
          "+",
          "+    function getProfile($userName) {",
          "+        if (isset($userName)) {",
          "+            $db = new DatabaseInterface();",
          "+            $data = $db->getProfile($userName);",
          "+            if ($data[\"success\"] == true) {",
          "+                return_success($data[\"data\"]);",
          "+            } else {",
          "+                return_error($data[\"data\"]);",
          "+            }",
          "+        } else {",
          "+            return_error(\"Missing user name!\");",
          "+        }",
          "+        return_error(\"Unexpected error!\");",
          "+    }",
          "+",
          "+    function getUsers($userId) {",
          "+        if (isset($userId)) {",
          "+            $db = new DatabaseInterface();",
          "+            $retval = $db->getUsers($userId);",
          "+            if ($retval[\"success\"] == true) {",
          "+                return_success($retval[\"data\"]);",
          "+            } else {",
          "+                return_error(\"Malformed request\");",
          "+            }",
          "+        }",
          "+        return_error(\"Missing user id!\");",
          "+    }",
          "+",
          "+    function carAdd($manufacturer, $model, $year, $monthlyPrice) {",
          "+        if (isset($manufacturer) && isset($model) && isset($year) && isset($monthlyPrice)) {",
          "+            $db = new DatabaseInterface();",
          "+            $retval = $db->carAdd($manufacturer, $model, $year, $monthlyPrice);",
          "+",
          "+            if ($retval[\"success\"] == true) {",
          "+                return_success($retval[\"data\"]);",
          "+            } else {",
          "+                return_error($retval[\"data\"]);",
          "+            }",
          "+        }",
          "+        return false;",
          "+    }",
          "+",
          "+    function updateProfile($userName, $fullName, $email, $address, $phoneNumber) {",
          "+        if (isset($userName)) {",
          "+            $db = new DatabaseInterface();",
          "+            $data = $db->editProfile($userName, $fullName, $email, $address, $phoneNumber);",
          "+            if ($data[\"success\"] == true) {",
          "+                return_success($data[\"data\"]);",
          "+            } else {",
          "+                return_error($data[\"data\"]);",
          "+            }",
          "+        } else {",
          "+            return_error(\"Missing user name!\");",
          "+        }",
          "+    }",
          "+",
          "+    function rentCar($carId) {",
          "+        if (isset($carId)) {",
          "+            $db = new DatabaseInterface();",
          "+            $data = $db->rentCar($carId);",
          "+            if ($data[\"success\"] == true) {",
          "+                return_success($data[\"data\"]);",
          "+            } else {",
          "+                return_error($data[\"data\"]);",
          "+            }",
          "+        }",
          "+        return false;",
          "+    }",
          "+",
          "+    function returnCar($carId) {",
          "+        if (isset($carId)) {",
          "+            $db = new DatabaseInterface();",
          "+            $data = $db->returnCar($carId);",
          "+            if ($data[\"success\"] == true) {",
          "+                return_success($data[\"data\"]);",
          "+            } else {",
          "+                return_error($data[\"data\"]);",
          "+            }",
          "+        }",
          "+        return false;",
          "+    }",
          "+",
          "+?>",
          "\\ No newline at end of file",
          "diff --git a/car_rent.sql b/car_rent.sql",
          "new file mode 100644",
          "index 0000000..ac02ec1",
          "--- /dev/null",
          "+++ b/car_rent.sql",
          "@@ -0,0 +1,100 @@",
          "+-- phpMyAdmin SQL Dump",
          "+-- version 5.1.1",
          "+-- https://www.phpmyadmin.net/",
          "+--",
          "+-- Host: 127.0.0.1",
          "+-- Generation Time: Mar 25, 2022 at 10:52 PM",
          "+-- Server version: 10.4.22-MariaDB",
          "+-- PHP Version: 8.1.2",
          "+",
          "+SET SQL_MODE = \"NO_AUTO_VALUE_ON_ZERO\";",
          "+START TRANSACTION;",
          "+SET time_zone = \"+00:00\";",
          "+",
          "+",
          "+/*!40101 SET @OLD_CHARACTER_SET_CLIENT=@@CHARACTER_SET_CLIENT */;",
          "+/*!40101 SET @OLD_CHARACTER_SET_RESULTS=@@CHARACTER_SET_RESULTS */;",
          "+/*!40101 SET @OLD_COLLATION_CONNECTION=@@COLLATION_CONNECTION */;",
          "+/*!40101 SET NAMES utf8mb4 */;",
          "+",
          "+--",
          "+-- Database: `car_rent`",
          "+--",
          "+",
          "+-- --------------------------------------------------------",
          "+",
          "+--",
          "+-- Table structure for table `cars`",
          "+--",
          "+",
          "+CREATE TABLE `cars` (",
          "+  `carId` smallint(10) NOT NULL,",
          "+  `manufacturer` varchar(20) NOT NULL,",
          "+  `model` varchar(20) NOT NULL,",
          "+  `year` int(10) NOT NULL,",
          "+  `monthlyPrice` int(10) NOT NULL,",
          "+  `isAvailable` int(1) NOT NULL,",
          "+  `rentToUserName` varchar(20) DEFAULT NULL",
          "+) ENGINE=InnoDB DEFAULT CHARSET=utf8;",
          "+",
          "+-- --------------------------------------------------------",
          "+",
          "+--",
          "+-- Table structure for table `users`",
          "+--",
          "+",
          "+CREATE TABLE `users` (",
          "+  `userId` smallint(6) NOT NULL,",
          "+  `userName` varchar(40) NOT NULL,",
          "+  `password` varchar(20) NOT NULL,",
          "+  `fullName` varchar(40) DEFAULT NULL,",
          "+  `email` varchar(40) DEFAULT NULL,",
          "+  `phoneNumber` varchar(20) DEFAULT NULL,",
          "+  `address` varchar(60) DEFAULT NULL,",
          "+  `carId` smallint(6) DEFAULT NULL",
          "+) ENGINE=InnoDB DEFAULT CHARSET=utf8;",
          "+",
          "+--",
          "+-- Dumping data for table `users`",
          "+--",
          "+",
          "+INSERT INTO `users` (`userId`, `userName`, `password`, `fullName`, `email`, `phoneNumber`, `address`, `carId`) VALUES",
          "+(2, 'idan.moshe', '1111', 'Idan Moshe', 'idanmos@gmail.com', '054-3111797', 'Mordechai Maklef 63/5, Beersheba, Israel', NULL),",
          "+(3, 'miri', '1111', 'Miri Moshe', 'mirin2305@gmail.com', '054-7405423', 'Mordechai Maklef 63/5', NULL);",
          "+",
          "+--",
          "+-- Indexes for dumped tables",
          "+--",
          "+",
          "+--",
          "+-- Indexes for table `cars`",
          "+--",
          "+ALTER TABLE `cars`",
          "+  ADD PRIMARY KEY (`carId`);",
          "+",
          "+--",
          "+-- Indexes for table `users`",
          "+--",
          "+ALTER TABLE `users`",
          "+  ADD PRIMARY KEY (`userId`);",
          "+",
          "+--",
          "+-- AUTO_INCREMENT for dumped tables",
          "+--",
          "+",
          "+--",
          "+-- AUTO_INCREMENT for table `cars`",
          "+--",
          "+ALTER TABLE `cars`",
          "+  MODIFY `carId` smallint(10) NOT NULL AUTO_INCREMENT, AUTO_INCREMENT=6;",
          "+",
          "+--",
          "+-- AUTO_INCREMENT for table `users`",
          "+--",
          "+ALTER TABLE `users`",
          "+  MODIFY `userId` smallint(6) NOT NULL AUTO_INCREMENT, AUTO_INCREMENT=4;",
          "+COMMIT;",
          "+",
          "+/*!40101 SET CHARACTER_SET_CLIENT=@OLD_CHARACTER_SET_CLIENT */;",
          "+/*!40101 SET CHARACTER_SET_RESULTS=@OLD_CHARACTER_SET_RESULTS */;",
          "+/*!40101 SET COLLATION_CONNECTION=@OLD_COLLATION_CONNECTION */;",
          "diff --git a/favicon.ico b/favicon.ico",
          "new file mode 100644",
          "index 0000000..1bfc770",
          "Binary files /dev/null and b/favicon.ico differ",
          "diff --git a/index.php b/index.php",
          "new file mode 100644",
          "index 0000000..b29f6b0",
          "--- /dev/null",
          "+++ b/index.php",
          "@@ -0,0 +1,48 @@",
          "+<?php",
          "+",
          "+  if (session_status() == PHP_SESSION_NONE) {",
          "+      session_start();",
          "+  }",
          "+",
          "+  if(isset($_SESSION[\"userName\"])) {",
          "+      Header(\"Location: ./main.php\");",
          "+  }",
          "+",
          "+?>",
          "+",
          "+<!DOCTYPE html>",
          "+<html lang=\"en\" dir=\"ltr\">",
          "+<head>",
          "+        <title>ITSafe Car Rental</title>",
          "+        <meta charset=\"utf-8\">",
          "+\t\t    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no\" />",
          "+        <link rel=\"shortcut icon\" href=\"favicon.ico\">",
          "+        <link rel=\"stylesheet\" href=\"https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css\">",
          "+        <script src=\"https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js\"></script>",
          "+        <script src=\"https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js\"></script>",
          "+    </head>",
          "+    <body class=\"text-center\" style=\"background-color: #ecedf0; width: 100%;\">",
          "+    <nav class=\"navbar navbar-inverse\">",
          "+            <div class=\"container-fluid\">",
          "+              <div class=\"navbar-header\">",
          "+                <a class=\"navbar-brand\" href=\"index.php\">ITSafe Car Rental</a>",
          "+              </div>",
          "+              <ul class=\"nav navbar-nav navbar-right\">",
          "+                <li><a href=\"register.php\"><span class=\"glyphicon glyphicon-user\"></span> Register</a></li>",
          "+                <li><a href=\"login.php\"><span class=\"glyphicon glyphicon-log-in\"></span> Login</a></li>",
          "+              </ul>",
          "+            </div>",
          "+        </nav>",
          "+        <br><br><br>",
          "+        <div class=\"container\">",
          "+          <div class=\"starter-template\">",
          "+            <h1>Online Car Rental</h1>",
          "+            <p class=\"lead\">",
          "+              ITSafe Rent-A-Car is proud to serve customers in Israel.<br>",
          "+              As part of the largest rental car company in the world,<br>",
          "+              which owns and operates more than 1.7 million vehicles,<br>",
          "+              we\u2019re sure to have a location near you or your travel destination.</p>",
          "+          </div>",
          "+        </div>",
          "+  </body>",
          "+</html>",
          "diff --git a/login.php b/login.php",
          "new file mode 100644",
          "index 0000000..c3cef42",
          "--- /dev/null",
          "+++ b/login.php",
          "@@ -0,0 +1,94 @@",
          "+<?php",
          "+",
          "+if (session_status() == PHP_SESSION_NONE) {",
          "+    session_start();",
          "+}",
          "+",
          "+if (isset($_SESSION[\"userName\"])) {",
          "+    Header(\"Location: main.php\");",
          "+}",
          "+",
          "+?>",
          "+",
          "+<!DOCTYPE html>",
          "+<html lang=\"en\" dir=\"ltr\">",
          "+    <head>",
          "+    <title>ITSafe Car Rental</title>",
          "+        <meta charset=\"utf-8\">",
          "+\t\t<meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no\" />",
          "+        <link rel=\"shortcut icon\" href=\"favicon.ico\">",
          "+        <link rel=\"stylesheet\" href=\"https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css\">",
          "+        <script src=\"https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js\"></script>",
          "+        <script src=\"https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js\"></script>",
          "+    </head>",
          "+    <body style=\"background-color: #ecedf0; width: 100%;\">",
          "+        <nav class=\"navbar navbar-inverse\">",
          "+            <div class=\"container-fluid\">",
          "+              <div class=\"navbar-header\">",
          "+                <a class=\"navbar-brand\" href=\"index.php\">ITSafe Car Rental</a>",
          "+              </div>",
          "+              <ul class=\"nav navbar-nav navbar-right\">",
          "+                <li><a href=\"register.php\"><span class=\"glyphicon glyphicon-user\"></span> Register</a></li>",
          "+                <li class=\"active\"><a href=\"login.php\"><span class=\"glyphicon glyphicon-log-in\"></span> Login</a></li>",
          "+              </ul>",
          "+            </div>",
          "+        </nav>",
          "+",
          "+        <div id=\"loginDiv\" class=\"col-md-4 col-md-offset-4\" style=\"background-color: white; border-radius: 10px;\">",
          "+            <h3 style=\"text-align: center;\">Login</h3>",
          "+            <div id =\"alertDiv\" class=\"alert alert-danger\" role=\"alert\" hidden>",
          "+                <span class=\"glyphicon glyphicon-exclamation-sign\" aria-hidden=\"true\"></span>",
          "+                <span class=\"sr-only\">Error:</span>",
          "+                <span id=\"errorMessage\"></span>",
          "+            </div>",
          "+            <div class=\"input-group\">",
          "+                    <span class=\"input-group-addon\"><i class=\"glyphicon glyphicon-envelope\"></i></span>",
          "+                    <input id=\"userName\" type=\"text\" class=\"form-control\" name=\"userName\" placeholder=\"User Name\">",
          "+                </div>",
          "+                <br />",
          "+                <div class=\"input-group\">",
          "+                    <span class=\"input-group-addon\"><i class=\"glyphicon glyphicon-lock\"></i></span>",
          "+                    <input id=\"password\" type=\"password\" class=\"form-control\" name=\"password\" placeholder=\"Password\">",
          "+                </div>",
          "+                <br />",
          "+                <div class=\"text-center\">",
          "+                    <button id=\"sendButton\" class=\"btn btn-primary\">Login</button>",
          "+                </div>",
          "+            <br />",
          "+        </div>",
          "+        <script>",
          "+            $(\"#sendButton\").click(function() {",
          "+                $(\"#alertDiv\").hide();",
          "+",
          "+                if (!$(\"#userName\").val()) {",
          "+                    $(\"#errorMessage\").text(\"User name cannot be empty!\");",
          "+                    $(\"#alertDiv\").show();",
          "+                    return;",
          "+                }",
          "+",
          "+                if (!$(\"#password\").val()) {",
          "+                    $(\"#errorMessage\").text(\"Password cannot be empty!\");",
          "+                    $(\"#alertDiv\").show();",
          "+                    return;",
          "+                }",
          "+",
          "+                var $postData = {",
          "+                    \"action\": \"login\",",
          "+                    \"userName\": $(\"#userName\").val(),",
          "+                    \"password\": $(\"#password\").val()",
          "+                };",
          "+",
          "+                $.post(\"api.php\", $postData, function(data) {",
          "+                    if (data[\"success\"] == true) {",
          "+                        $.post(\"api.php\", {\"action\": \"getUserId\", \"userName\": $(\"#userName\").val()}, function(userId) {",
          "+                            if (userId[\"success\"] == true) {",
          "+                                // success",
          "+                            }",
          "+                            location.href = \"main.php\";",
          "+                        });",
          "+                    }",
          "+                });",
          "+            });",
          "+        </script>",
          "+    </body>",
          "+</html>",
          "\\ No newline at end of file",
          "diff --git a/main.php b/main.php",
          "new file mode 100644",
          "index 0000000..bb0e686",
          "--- /dev/null",
          "+++ b/main.php",
          "@@ -0,0 +1,126 @@",
          "+<?php",
          "+",
          "+if (session_status() == PHP_SESSION_NONE) {",
          "+    session_start();",
          "+}",
          "+",
          "+if(!isset($_SESSION[\"userName\"])) {",
          "+  Header(\"Location: index.php\");",
          "+}",
          "+",
          "+?>",
          "+",
          "+",
          "+<!doctype html>",
          "+<html lang=\"en\">",
          "+  <head>",
          "+    <meta charset=\"utf-8\">",
          "+\t\t<meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no\" />",
          "+      <link rel=\"shortcut icon\" href=\"favicon.ico\">",
          "+      <link rel=\"stylesheet\" href=\"https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css\">",
          "+      <script src=\"https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js\"></script>",
          "+      <script src=\"https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js\"></script>",
          "+      <link href=\"https://getbootstrap.com/docs/3.4/examples/dashboard/dashboard.css\" rel=\"stylesheet\">",
          "+",
          "+      <script>",
          "+        function logout() {",
          "+          $.post(\"api.php\", {\"action\": \"logout\"}, function() {",
          "+          location.href = \"index.php\";",
          "+        });",
          "+      }",
          "+      </script>",
          "+  </head>",
          "+  <body>",
          "+    <!-- Nav Bar -->",
          "+    <nav class=\"navbar navbar-inverse navbar-fixed-top\">",
          "+      <div class=\"container-fluid\">",
          "+        <div class=\"navbar-header\">",
          "+          <button type=\"button\" class=\"navbar-toggle collapsed\" data-toggle=\"collapse\" data-target=\"#navbar\" aria-expanded=\"false\" aria-controls=\"navbar\">",
          "+            <span class=\"sr-only\">Toggle navigation</span>",
          "+            <span class=\"icon-bar\"></span>",
          "+            <span class=\"icon-bar\"></span>",
          "+            <span class=\"icon-bar\"></span>",
          "+          </button>",
          "+          <a class=\"navbar-brand\" href=\"index.php\">ITSafe Car Rental</a>",
          "+        </div>",
          "+        <div id=\"navbar\" class=\"navbar-collapse collapse\">",
          "+        <ul class=\"nav navbar-nav navbar-right\">",
          "+                <li><a id=\"logout\" href=\"#\" onclick=\"logout();\"><span class=\"glyphicon glyphicon-log-out\"></span> Logout</a></li>",
          "+              </ul>",
          "+          <ul class=\"nav navbar-nav navbar-left\">",
          "+            <li class=\"active\"><a href=\"main.php\">Book a Car</a></li>",
          "+            <li><a href=\"add_car.php\">Add a Car</a></li>",
          "+            <li><a href=\"profile.php\">Profile</a></li>",
          "+          </ul>",
          "+        </div>",
          "+      </div>",
          "+    </nav>",
          "+",
          "+    <!-- Cars List -->",
          "+    <div class=\"container\">",
          "+      <div class=\"row\">",
          "+        <div class=\"jumbotron\">",
          "+          <h1 class=\"page-header\">Dashboard</h1>",
          "+          <h2 class=\"sub-header\">Cars</h2>",
          "+          ",
          "+          <div class=\"table-responsive\">",
          "+            <table class=\"table table-striped\">",
          "+              <thead>",
          "+                <tr>",
          "+                  <th>License Plate</th>",
          "+                  <th>Manufacturer</th>",
          "+                  <th>Model</th>",
          "+                  <th>Year</th>",
          "+                  <th>Monthly Price</th>",
          "+                  <th>Action</th>",
          "+                </tr>",
          "+              </thead>",
          "+              <tbody id=\"cars_list\">",
          "+",
          "+              </tbody>",
          "+            </table>",
          "+          </div>",
          "+        </div>",
          "+      </div>",
          "+    </div>",
          "+",
          "+    <!-- Event Handling -->",
          "+    <script>",
          "+      function logout() {",
          "+        $.post(\"api.php\", {\"action\": \"logout\"}, function() {",
          "+          location.href = \"index.php\";",
          "+        });",
          "+      }",
          "+",
          "+      $(document).ready(function() {",
          "+        $.post(\"api.php\", {\"action\": \"getAllCars\"}, function(data) {",
          "+          if (data[\"success\"] == true) {",
          "+              $(\"#cars_list\").html(data[\"data\"]);",
          "+          }",
          "+        });",
          "+      });",
          "+",
          "+      function returnCar(carId) {",
          "+        $.post(\"api.php\", {\"action\": \"returnCar\", \"carId\": carId}, function(data) {",
          "+          if (data[\"success\"] == true) {",
          "+            alert(\"Car successfully return!\");",
          "+          } else {",
          "+            alert(\"Unexpected Error. Car unsuccessfully return!\");",
          "+          }",
          "+          location.reload();",
          "+        });",
          "+      }",
          "+",
          "+      function rentCar(carId) {",
          "+        $.post(\"api.php\", {\"action\": \"rentCar\", \"carId\": carId}, function(data) {",
          "+          if (data[\"success\"] == true) {",
          "+            alert(\"Car successfully rent!\");",
          "+          } else {",
          "+            alert(\"Unexpected Error. Car unsuccessfully rent!\");",
          "+          }",
          "+          location.reload();",
          "+        });",
          "+      }",
          "+    </script>",
          "+  </body>",
          "+</html>",
          "diff --git a/profile.php b/profile.php",
          "new file mode 100644",
          "index 0000000..50bcb3c",
          "--- /dev/null",
          "+++ b/profile.php",
          "@@ -0,0 +1,145 @@",
          "+<?php",
          "+",
          "+if (session_status() == PHP_SESSION_NONE) {",
          "+    session_start();",
          "+}",
          "+",
          "+if (!isset($_SESSION[\"userName\"])) {",
          "+    session_destroy();",
          "+    die(Header(\"Location: index.php\"));",
          "+}",
          "+",
          "+$userName = (isset($_SESSION[\"userName\"])) ? $_SESSION[\"userName\"] : '';",
          "+",
          "+?>",
          "+",
          "+<!DOCTYPE html>",
          "+<html lang=\"en\" dir=\"ltr\">",
          "+    <head>",
          "+    <title>ITSafe Car Rental</title>",
          "+        <meta charset=\"utf-8\">",
          "+\t\t<meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no\" />",
          "+        <link rel=\"shortcut icon\" href=\"favicon.ico\">",
          "+        <link rel=\"stylesheet\" href=\"https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css\">",
          "+        <script src=\"https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js\"></script>",
          "+        <script src=\"https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js\"></script>",
          "+    </head>",
          "+    <body class=\"text-center\" style=\"background-color: #ecedf0; width: 100%;\">",
          "+        <div>",
          "+            <nav class=\"navbar navbar-inverse navbar-fixed-top\">",
          "+                <div class=\"container-fluid\">",
          "+                    <div class=\"navbar-header\">",
          "+                        <button type=\"button\" class=\"navbar-toggle collapsed\" data-toggle=\"collapse\" data-target=\"#navbar\" aria-expanded=\"false\" aria-controls=\"navbar\">",
          "+                            <span class=\"sr-only\">Toggle navigation</span>",
          "+                            <span class=\"icon-bar\"></span>",
          "+                            <span class=\"icon-bar\"></span>",
          "+                            <span class=\"icon-bar\"></span>",
          "+                        </button>",
          "+                        <a class=\"navbar-brand\" href=\"index.php\">ITSafe Car Rental</a>",
          "+                    </div>",
          "+                    <div id=\"navbar\" class=\"navbar-collapse collapse\">",
          "+                    <ul class=\"nav navbar-nav navbar-right\">",
          "+                            <li><a id=\"logout\" href=\"#\" onclick=\"logout();\"><span class=\"glyphicon glyphicon-log-out\"></span> Logout</a></li>",
          "+                        </ul>",
          "+                    <ul class=\"nav navbar-nav navbar-left\">",
          "+                        <li><a href=\"main.php\">Book a Car</a></li>",
          "+                        <li><a href=\"add_car.php\">Add a Car</a></li>",
          "+                        <li class=\"active\"><a href=\"profile.php\">Profile</a></li>",
          "+                    </ul>",
          "+                </div>",
          "+            </div>",
          "+        </nav>",
          "+        <br><br><br>",
          "+            <div class=\"col-md-4 col-md-offset-4\" style=\"background-color: white; border-radius: 10px;\">",
          "+                <h3 style=\"text-align: center;\">Profile Update</h3>                    ",
          "+                <div class=\"input-group\">",
          "+                        <span class=\"input-group-addon\">@</span>",
          "+                        <input id=\"userName\" type=\"text\" class=\"form-control\" placeholder=\"User Name\" value='<?php echo $userName ?>' disabled>",
          "+                    </div>",
          "+                    <br />",
          "+                    <div class=\"input-group\">",
          "+                        <span class=\"input-group-addon\"><i class=\"glyphicon glyphicon-user\"></i></span>",
          "+                        <input id=\"fullName\" type=\"text\" class=\"form-control\" placeholder=\"Full Name\">",
          "+                    </div>",
          "+                    <br />",
          "+                    <div class=\"input-group\">",
          "+                        <span class=\"input-group-addon\"><i class=\"glyphicon glyphicon-envelope\"></i></span>",
          "+                        <input id=\"email\" type=\"text\" class=\"form-control\" placeholder=\"Email\">",
          "+                    </div>",
          "+                    <br />",
          "+                    <div class=\"input-group\">",
          "+                        <span class=\"input-group-addon\"><i class=\"glyphicon glyphicon-home\"></i></span>",
          "+                        <input id=\"address\" type=\"text\" class=\"form-control\" placeholder=\"Address\">",
          "+                    </div>",
          "+                    <br />",
          "+                    <div class=\"input-group\">",
          "+                        <span class=\"input-group-addon\"><i class=\"glyphicon glyphicon-phone\"></i></span>",
          "+                        <input id=\"phoneNumber\" type=\"text\" class=\"form-control\" placeholder=\"Phone Number\">",
          "+                    </div>",
          "+                    <br/><button id=\"saveButton\" type=\"button\" class=\"btn btn-primary\">Save</button><br/><br/>",
          "+                </div>",
          "+            </div>",
          "+        <script>",
          "+            function logout() {",
          "+                $.post(\"api.php\", {\"action\": \"logout\"}, function() {",
          "+                    location.href = \"index.php\";",
          "+                });",
          "+            }",
          "+",
          "+            $(\"#saveButton\").click(function() {",
          "+                var $userName = '<?php echo $userName ?>';",
          "+                var $fullName = $(\"#fullName\").val() != '' ? $(\"#fullName\").val() : \"NULL\";",
          "+                var $address = $(\"#address\").val() != '' ? $(\"#address\").val() : \"NULL\";",
          "+                var $phoneNumber = $(\"#phoneNumber\").val() != '' ? $(\"#phoneNumber\").val() : \"NULL\";",
          "+                var $email = $(\"#email\").val() != '' ? $(\"#email\").val() : \"NULL\";",
          "+",
          "+                var $postData = {",
          "+                    \"action\": \"updateProfile\",",
          "+                    \"userName\": $userName,",
          "+                    \"address\": $address,",
          "+                    \"phoneNumber\": $phoneNumber,",
          "+                    \"email\": $email,",
          "+                    \"fullName\": $fullName",
          "+                };",
          "+                ",
          "+                $.post(\"api.php\", $postData, function(data) {",
          "+                    if (data[\"success\"] == true) {",
          "+                        alert(\"Profile updated successfully!\");",
          "+                        location.reload();",
          "+                    }",
          "+                });",
          "+            });",
          "+",
          "+            $(document).ready(function() {",
          "+                var $userName = '<?php echo $userName ?>';",
          "+                ",
          "+                var $postData = {",
          "+                    \"action\": \"getProfile\", ",
          "+                    \"userName\": $userName",
          "+                };",
          "+",
          "+                $.post(\"api.php\", $postData, function(data) {                    ",
          "+                    if (data[\"success\"] == true && data[\"data\"]) {",
          "+                        var $profileData = data[\"data\"];",
          "+",
          "+                        if ($profileData[\"fullName\"] && $profileData[\"fullName\"] != 'NULL') {",
          "+                            $(\"#fullName\").val($profileData[\"fullName\"]);",
          "+                        }",
          "+",
          "+                        if ($profileData[\"email\"] && $profileData[\"email\"] != 'NULL') {",
          "+                            $(\"#email\").val($profileData[\"email\"]);",
          "+                        }",
          "+",
          "+                        if ($profileData[\"address\"] && $profileData[\"address\"] != 'NULL') {",
          "+                            $(\"#address\").val($profileData[\"address\"]);",
          "+                        }",
          "+                        ",
          "+                        if ($profileData[\"phoneNumber\"] && $profileData[\"phoneNumber\"] != 'NULL') {",
          "+                            $(\"#phoneNumber\").val($profileData[\"phoneNumber\"]);",
          "+                        }",
          "+                    }",
          "+                });",
          "+            });",
          "+        </script>",
          "+    </body>",
          "+</html>",
          "\\ No newline at end of file",
          "diff --git a/register.php b/register.php",
          "new file mode 100644",
          "index 0000000..0f49eaa",
          "--- /dev/null",
          "+++ b/register.php",
          "@@ -0,0 +1,115 @@",
          "+<?php",
          "+",
          "+if (session_status() == PHP_SESSION_NONE) {",
          "+    session_start();",
          "+}",
          "+",
          "+if (isset($_SESSION[\"userName\"])) {",
          "+    header(\"Location: ./main.php\");",
          "+}",
          "+",
          "+?>",
          "+",
          "+<!DOCTYPE html>",
          "+<html lang=\"en\" dir=\"ltr\">",
          "+    <head>",
          "+    <title>ITSafe Car Rental</title>",
          "+        <meta charset=\"utf-8\">",
          "+\t\t<meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no\" />",
          "+        <link rel=\"shortcut icon\" href=\"favicon.ico\">",
          "+        <link rel=\"stylesheet\" href=\"https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css\">",
          "+        <script src=\"https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js\"></script>",
          "+        <script src=\"https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js\"></script>",
          "+    </head>",
          "+    <body class=\"text-center\" style=\"background-color: #ecedf0; width: 100%;\">",
          "+        <div>",
          "+            <nav class=\"navbar navbar-inverse\">",
          "+                <div class=\"container-fluid\">",
          "+                  <div class=\"navbar-header\">",
          "+                    <a class=\"navbar-brand\" href=\"index.php\">ITSafe Car Rental</a>",
          "+                  </div>",
          "+                  <ul class=\"nav navbar-nav navbar-right\">",
          "+                    <li class=\"active\"><a href=\"register.php\"><span class=\"glyphicon glyphicon-user\"></span> Register</a></li>",
          "+                    <li><a href=\"login.php\"><span class=\"glyphicon glyphicon-log-in\"></span> Login</a></li>",
          "+                  </ul>",
          "+                </div>",
          "+            </nav>",
          "+            ",
          "+            <div class=\"col-md-4 col-md-offset-4\" style=\"background-color: white; border-radius: 10px;\">",
          "+                <h3 style=\"text-align: center;\">Rent Now!</h3>",
          "+",
          "+                <div id =\"alertDiv\" class=\"alert alert-danger text-left\" role=\"alert\" hidden>",
          "+                    <span class=\"glyphicon glyphicon-exclamation-sign\" aria-hidden=\"true\"></span>",
          "+                    <span class=\"sr-only\">Error:</span>",
          "+                    <span id=\"errorMessage\"></span>",
          "+                </div>",
          "+                <div class=\"input-group\">",
          "+                        <span class=\"input-group-addon\"><i class=\"glyphicon glyphicon-user\"></i></span>",
          "+                        <input id=\"userName\" type=\"text\" class=\"form-control\" name=\"userName\" placeholder=\"User Name\">",
          "+                    </div>",
          "+                    <br />",
          "+                    <div class=\"input-group\">",
          "+                        <span class=\"input-group-addon\"><i class=\"glyphicon glyphicon-lock\"></i></span>",
          "+                        <input id=\"password\" type=\"password\" class=\"form-control\" name=\"password\" placeholder=\"Password\">",
          "+                        ",
          "+                        <span class=\"input-group-addon\"><i class=\"glyphicon glyphicon-lock\"></i></span>",
          "+                        <input id=\"password2\" type=\"password\" class=\"form-control\" name=\"password2\" placeholder=\"Password Again\">",
          "+                    </div>",
          "+                    <br />",
          "+                    <button id=\"sendButton\" class=\"btn btn-primary\">Register</button><br /><br/>",
          "+            </div><br/>",
          "+        </div><br/>",
          "+        <script>",
          "+            function showErrorMessage(errorMessage) {",
          "+                $(\"#errorMessage\").text(errorMessage);",
          "+                $(\"#alertDiv\").show();",
          "+            }",
          "+",
          "+            function validate() {",
          "+                $(\"#alertDiv\").hide();",
          "+",
          "+                if (!$(\"#userName\").val()) {",
          "+                    showErrorMessage(\"User name cannot be empty!\");",
          "+                    return false;",
          "+                }",
          "+",
          "+                if (!$(\"#password\").val() || !$(\"#password2\").val()) {",
          "+                    showErrorMessage(\"Passwords cannot be empty!\");",
          "+                    return false;",
          "+                }",
          "+",
          "+                if ($(\"#password\").val() != $(\"#password2\").val()) {",
          "+                    showErrorMessage(\"Passwords must be equal!\");",
          "+                    return false;",
          "+                }",
          "+",
          "+                return true;",
          "+            }",
          "+",
          "+            $(\"#sendButton\").click(function() {",
          "+                if (validate()) {",
          "+                    var $postData = {",
          "+                        \"action\": \"register\",",
          "+                        \"userName\": $(\"#userName\").val(),",
          "+                        \"password\": $(\"#password\").val()",
          "+                    };",
          "+                    ",
          "+                    $.post(\"api.php\", $postData, function(data) {",
          "+                        if (data[\"success\"] == true) {",
          "+                            alert(\"You have successfully registered!\");",
          "+",
          "+                            $.post(\"api.php\", {\"action\": \"getUserId\", \"userName\": $(\"#userName\").val()}, function(userId) {",
          "+                                if (userId[\"success\"] == true) {",
          "+                                    // success",
          "+                                }",
          "+                                location.href = \"main.php\";",
          "+                            });",
          "+                        } else {",
          "+                            showErrorMessage(\"An unexpected error occurred. Please try again later.\");",
          "+                        }",
          "+                    });",
          "+                }",
          "+            });",
          "+        </script>",
          "+    </body>",
          "+</html>",
          "\\ No newline at end of file",
          ""
        ]
      }
    },
    "remote": "https://github.com/idanmos/WebCarRental"
  }
}